{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_constants","_isEmpty","_device","_axios","e","__esModule","default","getRemoteLogger","remoteLogger","AsyncStorage","getItem","REMOTE_LOGGER_KEY","JSON","parse","getUserPhone","USER_PHONE_KEY","LogLevel","exports","endpoints","log","level","context","message","args","userPhone","isEmpty","axios","post","length","undefined","user","device","getInfo","version","getVersion","console","logError","error","_default","debug","warn"],"sources":["index.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { REMOTE_LOGGER_KEY, USER_PHONE_KEY } from '../../containers/app/constants';\nimport { ErrorLog } from 'incident-code-core';\nimport isEmpty from 'lodash/isEmpty';\nimport { getInfo, getVersion } from '../../utils/device';\n\nimport axios from '../axios';\n\nconst getRemoteLogger = async () => {\n  const remoteLogger = (await AsyncStorage.getItem(REMOTE_LOGGER_KEY)) || '';\n  return JSON.parse(remoteLogger);\n};\n\nconst getUserPhone = async () => AsyncStorage.getItem(USER_PHONE_KEY);\n\nexport enum LogLevel {\n  log = 'log',\n  error = 'error',\n  debug = 'debug',\n  warn = 'warn',\n}\n\nexport const endpoints = {\n  log: 'log',\n};\n\nconst log = async (\n  level: LogLevel,\n  context: string,\n  message: string,\n  ...args: any[]\n) => {\n  const userPhone = await getUserPhone();\n  const remoteLogger = await getRemoteLogger();\n  if (!isEmpty(remoteLogger)) {\n    axios.post(endpoints.log, {\n      level,\n      context,\n      message,\n      args: args.length === 0 ? undefined : args,\n      user: userPhone,\n      device: getInfo(),\n      version: getVersion(),\n    });\n  }\n\n  console[level](`${context}:`, message, ...args);\n};\n\nconst logError = async (error: ErrorLog) => {\n  await axios.post(`${endpoints.log}/error`, error);\n};\n\nexport default {\n  log: (context: string, message: string, ...args: any[]) => {\n    log(LogLevel.log, context, message, args);\n  },\n  error: (context: string, message: string, ...args: any[]) => {\n    log(LogLevel.error, context, message, args);\n  },\n  debug: (context: string, message: string, ...args: any[]) => {\n    log(LogLevel.debug, context, message, args);\n  },\n  warn: (context: string, message: string, ...args: any[]) => {\n    log(LogLevel.warn, context, message, args);\n  },\n  logError,\n};\n"],"mappings":"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","ignoreList":[]}