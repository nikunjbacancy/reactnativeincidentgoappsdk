{"version":3,"names":["_reactNative","require","_reactNativeGeolocationService","_interopRequireDefault","_reactNativePermissions","_getPermissions","_constants","_onError","_onSuccess","e","__esModule","default","getCachedFinePosition","Promise","resolve","reject","permissions","getPermissions","console","log","OptionsForCachedFine","getPosition","Geolocation","getCurrentPosition","position","onSuccess","error","onGeolocationError","check","bestLocation","then","checkResult","RESULTS","GRANTED","request","requestResult","Alert","alert","text","onPress","openSettings","cancelable","_default","exports"],"sources":["getCachedFinePosition.ts"],"sourcesContent":["import { Alert } from 'react-native';\nimport Geolocation, { GeoPosition } from 'react-native-geolocation-service';\nimport {\n  check,\n  openSettings,\n  request,\n  RESULTS,\n} from 'react-native-permissions';\n\nimport getPermissions from '../permission/getPermissions';\nimport { OptionsForCachedFine } from './constants';\nimport { onGeolocationError } from './onError';\nimport onSuccess from './onSuccess';\n\nconst getCachedFinePosition = () => {\n  return new Promise<GeoPosition>((resolve: any, reject: any) => {\n    const permissions = getPermissions();\n    console.log(\"getCachedFinePosition==>\",permissions)\n    console.log(\"OptionsForCachedFine==>\",OptionsForCachedFine)\n    const getPosition = () => {\n      Geolocation.getCurrentPosition(\n        position => onSuccess(resolve, position),\n        error => onGeolocationError(reject, error),\n        OptionsForCachedFine,\n      );\n    };\n    check(permissions.bestLocation).then(checkResult => {\n      console.log(\"checkResult===>\",checkResult)\n      if (checkResult === RESULTS.GRANTED) {\n        getPosition();\n      } else {\n        request(permissions.bestLocation).then(requestResult => {\n          if (requestResult === RESULTS.GRANTED) {\n            getPosition();\n          } else {\n            Alert.alert(\n              'Permission Warning',\n              'This app needs location permission to ALWAYS to work',\n              [{ text: 'Open settings', onPress: openSettings }],\n              {\n                cancelable: false,\n              },\n            );\n          }\n        });\n      }\n    });\n  });\n};\n\nexport default getCachedFinePosition;\n"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,8BAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,uBAAA,GAAAH,OAAA;AAOA,IAAAI,eAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,UAAA,GAAAL,OAAA;AACA,IAAAM,QAAA,GAAAN,OAAA;AACA,IAAAO,UAAA,GAAAL,sBAAA,CAAAF,OAAA;AAAoC,SAAAE,uBAAAM,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEpC,MAAMG,qBAAqB,GAAGA,CAAA,KAAM;EAClC,OAAO,IAAIC,OAAO,CAAc,CAACC,OAAY,EAAEC,MAAW,KAAK;IAC7D,MAAMC,WAAW,GAAG,IAAAC,uBAAc,EAAC,CAAC;IACpCC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAACH,WAAW,CAAC;IACnDE,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAACC,+BAAoB,CAAC;IAC3D,MAAMC,WAAW,GAAGA,CAAA,KAAM;MACxBC,sCAAW,CAACC,kBAAkB,CAC5BC,QAAQ,IAAI,IAAAC,kBAAS,EAACX,OAAO,EAAEU,QAAQ,CAAC,EACxCE,KAAK,IAAI,IAAAC,2BAAkB,EAACZ,MAAM,EAAEW,KAAK,CAAC,EAC1CN,+BACF,CAAC;IACH,CAAC;IACD,IAAAQ,6BAAK,EAACZ,WAAW,CAACa,YAAY,CAAC,CAACC,IAAI,CAACC,WAAW,IAAI;MAClDb,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAACY,WAAW,CAAC;MAC1C,IAAIA,WAAW,KAAKC,+BAAO,CAACC,OAAO,EAAE;QACnCZ,WAAW,CAAC,CAAC;MACf,CAAC,MAAM;QACL,IAAAa,+BAAO,EAAClB,WAAW,CAACa,YAAY,CAAC,CAACC,IAAI,CAACK,aAAa,IAAI;UACtD,IAAIA,aAAa,KAAKH,+BAAO,CAACC,OAAO,EAAE;YACrCZ,WAAW,CAAC,CAAC;UACf,CAAC,MAAM;YACLe,kBAAK,CAACC,KAAK,CACT,oBAAoB,EACpB,sDAAsD,EACtD,CAAC;cAAEC,IAAI,EAAE,eAAe;cAAEC,OAAO,EAAEC;YAAa,CAAC,CAAC,EAClD;cACEC,UAAU,EAAE;YACd,CACF,CAAC;UACH;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAhC,OAAA,GAEaC,qBAAqB","ignoreList":[]}