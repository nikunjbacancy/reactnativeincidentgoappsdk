{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_constants","e","__esModule","default","saveTwilioAccessToken","token","tokenWithExpire","expires_at","Date","now","expires_in","ExpireOffset","AsyncStorage","setItem","KeyTwilioAccessToken","JSON","stringify","_default","exports"],"sources":["saveTwilioAccessToken.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/camelcase */\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { ExpireOffset, KeyTwilioAccessToken } from '../../api/twilio/constants';\nimport { AccessToken } from 'incident-code-core';\n\nconst saveTwilioAccessToken = async (token: AccessToken) => {\n  const tokenWithExpire = !token.expires_at\n    ? {\n        ...token,\n        expires_at: Date.now() + (token.expires_in || 1) * 1000 - ExpireOffset,\n      }\n    : token;\n  await AsyncStorage.setItem(\n    KeyTwilioAccessToken,\n    JSON.stringify(tokenWithExpire),\n  );\n};\n\nexport default saveTwilioAccessToken;\n"],"mappings":";;;;;;AACA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AAAgF,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAFhF;;AAKA,MAAMG,qBAAqB,GAAG,MAAOC,KAAkB,IAAK;EAC1D,MAAMC,eAAe,GAAG,CAACD,KAAK,CAACE,UAAU,GACrC;IACE,GAAGF,KAAK;IACRE,UAAU,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,CAACJ,KAAK,CAACK,UAAU,IAAI,CAAC,IAAI,IAAI,GAAGC;EAC5D,CAAC,GACDN,KAAK;EACT,MAAMO,qBAAY,CAACC,OAAO,CACxBC,+BAAoB,EACpBC,IAAI,CAACC,SAAS,CAACV,eAAe,CAChC,CAAC;AACH,CAAC;AAAC,IAAAW,QAAA,GAAAC,OAAA,CAAAf,OAAA,GAEaC,qBAAqB","ignoreList":[]}