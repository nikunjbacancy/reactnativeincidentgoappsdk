{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_api","_screens","_constants","_types","_incidentCodeCore","_reactNativePushNotification","_device","_navigation","e","__esModule","default","getIncidentId","notification","_notification$data","_notification$userInf","data","incidentId","_notification$data2","userInfo","_notification$userInf2","undefined","setupNotifications","Promise","PNotification","configure","onRegister","token","console","log","isAndroid","createChannel","channelId","channelName","channelDescription","playSound","soundName","importance","vibrate","created","onNotification","_notification$data12","_notification$data13","_notification$data15","_notification$data16","_notification$data25","_notification$data26","_notification$data28","_notification$data29","_notification$data36","_notification$userInf3","userInteraction","isIos","_notification$data3","_notification$data4","_notification$data6","_notification$data7","type","IncidentType","Normal","event","_notification$data5","NavigatorService","navigate","Screens","Menu","Tips","TipDetail","incident","showChat","tipId","_notification$data8","_notification$data9","_notification$data10","_notification$data11","Escort","_notification$data14","emit","AppEvent","OnEscortClosed","OnLocationQuestion","foreground","_notification$data17","_notification$data18","_notification$data19","_notification$data20","OnSiteKeyNotificataionReceived","_notification$data21","_notification$data22","_notification$data23","_notification$data24","PassiveEscort","_notification$data27","OnBeaconUpdated","OnChatMessageTap","_notification$data30","_notification$data31","_notification$data32","_notification$data33","_notification$data34","_notification$data35","incidentType","link","escortState","AsyncStorage","getItem","ESCORT_STATE_KEY","EscortState","Started","id","permissions","alert","badge","sound","popInitialNotification","requestPermissions","_default","exports"],"sources":["setupNotifications.ts"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AppEvent, event } from '../../api';\nimport Screens from '../../containers/providers/RoutesProvider/screens';\nimport { ESCORT_STATE_KEY } from '../../containers/screens/Home/Escort/RecordScreen/constants';\nimport { EscortState } from '../../containers/screens/Home/Escort/RecordScreen/types';\nimport { IncidentType } from 'incident-code-core';\nimport PNotification, {\n  PushNotification\n} from 'react-native-push-notification';\n\nimport { isAndroid, isIos } from '../device';\nimport NavigatorService from '../navigation';\n\nconst getIncidentId = (notification: PushNotification): string | undefined => {\n  // //(\"getIncidentId--->\")\n  // //(\"getIncidentId notification--->\",notification)\n  // @ts-ignore\n  if (notification.data?.incidentId) {\n    // @ts-ignore\n    return notification.data?.incidentId;\n  }\n  if (notification.userInfo?.incidentId) {\n    return notification.userInfo?.incidentId;\n  }\n  return undefined;\n};\n\n// const setupNotifications = (): Promise<PushNotification | undefined> =>\n//   new Promise(() => {\n//     //(\"notification setup\")\n//     PNotification.configure({\n//       onRegister: function (token) {\n//         console.log(\"TOKEN:\", token);\n//       },\n//       onNotification: async notification => {\n//         // //(\"notification: --------- \" + JSON.stringify(notification));\n\n//         if (!notification.userInteraction) {\n//           return;\n//         }\n\n//         if (\n//           // @ts-ignore\n//           notification.data?.type === \"Location\" &&\n//           // @ts-ignore\n//           notification.data?.event === 'LocationQuestion'\n//         ) {\n//           // console.log(\"Incident Escort --------- \");\n//           // @ts-ignore\n//           console.log(\"******************************location question******************************\")\n//           event.emit(AppEvent.OnLocationQuestion, notification.data);\n//           return;\n//         }\n\n//         //incidentType\n//         if (\n//           // @ts-ignore\n//           notification.data?.type === IncidentType.Normal &&\n//           // @ts-ignore\n//           notification.data?.event === 'resolved'\n//         ) {\n//           //(\"AppEvent.OnIncidentUpdated: --------- \");\n//           // @ts-ignore\n//           event.emit(AppEvent.OnIncidentUpdated, notification.data?.tipId);\n//           return;\n//         }\n//         if (\n//           // @ts-ignore\n//           notification.data?.type === IncidentType.Escort &&\n//           // @ts-ignore\n//           notification.data?.event === 'resolved'\n//         ) {\n//           //(\"Incident Escort --------- \");\n//           // @ts-ignore\n//           event.emit(AppEvent.OnEscortClosed, notification.data?.tipId);\n//           return;\n//         }\n\n//         if (\n//           // @ts-ignore\n//           notification.data?.type === 'beacon' &&\n//           // @ts-ignore\n//           notification.data?.event === 'beaconUpdate'\n//         ) {\n//           //(\"AppEvent.OnBeaconUpdated --------- \");\n//           event.emit(AppEvent.OnBeaconUpdated, notification.data);\n//           return;\n//         }\n\n//         if (\n//           // @ts-ignore\n//           notification.data?.incidentType === IncidentType.Escort ||\n//           // @ts-ignore\n//           notification.userInfo?.link\n//         )\n//           return;\n//         // @ts-ignore\n//         // if (isIos) {\n//         //   const incidentId = getIncidentId(notification);\n//         //   if (incidentId) {\n//         //     await addBadge(incidentId as Id);\n//         //   }\n//         // }\n//         const escortState = await AsyncStorage.getItem(ESCORT_STATE_KEY);\n//         if (escortState === EscortState.Started) return;\n//         if (notification.foreground && isIos) {\n//           // //(\"notification foreground received --------------- \")\n//           // return resolve(notification);\n//         }\n//         const incidentId = getIncidentId(notification);\n//         if (incidentId) {\n//           NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n//             incident: {\n//               id: incidentId,\n//             },\n//             showChat: true,\n//           });\n//         }\n//       },\n\n//       permissions: {\n//         alert: true,\n//         badge: true,\n//         sound: true\n//       },\n\n//       popInitialNotification: true,\n//       requestPermissions: true,\n//     });\n//   });\n\nconst setupNotifications = (): Promise<PushNotification | undefined> =>\n  new Promise(() => {\n    PNotification.configure({\n      onRegister: function (token) {\n        console.log(\"TOKEN:\", token);\n        if (isAndroid) {\n          PNotification.createChannel(\n            {\n              channelId: \"ico-app\", // (required)\n              channelName: \"icoappchannel\", // (required)\n              channelDescription: \"A channel to categorise your notifications\", // (optional) default: undefined.\n              playSound: true, // (optional) default: true\n              soundName: \"default\", // (optional) See `soundName` parameter of `localNotification` function\n              importance: 4, // (optional) default: Importance.HIGH. Int value of the Android notification importance\n              vibrate: true, // (optional) default: true. Creates the default vibration pattern if true.\n\n            },\n            (created) => console.log(`createChannel returned '${created}'`) // (optional) callback returns whether the channel was created, false means it already existed.\n          );\n\n        }\n      },\n\n      onNotification: async notification => {\n        // console.log(\"onNotification====>\",notification)\n        if (!notification.userInteraction) {\n          return;\n        }\n        console.log(\"on tap====>\",notification)\n        if (isIos) {\n          if (notification.data?.type === IncidentType.Normal && notification.data?.event === 'resolved') {\n            NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n              incident: undefined,\n              showChat: false,\n              tipId: notification.data?.tipId\n            });\n            return;\n          }\n          if (notification.data?.data?.type === IncidentType.Normal && notification.data?.data?.event === 'resolved') {\n            NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n              incident: undefined,\n              showChat: false,\n              tipId: notification.data?.data?.tipId\n            });\n            return;\n          }\n\n        } else {\n          if (notification.data?.data?.type === IncidentType.Normal && notification.data?.data?.event === 'resolved') {\n            NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n              incident: undefined,\n              showChat: false,\n              tipId: notification.data?.data?.tipId\n            });\n            return;\n          }\n        }\n\n        if (\n          // @ts-ignore\n          notification.data?.type === IncidentType.Escort &&\n          // @ts-ignore\n          notification.data?.event === 'resolved'\n        ) {\n          // console.log(\"Incident Escort --------- \");\n          // @ts-ignore\n          event.emit(AppEvent.OnEscortClosed, notification.data?.tipId);\n          return;\n        }\n\n        if (\n          // @ts-ignore\n          notification.data?.type === \"Location\" &&\n          // @ts-ignore\n          notification.data?.event === 'LocationQuestion'\n        ) {\n          // console.log(\"Incident Escort --------- \");\n          // @ts-ignore\n          event.emit(AppEvent.OnLocationQuestion, notification.data);\n\n          return;\n        }\n\n        //handle site key notification\n        if (isIos) {\n          if (notification.foreground == false) {\n            if (notification.data?.type === \"SiteKey\" && notification.data?.event === 'SiteKey' ||\n              notification.data?.data?.type === \"SiteKey\" && notification.data?.data?.event === 'SiteKey'\n            ) {\n              event.emit(AppEvent.OnSiteKeyNotificataionReceived, notification.data);\n              return;\n            }\n          } else {\n            if (notification.data?.data?.type === \"SiteKey\" && notification.data?.data?.event === 'SiteKey') {\n              event.emit(AppEvent.OnSiteKeyNotificataionReceived, notification.data);\n              return;\n            }\n          }\n        }\n        else {\n          if (notification.data?.type === \"SiteKey\" && notification.data?.event === 'SiteKey') {\n            event.emit(AppEvent.OnSiteKeyNotificataionReceived, notification.data);\n            return;\n          }\n        }\n\n        if (\n          // @ts-ignore\n          notification.data?.type === IncidentType.PassiveEscort &&\n          // @ts-ignore\n          notification.data?.event === 'resolved'\n        ) {\n          // @ts-ignore\n          event.emit(AppEvent.OnEscortClosed, notification.data?.tipId);\n          return;\n        }\n\n        if (\n          // @ts-ignore\n          notification.data?.type === 'beacon' &&\n          // @ts-ignore\n          notification.data?.event === 'beaconUpdate'\n        ) {\n          event.emit(AppEvent.OnBeaconUpdated, notification.data);\n          return;\n        }\n\n        if (isIos) {\n          if (notification.foreground == false) {\n            if (notification.data.type === 'chat' && notification.data.event === 'Message') {\n              event.emit(AppEvent.OnChatMessageTap, notification.data.data);\n              return;\n            }\n          }\n          else {\n            if (notification.data?.data.type === 'chat' && notification.data?.data.event === 'Message') {\n              event.emit(AppEvent.OnChatMessageTap, notification.data?.data);\n              return;\n            }\n          }\n        } else {\n          if (notification.data?.data.type === 'chat' && notification.data?.data.event === 'Message') {\n            event.emit(AppEvent.OnChatMessageTap, notification.data?.data);\n            return;\n          }\n        }\n\n        if (\n          // @ts-ignore\n          notification.data?.incidentType === IncidentType.Escort ||\n          // @ts-ignore\n          notification.userInfo?.link\n        )\n          return;\n        // @ts-ignore\n        // if (isIos) {\n        //   const incidentId = getIncidentId(notification);\n        //   if (incidentId) {\n        //     await addBadge(incidentId as Id);\n        //   }\n        // }\n        const escortState = await AsyncStorage.getItem(ESCORT_STATE_KEY);\n        if (escortState === EscortState.Started) return;\n        if (notification.foreground && isIos) {\n          // console.log(\"notification foreground received --------------- \")\n          // return resolve(notification);\n        }\n        const incidentId = getIncidentId(notification);\n        if (incidentId) {\n          NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n            incident: {\n              id: incidentId,\n            },\n            showChat: true,\n          });\n        }\n      },\n\n      permissions: {\n        alert: true,\n        badge: true,\n        sound: true\n      },\n\n      popInitialNotification: true,\n      requestPermissions: true,\n    });\n  });\n\nexport default setupNotifications;"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AACA,IAAAI,MAAA,GAAAJ,OAAA;AACA,IAAAK,iBAAA,GAAAL,OAAA;AACA,IAAAM,4BAAA,GAAAP,sBAAA,CAAAC,OAAA;AAIA,IAAAO,OAAA,GAAAP,OAAA;AACA,IAAAQ,WAAA,GAAAT,sBAAA,CAAAC,OAAA;AAA6C,SAAAD,uBAAAU,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE7C,MAAMG,aAAa,GAAIC,YAA8B,IAAyB;EAAA,IAAAC,kBAAA,EAAAC,qBAAA;EAC5E;EACA;EACA;EACA,KAAAD,kBAAA,GAAID,YAAY,CAACG,IAAI,cAAAF,kBAAA,eAAjBA,kBAAA,CAAmBG,UAAU,EAAE;IAAA,IAAAC,mBAAA;IACjC;IACA,QAAAA,mBAAA,GAAOL,YAAY,CAACG,IAAI,cAAAE,mBAAA,uBAAjBA,mBAAA,CAAmBD,UAAU;EACtC;EACA,KAAAF,qBAAA,GAAIF,YAAY,CAACM,QAAQ,cAAAJ,qBAAA,eAArBA,qBAAA,CAAuBE,UAAU,EAAE;IAAA,IAAAG,sBAAA;IACrC,QAAAA,sBAAA,GAAOP,YAAY,CAACM,QAAQ,cAAAC,sBAAA,uBAArBA,sBAAA,CAAuBH,UAAU;EAC1C;EACA,OAAOI,SAAS;AAClB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,MAAMC,kBAAkB,GAAGA,CAAA,KACzB,IAAIC,OAAO,CAAC,MAAM;EAChBC,oCAAa,CAACC,SAAS,CAAC;IACtBC,UAAU,EAAE,SAAAA,CAAUC,KAAK,EAAE;MAC3BC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,KAAK,CAAC;MAC5B,IAAIG,iBAAS,EAAE;QACbN,oCAAa,CAACO,aAAa,CACzB;UACEC,SAAS,EAAE,SAAS;UAAE;UACtBC,WAAW,EAAE,eAAe;UAAE;UAC9BC,kBAAkB,EAAE,4CAA4C;UAAE;UAClEC,SAAS,EAAE,IAAI;UAAE;UACjBC,SAAS,EAAE,SAAS;UAAE;UACtBC,UAAU,EAAE,CAAC;UAAE;UACfC,OAAO,EAAE,IAAI,CAAE;QAEjB,CAAC,EACAC,OAAO,IAAKX,OAAO,CAACC,GAAG,CAAC,2BAA2BU,OAAO,GAAG,CAAC,CAAC;QAClE,CAAC;MAEH;IACF,CAAC;IAEDC,cAAc,EAAE,MAAM3B,YAAY,IAAI;MAAA,IAAA4B,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,sBAAA;MACpC;MACA,IAAI,CAACrC,YAAY,CAACsC,eAAe,EAAE;QACjC;MACF;MACAvB,OAAO,CAACC,GAAG,CAAC,aAAa,EAAChB,YAAY,CAAC;MACvC,IAAIuC,aAAK,EAAE;QAAA,IAAAC,mBAAA,EAAAC,mBAAA,EAAAC,mBAAA,EAAAC,mBAAA;QACT,IAAI,EAAAH,mBAAA,GAAAxC,YAAY,CAACG,IAAI,cAAAqC,mBAAA,uBAAjBA,mBAAA,CAAmBI,IAAI,MAAKC,8BAAY,CAACC,MAAM,IAAI,EAAAL,mBAAA,GAAAzC,YAAY,CAACG,IAAI,cAAAsC,mBAAA,uBAAjBA,mBAAA,CAAmBM,KAAK,MAAK,UAAU,EAAE;UAAA,IAAAC,mBAAA;UAC9FC,mBAAgB,CAACC,QAAQ,CAACC,gBAAO,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;YACrDC,QAAQ,EAAE/C,SAAS;YACnBgD,QAAQ,EAAE,KAAK;YACfC,KAAK,GAAAT,mBAAA,GAAEhD,YAAY,CAACG,IAAI,cAAA6C,mBAAA,uBAAjBA,mBAAA,CAAmBS;UAC5B,CAAC,CAAC;UACF;QACF;QACA,IAAI,EAAAf,mBAAA,GAAA1C,YAAY,CAACG,IAAI,cAAAuC,mBAAA,gBAAAA,mBAAA,GAAjBA,mBAAA,CAAmBvC,IAAI,cAAAuC,mBAAA,uBAAvBA,mBAAA,CAAyBE,IAAI,MAAKC,8BAAY,CAACC,MAAM,IAAI,EAAAH,mBAAA,GAAA3C,YAAY,CAACG,IAAI,cAAAwC,mBAAA,gBAAAA,mBAAA,GAAjBA,mBAAA,CAAmBxC,IAAI,cAAAwC,mBAAA,uBAAvBA,mBAAA,CAAyBI,KAAK,MAAK,UAAU,EAAE;UAAA,IAAAW,mBAAA;UAC1GT,mBAAgB,CAACC,QAAQ,CAACC,gBAAO,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;YACrDC,QAAQ,EAAE/C,SAAS;YACnBgD,QAAQ,EAAE,KAAK;YACfC,KAAK,GAAAC,mBAAA,GAAE1D,YAAY,CAACG,IAAI,cAAAuD,mBAAA,gBAAAA,mBAAA,GAAjBA,mBAAA,CAAmBvD,IAAI,cAAAuD,mBAAA,uBAAvBA,mBAAA,CAAyBD;UAClC,CAAC,CAAC;UACF;QACF;MAEF,CAAC,MAAM;QAAA,IAAAE,mBAAA,EAAAC,oBAAA;QACL,IAAI,EAAAD,mBAAA,GAAA3D,YAAY,CAACG,IAAI,cAAAwD,mBAAA,gBAAAA,mBAAA,GAAjBA,mBAAA,CAAmBxD,IAAI,cAAAwD,mBAAA,uBAAvBA,mBAAA,CAAyBf,IAAI,MAAKC,8BAAY,CAACC,MAAM,IAAI,EAAAc,oBAAA,GAAA5D,YAAY,CAACG,IAAI,cAAAyD,oBAAA,gBAAAA,oBAAA,GAAjBA,oBAAA,CAAmBzD,IAAI,cAAAyD,oBAAA,uBAAvBA,oBAAA,CAAyBb,KAAK,MAAK,UAAU,EAAE;UAAA,IAAAc,oBAAA;UAC1GZ,mBAAgB,CAACC,QAAQ,CAACC,gBAAO,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;YACrDC,QAAQ,EAAE/C,SAAS;YACnBgD,QAAQ,EAAE,KAAK;YACfC,KAAK,GAAAI,oBAAA,GAAE7D,YAAY,CAACG,IAAI,cAAA0D,oBAAA,gBAAAA,oBAAA,GAAjBA,oBAAA,CAAmB1D,IAAI,cAAA0D,oBAAA,uBAAvBA,oBAAA,CAAyBJ;UAClC,CAAC,CAAC;UACF;QACF;MACF;MAEA;MACE;MACA,EAAA7B,oBAAA,GAAA5B,YAAY,CAACG,IAAI,cAAAyB,oBAAA,uBAAjBA,oBAAA,CAAmBgB,IAAI,MAAKC,8BAAY,CAACiB,MAAM;MAC/C;MACA,EAAAjC,oBAAA,GAAA7B,YAAY,CAACG,IAAI,cAAA0B,oBAAA,uBAAjBA,oBAAA,CAAmBkB,KAAK,MAAK,UAAU,EACvC;QAAA,IAAAgB,oBAAA;QACA;QACA;QACAhB,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACC,cAAc,GAAAH,oBAAA,GAAE/D,YAAY,CAACG,IAAI,cAAA4D,oBAAA,uBAAjBA,oBAAA,CAAmBN,KAAK,CAAC;QAC7D;MACF;MAEA;MACE;MACA,EAAA3B,oBAAA,GAAA9B,YAAY,CAACG,IAAI,cAAA2B,oBAAA,uBAAjBA,oBAAA,CAAmBc,IAAI,MAAK,UAAU;MACtC;MACA,EAAAb,oBAAA,GAAA/B,YAAY,CAACG,IAAI,cAAA4B,oBAAA,uBAAjBA,oBAAA,CAAmBgB,KAAK,MAAK,kBAAkB,EAC/C;QACA;QACA;QACAA,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACE,kBAAkB,EAAEnE,YAAY,CAACG,IAAI,CAAC;QAE1D;MACF;;MAEA;MACA,IAAIoC,aAAK,EAAE;QACT,IAAIvC,YAAY,CAACoE,UAAU,IAAI,KAAK,EAAE;UAAA,IAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA;UACpC,IAAI,EAAAH,oBAAA,GAAArE,YAAY,CAACG,IAAI,cAAAkE,oBAAA,uBAAjBA,oBAAA,CAAmBzB,IAAI,MAAK,SAAS,IAAI,EAAA0B,oBAAA,GAAAtE,YAAY,CAACG,IAAI,cAAAmE,oBAAA,uBAAjBA,oBAAA,CAAmBvB,KAAK,MAAK,SAAS,IACjF,EAAAwB,oBAAA,GAAAvE,YAAY,CAACG,IAAI,cAAAoE,oBAAA,gBAAAA,oBAAA,GAAjBA,oBAAA,CAAmBpE,IAAI,cAAAoE,oBAAA,uBAAvBA,oBAAA,CAAyB3B,IAAI,MAAK,SAAS,IAAI,EAAA4B,oBAAA,GAAAxE,YAAY,CAACG,IAAI,cAAAqE,oBAAA,gBAAAA,oBAAA,GAAjBA,oBAAA,CAAmBrE,IAAI,cAAAqE,oBAAA,uBAAvBA,oBAAA,CAAyBzB,KAAK,MAAK,SAAS,EAC3F;YACAA,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACQ,8BAA8B,EAAEzE,YAAY,CAACG,IAAI,CAAC;YACtE;UACF;QACF,CAAC,MAAM;UAAA,IAAAuE,oBAAA,EAAAC,oBAAA;UACL,IAAI,EAAAD,oBAAA,GAAA1E,YAAY,CAACG,IAAI,cAAAuE,oBAAA,gBAAAA,oBAAA,GAAjBA,oBAAA,CAAmBvE,IAAI,cAAAuE,oBAAA,uBAAvBA,oBAAA,CAAyB9B,IAAI,MAAK,SAAS,IAAI,EAAA+B,oBAAA,GAAA3E,YAAY,CAACG,IAAI,cAAAwE,oBAAA,gBAAAA,oBAAA,GAAjBA,oBAAA,CAAmBxE,IAAI,cAAAwE,oBAAA,uBAAvBA,oBAAA,CAAyB5B,KAAK,MAAK,SAAS,EAAE;YAC/FA,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACQ,8BAA8B,EAAEzE,YAAY,CAACG,IAAI,CAAC;YACtE;UACF;QACF;MACF,CAAC,MACI;QAAA,IAAAyE,oBAAA,EAAAC,oBAAA;QACH,IAAI,EAAAD,oBAAA,GAAA5E,YAAY,CAACG,IAAI,cAAAyE,oBAAA,uBAAjBA,oBAAA,CAAmBhC,IAAI,MAAK,SAAS,IAAI,EAAAiC,oBAAA,GAAA7E,YAAY,CAACG,IAAI,cAAA0E,oBAAA,uBAAjBA,oBAAA,CAAmB9B,KAAK,MAAK,SAAS,EAAE;UACnFA,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACQ,8BAA8B,EAAEzE,YAAY,CAACG,IAAI,CAAC;UACtE;QACF;MACF;MAEA;MACE;MACA,EAAA6B,oBAAA,GAAAhC,YAAY,CAACG,IAAI,cAAA6B,oBAAA,uBAAjBA,oBAAA,CAAmBY,IAAI,MAAKC,8BAAY,CAACiC,aAAa;MACtD;MACA,EAAA7C,oBAAA,GAAAjC,YAAY,CAACG,IAAI,cAAA8B,oBAAA,uBAAjBA,oBAAA,CAAmBc,KAAK,MAAK,UAAU,EACvC;QAAA,IAAAgC,oBAAA;QACA;QACAhC,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACC,cAAc,GAAAa,oBAAA,GAAE/E,YAAY,CAACG,IAAI,cAAA4E,oBAAA,uBAAjBA,oBAAA,CAAmBtB,KAAK,CAAC;QAC7D;MACF;MAEA;MACE;MACA,EAAAvB,oBAAA,GAAAlC,YAAY,CAACG,IAAI,cAAA+B,oBAAA,uBAAjBA,oBAAA,CAAmBU,IAAI,MAAK,QAAQ;MACpC;MACA,EAAAT,oBAAA,GAAAnC,YAAY,CAACG,IAAI,cAAAgC,oBAAA,uBAAjBA,oBAAA,CAAmBY,KAAK,MAAK,cAAc,EAC3C;QACAA,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACe,eAAe,EAAEhF,YAAY,CAACG,IAAI,CAAC;QACvD;MACF;MAEA,IAAIoC,aAAK,EAAE;QACT,IAAIvC,YAAY,CAACoE,UAAU,IAAI,KAAK,EAAE;UACpC,IAAIpE,YAAY,CAACG,IAAI,CAACyC,IAAI,KAAK,MAAM,IAAI5C,YAAY,CAACG,IAAI,CAAC4C,KAAK,KAAK,SAAS,EAAE;YAC9EA,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACgB,gBAAgB,EAAEjF,YAAY,CAACG,IAAI,CAACA,IAAI,CAAC;YAC7D;UACF;QACF,CAAC,MACI;UAAA,IAAA+E,oBAAA,EAAAC,oBAAA;UACH,IAAI,EAAAD,oBAAA,GAAAlF,YAAY,CAACG,IAAI,cAAA+E,oBAAA,uBAAjBA,oBAAA,CAAmB/E,IAAI,CAACyC,IAAI,MAAK,MAAM,IAAI,EAAAuC,oBAAA,GAAAnF,YAAY,CAACG,IAAI,cAAAgF,oBAAA,uBAAjBA,oBAAA,CAAmBhF,IAAI,CAAC4C,KAAK,MAAK,SAAS,EAAE;YAAA,IAAAqC,oBAAA;YAC1FrC,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACgB,gBAAgB,GAAAG,oBAAA,GAAEpF,YAAY,CAACG,IAAI,cAAAiF,oBAAA,uBAAjBA,oBAAA,CAAmBjF,IAAI,CAAC;YAC9D;UACF;QACF;MACF,CAAC,MAAM;QAAA,IAAAkF,oBAAA,EAAAC,oBAAA;QACL,IAAI,EAAAD,oBAAA,GAAArF,YAAY,CAACG,IAAI,cAAAkF,oBAAA,uBAAjBA,oBAAA,CAAmBlF,IAAI,CAACyC,IAAI,MAAK,MAAM,IAAI,EAAA0C,oBAAA,GAAAtF,YAAY,CAACG,IAAI,cAAAmF,oBAAA,uBAAjBA,oBAAA,CAAmBnF,IAAI,CAAC4C,KAAK,MAAK,SAAS,EAAE;UAAA,IAAAwC,oBAAA;UAC1FxC,UAAK,CAACiB,IAAI,CAACC,aAAQ,CAACgB,gBAAgB,GAAAM,oBAAA,GAAEvF,YAAY,CAACG,IAAI,cAAAoF,oBAAA,uBAAjBA,oBAAA,CAAmBpF,IAAI,CAAC;UAC9D;QACF;MACF;MAEA;MACE;MACA,EAAAiC,oBAAA,GAAApC,YAAY,CAACG,IAAI,cAAAiC,oBAAA,uBAAjBA,oBAAA,CAAmBoD,YAAY,MAAK3C,8BAAY,CAACiB,MAAM,IACvD;MAAA,CAAAzB,sBAAA,GACArC,YAAY,CAACM,QAAQ,cAAA+B,sBAAA,eAArBA,sBAAA,CAAuBoD,IAAI,EAE3B;MACF;MACA;MACA;MACA;MACA;MACA;MACA;MACA,MAAMC,WAAW,GAAG,MAAMC,qBAAY,CAACC,OAAO,CAACC,2BAAgB,CAAC;MAChE,IAAIH,WAAW,KAAKI,kBAAW,CAACC,OAAO,EAAE;MACzC,IAAI/F,YAAY,CAACoE,UAAU,IAAI7B,aAAK,EAAE;QACpC;QACA;MAAA;MAEF,MAAMnC,UAAU,GAAGL,aAAa,CAACC,YAAY,CAAC;MAC9C,IAAII,UAAU,EAAE;QACd6C,mBAAgB,CAACC,QAAQ,CAACC,gBAAO,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;UACrDC,QAAQ,EAAE;YACRyC,EAAE,EAAE5F;UACN,CAAC;UACDoD,QAAQ,EAAE;QACZ,CAAC,CAAC;MACJ;IACF,CAAC;IAEDyC,WAAW,EAAE;MACXC,KAAK,EAAE,IAAI;MACXC,KAAK,EAAE,IAAI;MACXC,KAAK,EAAE;IACT,CAAC;IAEDC,sBAAsB,EAAE,IAAI;IAC5BC,kBAAkB,EAAE;EACtB,CAAC,CAAC;AACJ,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAA1G,OAAA,GAEUW,kBAAkB","ignoreList":[]}