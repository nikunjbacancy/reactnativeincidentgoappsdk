{"version":3,"names":["_assets","require","_react","_interopRequireWildcard","_reactIntl","_reactNative","_MyPhotoUpload","_interopRequireDefault","_messages","_styles","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","PortraitMessageType","exports","ImageUpload","portraitUrl","onUpload","onDelete","actionInfoType","formatMessage","useIntl","showLoadInfo","setShowLoadInfo","useState","imageDisplay","uri","Date","getTime","images","noUserImage","onPhotoSelect","avatar","path","onDeletePress","infoText","UploadSuccess","messages","uploadSuccess","UploadFail","uploadFailure","DeleteSuccess","deleteSuccess","DeleteFail","deleteFailure","useEffect","timeout","setTimeout","clearTimeout","createElement","UserPortraitContainer","ImgDescriptionText","info","UploadInfoContainer","UploadInfo","ImageUploadContainer","onResizedImageUri","alertTitle","alertMessage","Image","style","paddingVertical","width","height","borderRadius","resizeMode","source","key","DeletePhoto","icTrash","onPress","_default"],"sources":["index.tsx"],"sourcesContent":["import { images } from '../../assets';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { Image } from 'react-native';\n// import MyPhotoUpload, {MyImageResizerResponse} from 'MyPhotoUpload';\nimport MyPhotoUpload from '../PhotoUpload/MyPhotoUpload';\n\n\n\nimport messages from './messages';\nimport {\n  DeletePhoto,\n  ImageUploadContainer,\n  ImgDescriptionText,\n  UploadInfo,\n  UploadInfoContainer,\n  UserPortraitContainer,\n} from './styles';\n\nexport enum PortraitMessageType {\n  UploadSuccess = 1,\n  UploadFail,\n  DeleteSuccess,\n  DeleteFail,\n}\n\ninterface Props {\n  portraitUrl?: string;\n  onUpload: any;\n  onDelete?: any;\n  actionInfoType: PortraitMessageType | undefined;\n}\n\nconst ImageUpload: FC<Props> = ({\n  portraitUrl,\n  onUpload,\n  onDelete,\n  actionInfoType,\n}) => {\n  const { formatMessage } = useIntl();\n  const [showLoadInfo, setShowLoadInfo] = useState(false);\n\n  const imageDisplay = () => {\n    // //(\"-portraitUrl->\",portraitUrl)\n    return portraitUrl\n      ? { uri: `${portraitUrl}?time=${new Date().getTime()}` }\n      : images.noUserImage();\n  };\n\n  const onPhotoSelect = (avatar: any) => {\n    if (avatar) {\n      // //(\"selected photo-->\",avatar.path)\n      onUpload(avatar.path);\n    }\n  };\n\n  const onDeletePress = () => {\n    onDelete();\n  };\n\n  const infoText = () => {\n    if (actionInfoType) {\n      switch (actionInfoType) {\n        case PortraitMessageType.UploadSuccess:\n          return formatMessage(messages.uploadSuccess);\n        case PortraitMessageType.UploadFail:\n          return formatMessage(messages.uploadFailure);\n        case PortraitMessageType.DeleteSuccess:\n          return formatMessage(messages.deleteSuccess);\n        case PortraitMessageType.DeleteFail:\n          return formatMessage(messages.deleteFailure);\n        default:\n          setShowLoadInfo(false);\n          break;\n      }\n    }\n    return null;\n  };\n\n  useEffect(() => {\n    let timeout: any;\n    if (actionInfoType) {\n      setShowLoadInfo(true);\n      timeout = setTimeout(() => {\n        setShowLoadInfo(false);\n      }, 3500);\n    }\n    return () => {\n      setShowLoadInfo(false);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    };\n  }, [actionInfoType]);\n\n  return (\n    <UserPortraitContainer>\n      <ImgDescriptionText>{formatMessage(messages.info)}</ImgDescriptionText>\n      {showLoadInfo && (\n        <UploadInfoContainer>\n          <UploadInfo>{infoText()}</UploadInfo>\n        </UploadInfoContainer>\n      )}\n      <ImageUploadContainer>\n        <MyPhotoUpload \n        onResizedImageUri={onPhotoSelect}\n        alertTitle={formatMessage(messages.alertTitle)}\n        alertMessage={formatMessage(messages.alertMessage)}\n        >\n          <Image\n            style={{\n              paddingVertical: 30,\n              width: 200,\n              height: 200,\n              borderRadius: 0,\n            }}\n            resizeMode=\"cover\"\n            source={imageDisplay()}\n            key={new Date().getTime()}\n          />\n        </MyPhotoUpload>\n      </ImageUploadContainer>\n      {onDelete && (\n        <DeletePhoto source={images.icTrash()} onPress={onDeletePress} />\n      )}\n    </UserPortraitContainer>\n  );\n};\n\nexport default ImageUpload;\n"],"mappings":"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","ignoreList":[]}