{"version":3,"names":["_assets","require","_RecordTimer","_interopRequireDefault","_actions","_react","_interopRequireWildcard","_reactIntl","_reactNative","_reactNativeLinearGradient","_reactNativeProgress","_hooks","_lodash","_styled","_messages","_types","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","VideoCard","id","videoPages","currentPage","duration","thumbnailUrl","text","navigateClick","formatMessage","useIntl","setTipCameraModeAction","useAction","setTipCameraMode","setTipCameraVideoIndexAction","setTipCameraVideoIndex","handleCardPress","useCallback","index","getFlattenIndex","TipCameraMode","video","createElement","TextContainer","onPress","GradientCountContainer","LinkText","messages","back","Container","disabled","GradientContainer","BackgroundImage","source","uri","Loading","color","colors","white","PlayIcon","images","icPlay","StyledRecordTimer","recordedTime","_default","exports","styled","TouchableOpacity","LinearGradient","attrs","theme","videoCardOverlay","ImageBackground","imageStyle","borderRadius","Image","RecordTimer","Text","fonts","defaultFamily","light","CircleSnail"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { colors, images } from '../../../assets';\nimport RecordTimer from '../../../components/RecordTimer';\nimport {\n  setTipCameraMode,\n  setTipCameraVideoIndex,\n} from '../../../containers/app/actions';\nimport { ObjectId } from 'incident-code-core';\nimport React, { FC, useCallback } from 'react';\nimport { useIntl } from 'react-intl';\nimport { ImageBackground } from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport { CircleSnail } from 'react-native-progress';\nimport { IncidentVideoInfo } from 'types';\nimport { useAction } from '../../../utils/hooks';\nimport { getFlattenIndex } from '../../../utils/lodash';\nimport styled from '../../../utils/styled';\n\nimport messages from '../messages';\nimport { TipCameraMode } from '../types';\n\ninterface Props {\n  id: string | ObjectId | undefined;\n  videoPages: IncidentVideoInfo[][];\n  currentPage: number;\n  duration?: number;\n  thumbnailUrl?: string;\n  text?: string;\n  navigateClick(): void;\n}\n\nconst VideoCard: FC<Props> = ({\n  id,\n  videoPages,\n  currentPage,\n  duration,\n  thumbnailUrl,\n  text,\n  navigateClick,\n}) => {\n  const { formatMessage } = useIntl();\n\n  const setTipCameraModeAction = useAction(setTipCameraMode);\n  const setTipCameraVideoIndexAction = useAction(setTipCameraVideoIndex);\n\n  const handleCardPress = useCallback(() => {\n    const index = getFlattenIndex({ id })(videoPages) - currentPage;\n    setTipCameraModeAction(TipCameraMode.video);\n    setTipCameraVideoIndexAction(index);\n  }, [id, videoPages, currentPage]);\n  if (text) {\n    return (\n      <TextContainer onPress={navigateClick}>\n        <GradientCountContainer>\n          <LinkText>\n            {text === 'back' ? formatMessage(messages.back) : text}\n          </LinkText>\n        </GradientCountContainer>\n      </TextContainer>\n    );\n  }\n  return (\n    <Container disabled={!thumbnailUrl} onPress={handleCardPress}>\n      <GradientContainer>\n        <BackgroundImage source={{ uri: thumbnailUrl }}>\n          {!thumbnailUrl && <Loading color={colors.white} />}\n          {thumbnailUrl && <PlayIcon source={images.icPlay()} />}\n          <StyledRecordTimer recordedTime={duration} />\n        </BackgroundImage>\n      </GradientContainer>\n    </Container>\n  );\n};\n\nexport default VideoCard;\n\nconst TextContainer = styled.TouchableOpacity`\n  width: 63px;\n`;\n\nconst Container = styled.TouchableOpacity`\n  width: 63px;\n  margin-right: 6px;\n`;\n\nconst GradientCountContainer = styled(LinearGradient).attrs(({ theme }) => ({\n  colors: theme.colors.videoCardOverlay,\n}))`\n  flex: 1;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst GradientContainer = styled(LinearGradient).attrs(({ theme }) => ({\n  colors: theme.colors.videoCardOverlay,\n}))`\n  border-radius: 8px;\n  width: 63px;\n  margin-right: 6px;\n`;\n\nconst BackgroundImage = styled(ImageBackground).attrs({\n  imageStyle: { borderRadius: 8 },\n})`\n  min-width: 100%;\n  min-height: 100%;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`;\n\nconst PlayIcon = styled.Image`\n  margin-top: -20px;\n`;\n\nconst StyledRecordTimer = styled(RecordTimer)`\n  bottom: 3px;\n`;\n\nconst LinkText = styled.Text`\n  font-family: ${({ theme }) => theme.fonts.defaultFamily};\n  font-size: 19px;\n  line-height: 28px;\n  letter-spacing: -0.4px;\n  color: ${({ theme }) => theme.colors.light};\n`;\n\nconst Loading = styled(CircleSnail)`\n  margin-bottom: 15px;\n`;\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AAKA,IAAAI,MAAA,GAAAC,uBAAA,CAAAL,OAAA;AACA,IAAAM,UAAA,GAAAN,OAAA;AACA,IAAAO,YAAA,GAAAP,OAAA;AACA,IAAAQ,0BAAA,GAAAN,sBAAA,CAAAF,OAAA;AACA,IAAAS,oBAAA,GAAAT,OAAA;AAEA,IAAAU,MAAA,GAAAV,OAAA;AACA,IAAAW,OAAA,GAAAX,OAAA;AACA,IAAAY,OAAA,GAAAV,sBAAA,CAAAF,OAAA;AAEA,IAAAa,SAAA,GAAAX,sBAAA,CAAAF,OAAA;AACA,IAAAc,MAAA,GAAAd,OAAA;AAAyC,SAAAe,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAX,wBAAAW,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAK,OAAA,EAAAL,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA,SAAAtB,uBAAAc,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAI,UAAA,GAAAJ,CAAA,KAAAK,OAAA,EAAAL,CAAA;AAnBzC;;AA+BA,MAAMmB,SAAoB,GAAGA,CAAC;EAC5BC,EAAE;EACFC,UAAU;EACVC,WAAW;EACXC,QAAQ;EACRC,YAAY;EACZC,IAAI;EACJC;AACF,CAAC,KAAK;EACJ,MAAM;IAAEC;EAAc,CAAC,GAAG,IAAAC,kBAAO,EAAC,CAAC;EAEnC,MAAMC,sBAAsB,GAAG,IAAAC,gBAAS,EAACC,yBAAgB,CAAC;EAC1D,MAAMC,4BAA4B,GAAG,IAAAF,gBAAS,EAACG,+BAAsB,CAAC;EAEtE,MAAMC,eAAe,GAAG,IAAAC,kBAAW,EAAC,MAAM;IACxC,MAAMC,KAAK,GAAG,IAAAC,uBAAe,EAAC;MAAEjB;IAAG,CAAC,CAAC,CAACC,UAAU,CAAC,GAAGC,WAAW;IAC/DO,sBAAsB,CAACS,oBAAa,CAACC,KAAK,CAAC;IAC3CP,4BAA4B,CAACI,KAAK,CAAC;EACrC,CAAC,EAAE,CAAChB,EAAE,EAAEC,UAAU,EAAEC,WAAW,CAAC,CAAC;EACjC,IAAIG,IAAI,EAAE;IACR,oBACErC,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACC,aAAa;MAACC,OAAO,EAAEhB;IAAc,gBACpCtC,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACG,sBAAsB,qBACrBvD,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACI,QAAQ,QACNnB,IAAI,KAAK,MAAM,GAAGE,aAAa,CAACkB,iBAAQ,CAACC,IAAI,CAAC,GAAGrB,IAC1C,CACY,CACX,CAAC;EAEpB;EACA,oBACErC,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACO,SAAS;IAACC,QAAQ,EAAE,CAACxB,YAAa;IAACkB,OAAO,EAAER;EAAgB,gBAC3D9C,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACS,iBAAiB,qBAChB7D,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACU,eAAe;IAACC,MAAM,EAAE;MAAEC,GAAG,EAAE5B;IAAa;EAAE,GAC5C,CAACA,YAAY,iBAAIpC,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACa,OAAO;IAACC,KAAK,EAAEC,cAAM,CAACC;EAAM,CAAE,CAAC,EACjDhC,YAAY,iBAAIpC,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACiB,QAAQ;IAACN,MAAM,EAAEO,cAAM,CAACC,MAAM,CAAC;EAAE,CAAE,CAAC,eACtDvE,MAAA,CAAAiB,OAAA,CAAAmC,aAAA,CAACoB,iBAAiB;IAACC,YAAY,EAAEtC;EAAS,CAAE,CAC7B,CACA,CACV,CAAC;AAEhB,CAAC;AAAC,IAAAuC,QAAA,GAAAC,OAAA,CAAA1D,OAAA,GAEac,SAAS;AAExB,MAAMsB,aAAa,GAAGuB,eAAM,CAACC,gBAAgB;AAC7C;AACA,CAAC;AAED,MAAMlB,SAAS,GAAGiB,eAAM,CAACC,gBAAgB;AACzC;AACA;AACA,CAAC;AAED,MAAMtB,sBAAsB,GAAG,IAAAqB,eAAM,EAACE,kCAAc,CAAC,CAACC,KAAK,CAAC,CAAC;EAAEC;AAAM,CAAC,MAAM;EAC1Eb,MAAM,EAAEa,KAAK,CAACb,MAAM,CAACc;AACvB,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMpB,iBAAiB,GAAG,IAAAe,eAAM,EAACE,kCAAc,CAAC,CAACC,KAAK,CAAC,CAAC;EAAEC;AAAM,CAAC,MAAM;EACrEb,MAAM,EAAEa,KAAK,CAACb,MAAM,CAACc;AACvB,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA,CAAC;AAED,MAAMnB,eAAe,GAAG,IAAAc,eAAM,EAACM,4BAAe,CAAC,CAACH,KAAK,CAAC;EACpDI,UAAU,EAAE;IAAEC,YAAY,EAAE;EAAE;AAChC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMf,QAAQ,GAAGO,eAAM,CAACS,KAAK;AAC7B;AACA,CAAC;AAED,MAAMb,iBAAiB,GAAG,IAAAI,eAAM,EAACU,oBAAW,CAAC;AAC7C;AACA,CAAC;AAED,MAAM9B,QAAQ,GAAGoB,eAAM,CAACW,IAAI;AAC5B,iBAAiB,CAAC;EAAEP;AAAM,CAAC,KAAKA,KAAK,CAACQ,KAAK,CAACC,aAAa;AACzD;AACA;AACA;AACA,WAAW,CAAC;EAAET;AAAM,CAAC,KAAKA,KAAK,CAACb,MAAM,CAACuB,KAAK;AAC5C,CAAC;AAED,MAAMzB,OAAO,GAAG,IAAAW,eAAM,EAACe,gCAAW,CAAC;AACnC;AACA,CAAC","ignoreList":[]}