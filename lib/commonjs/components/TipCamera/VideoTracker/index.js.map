{"version":3,"names":["_assets","require","_map","_interopRequireDefault","_react","_interopRequireWildcard","_reactNativeLinearGradient","_styled","_constants","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","VideoTracker","trackerY","videoIndex","videos","onVideoSelected","listContainerRef","useRef","useEffect","_listContainerRef$cur","current","scrollTo","x","THUMBNAIL_WIDTH","THUMBNAIL_MARGIN_RIGHT","y","renderImage","video","index","_video$id","createElement","ThumbnailContainer","key","id","toString","onPress","width","marginRight","Thumbnail","source","uri","thumbnailUrl","renderTracker","TrackerContainer","left","TRACKER_WIDTH","TrackerThumbOverlay","TrackerImage","images","icSliderTrack","Container","ListContainer","ref","showsVerticalScrollIndicator","horizontal","map","styled","View","ScrollView","LinearGradient","attrs","theme","colors","trackThumbOverlay","Image","TouchableOpacity","_default","exports","memo"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { images } from '../../../assets';\nimport { IncidentVideo } from 'incident-code-core';\nimport map from 'lodash/map';\nimport React, { FC, memo, useEffect, useRef } from 'react';\nimport { ScrollView } from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport styled from '../../../utils/styled';\n\nimport {\n  THUMBNAIL_MARGIN_RIGHT,\n  THUMBNAIL_WIDTH,\n  TRACKER_WIDTH,\n} from '../constants';\n\ntype Props = {\n  trackerY: number;\n  videoIndex: number;\n  videos: IncidentVideo[];\n  onVideoSelected: (index: number) => void;\n};\n\nconst VideoTracker: FC<Props> = ({\n  trackerY,\n  videoIndex,\n  videos,\n  onVideoSelected,\n}) => {\n  const listContainerRef = useRef<ScrollView | null>(null);\n\n  useEffect(() => {\n    listContainerRef.current?.scrollTo({\n      x: (THUMBNAIL_WIDTH + THUMBNAIL_MARGIN_RIGHT) * videoIndex,\n      y: 0,\n    });\n  }, [videoIndex]);\n\n  const renderImage = (video: IncidentVideo, index: number) => (\n    <ThumbnailContainer\n      key={video.id?.toString()}\n      onPress={() => onVideoSelected(index)}\n      width={THUMBNAIL_WIDTH}\n      marginRight={THUMBNAIL_MARGIN_RIGHT}\n    >\n      <Thumbnail source={{ uri: video.thumbnailUrl }} width={THUMBNAIL_WIDTH} />\n    </ThumbnailContainer>\n  );\n\n  const renderTracker = (): React.ReactElement => (\n    <TrackerContainer left={trackerY} width={TRACKER_WIDTH}>\n      <TrackerThumbOverlay>\n        <TrackerImage source={images.icSliderTrack()} />\n      </TrackerThumbOverlay>\n    </TrackerContainer>\n  );\n\n  return (\n    <Container>\n      <ListContainer\n        ref={() => listContainerRef}\n        showsVerticalScrollIndicator={false}\n        horizontal\n      >\n        {map(videos, renderImage)}\n        {renderTracker()}\n      </ListContainer>\n    </Container>\n  );\n};\n\nconst Container = styled.View`\n  position: absolute;\n  left: 20px;\n  right: 20px;\n  bottom: 20px;\n  height: 90px;\n  justify-content: space-between;\n`;\n\nconst ListContainer = styled.ScrollView`\n  position: relative;\n  height: 90px;\n  width: 100%;\n`;\n\nconst TrackerContainer = styled.View<{ left: number; width: number }>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ${({ left }) => left || 0}px;\n  width: ${({ width }) => width || 16}px;\n  background-color: rgba(0, 0, 0, 0.4);\n`;\n\nconst TrackerThumbOverlay = styled(LinearGradient).attrs(({ theme }) => ({\n  colors: theme.colors.trackThumbOverlay,\n}))`\n  flex: 1;\n`;\n\nconst TrackerImage = styled.Image`\n  position: absolute;\n  top: 49%;\n  left: -32px;\n  width: 80px;\n  height: 3px;\n  z-index: 10000;\n  transform: rotate(90deg);\n`;\n\nconst ThumbnailContainer = styled.TouchableOpacity<{\n  width: number;\n  marginRight: number;\n}>`\n  width: ${({ width }) => width || 63}px;\n  height: 90px;\n  border-radius: 8px;\n  margin-right: ${({ marginRight }) => marginRight || 6}px;\n  overflow: hidden;\n`;\n\nconst Thumbnail = styled.Image<{ width: number }>`\n  width: ${({ width }) => width || 78}px;\n  height: 90px;\n  resize-mode: cover;\n`;\n\nexport default memo(VideoTracker);\n"],"mappings":"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","ignoreList":[]}