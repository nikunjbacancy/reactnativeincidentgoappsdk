{"version":3,"names":["_assets","require","_isEqual","_interopRequireDefault","_react","_interopRequireWildcard","_reactNative","_styled","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ACTION_TIMER","COLORS","colors","red","areEqual","prevProps","nextProps","isEqual","PanicButton","text","onPress","onFill","isPanicMode","textStyle","style","withIcon","pressAction","Animated","Value","buttonWidth","setButtonWidth","useState","buttonHeight","setButtonHeight","filledRef","useRef","useEffect","current","timing","duration","toValue","useNativeDriver","start","handlePressIn","useCallback","callback","finished","handlePressOut","getButtonWidthLayout","event","nativeEvent","layout","width","height","getProgressStyles","interpolate","inputRange","outputRange","backgroundColor","createElement","TouchableWithoutFeedback","disabled","onPressIn","onPressOut","Button","onLayout","BackgroundFill","Icon","source","images","siren","Text","styled","View","theme","darkRed","Image","light","fonts","defaultFamily","normalSize","_default","exports","memo"],"sources":["index.tsx"],"sourcesContent":["import { colors, images } from '../../assets';\nimport isEqual from 'lodash/isEqual';\nimport React, {\n  FC,\n  memo,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  Animated,\n  StyleProp,\n  TextStyle,\n  TouchableWithoutFeedback,\n  ViewStyle,\n} from 'react-native';\nimport styled from '../../utils/styled';\n\nconst ACTION_TIMER = 2000;\nconst COLORS = [colors.red, colors.red];\n\ninterface Props {\n  text: string;\n  onFill(): void;\n  onPress(): void;\n  isPanicMode: boolean;\n  textStyle?: StyleProp<TextStyle>;\n  style?: StyleProp<ViewStyle>;\n  withIcon?: boolean;\n}\n\nconst areEqual = (prevProps: any, nextProps: any) => {\n  return isEqual(prevProps, nextProps);\n};\n\nconst PanicButton: FC<Props> = ({\n  text,\n  onPress,\n  onFill,\n  isPanicMode,\n  textStyle,\n  style,\n  withIcon,\n}) => {\n  const pressAction = new Animated.Value(0);\n  const [buttonWidth, setButtonWidth] = useState(0);\n  const [buttonHeight, setButtonHeight] = useState(0);\n  const filledRef = useRef(false);\n\n  useEffect(() => {\n    if (!isPanicMode && filledRef.current) {\n      filledRef.current = false;\n      Animated.timing(pressAction, {\n        duration: ACTION_TIMER / 10,\n        toValue: 0,\n        useNativeDriver:false\n      }).start();\n    }\n  }, [filledRef.current, pressAction, isPanicMode]);\n\n  const handlePressIn = useCallback(() => {\n    onPress();\n    Animated.timing(pressAction, {\n      duration: ACTION_TIMER,\n      toValue: 1,\n      useNativeDriver:false\n    }).start(callback => {\n      if (callback.finished) {\n        filledRef.current = true;\n        onFill();\n      }\n    });\n  }, [Animated, pressAction, onFill]);\n\n  const handlePressOut = useCallback(() => {\n    if (!filledRef.current) {\n      Animated.timing(pressAction, {\n        duration: ACTION_TIMER / 10,\n        toValue: 0,\n        useNativeDriver:false\n      }).start();\n    }\n  }, [Animated, pressAction]);\n\n  const getButtonWidthLayout = useCallback(event => {\n    setButtonWidth(event.nativeEvent.layout.width);\n    setButtonHeight(event.nativeEvent.layout.height);\n  }, []);\n\n  const getProgressStyles = useCallback(() => {\n    const width = pressAction.interpolate({\n      inputRange: [0, 1],\n      outputRange: [0, buttonWidth],\n    });\n    const backgroundColor = pressAction.interpolate({\n      inputRange: [0, 1],\n      outputRange: COLORS,\n    });\n    return {\n      width,\n      height: buttonHeight,\n      backgroundColor,\n    };\n  }, [pressAction, buttonWidth]);\n  return (\n    <TouchableWithoutFeedback\n      disabled={isPanicMode}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n    >\n      <Button onLayout={getButtonWidthLayout} style={style}>\n        <BackgroundFill style={getProgressStyles()} />\n        {withIcon && <Icon source={images.siren()} />}\n        <Text style={textStyle}>{text}</Text>\n      </Button>\n    </TouchableWithoutFeedback>\n\n    \n  );\n};\n\nconst Button = styled.View`\n  background-color: ${({ theme }) => theme.colors.darkRed};\n  width: 47%;\n  height: 40px;\n  border-radius: 6px;\n  justify-content: center;\n  overflow: hidden;\n  \n`;\n\nconst Icon = styled.Image`\n  height: 40%;\n  margin: 5px auto 10px;\n  tint-color: ${({ theme }) => theme.colors.light};\n  align-self: center;\n`;\n\nconst BackgroundFill = styled(Animated.View)`\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\nconst Text = styled.Text`\n  color: ${({ theme }) => theme.colors.light};\n  font-family: ${({ theme }) => theme.fonts.defaultFamily};\n  font-size: ${({ theme }) => theme.fonts.normalSize};\n  text-align: center;\n`;\n\nexport default memo(PanicButton, areEqual);\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAC,uBAAA,CAAAJ,OAAA;AAQA,IAAAK,YAAA,GAAAL,OAAA;AAOA,IAAAM,OAAA,GAAAJ,sBAAA,CAAAF,OAAA;AAAwC,SAAAO,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAJ,wBAAAI,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAK,OAAA,EAAAL,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA,SAAAd,uBAAAM,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAI,UAAA,GAAAJ,CAAA,KAAAK,OAAA,EAAAL,CAAA;AAExC,MAAMmB,YAAY,GAAG,IAAI;AACzB,MAAMC,MAAM,GAAG,CAACC,cAAM,CAACC,GAAG,EAAED,cAAM,CAACC,GAAG,CAAC;AAYvC,MAAMC,QAAQ,GAAGA,CAACC,SAAc,EAAEC,SAAc,KAAK;EACnD,OAAO,IAAAC,gBAAO,EAACF,SAAS,EAAEC,SAAS,CAAC;AACtC,CAAC;AAED,MAAME,WAAsB,GAAGA,CAAC;EAC9BC,IAAI;EACJC,OAAO;EACPC,MAAM;EACNC,WAAW;EACXC,SAAS;EACTC,KAAK;EACLC;AACF,CAAC,KAAK;EACJ,MAAMC,WAAW,GAAG,IAAIC,qBAAQ,CAACC,KAAK,CAAC,CAAC,CAAC;EACzC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG,IAAAC,eAAQ,EAAC,CAAC,CAAC;EACjD,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG,IAAAF,eAAQ,EAAC,CAAC,CAAC;EACnD,MAAMG,SAAS,GAAG,IAAAC,aAAM,EAAC,KAAK,CAAC;EAE/B,IAAAC,gBAAS,EAAC,MAAM;IACd,IAAI,CAACd,WAAW,IAAIY,SAAS,CAACG,OAAO,EAAE;MACrCH,SAAS,CAACG,OAAO,GAAG,KAAK;MACzBV,qBAAQ,CAACW,MAAM,CAACZ,WAAW,EAAE;QAC3Ba,QAAQ,EAAE7B,YAAY,GAAG,EAAE;QAC3B8B,OAAO,EAAE,CAAC;QACVC,eAAe,EAAC;MAClB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,CAACR,SAAS,CAACG,OAAO,EAAEX,WAAW,EAAEJ,WAAW,CAAC,CAAC;EAEjD,MAAMqB,aAAa,GAAG,IAAAC,kBAAW,EAAC,MAAM;IACtCxB,OAAO,CAAC,CAAC;IACTO,qBAAQ,CAACW,MAAM,CAACZ,WAAW,EAAE;MAC3Ba,QAAQ,EAAE7B,YAAY;MACtB8B,OAAO,EAAE,CAAC;MACVC,eAAe,EAAC;IAClB,CAAC,CAAC,CAACC,KAAK,CAACG,QAAQ,IAAI;MACnB,IAAIA,QAAQ,CAACC,QAAQ,EAAE;QACrBZ,SAAS,CAACG,OAAO,GAAG,IAAI;QACxBhB,MAAM,CAAC,CAAC;MACV;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACM,qBAAQ,EAAED,WAAW,EAAEL,MAAM,CAAC,CAAC;EAEnC,MAAM0B,cAAc,GAAG,IAAAH,kBAAW,EAAC,MAAM;IACvC,IAAI,CAACV,SAAS,CAACG,OAAO,EAAE;MACtBV,qBAAQ,CAACW,MAAM,CAACZ,WAAW,EAAE;QAC3Ba,QAAQ,EAAE7B,YAAY,GAAG,EAAE;QAC3B8B,OAAO,EAAE,CAAC;QACVC,eAAe,EAAC;MAClB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,CAACf,qBAAQ,EAAED,WAAW,CAAC,CAAC;EAE3B,MAAMsB,oBAAoB,GAAG,IAAAJ,kBAAW,EAACK,KAAK,IAAI;IAChDnB,cAAc,CAACmB,KAAK,CAACC,WAAW,CAACC,MAAM,CAACC,KAAK,CAAC;IAC9CnB,eAAe,CAACgB,KAAK,CAACC,WAAW,CAACC,MAAM,CAACE,MAAM,CAAC;EAClD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAG,IAAAV,kBAAW,EAAC,MAAM;IAC1C,MAAMQ,KAAK,GAAG1B,WAAW,CAAC6B,WAAW,CAAC;MACpCC,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MAClBC,WAAW,EAAE,CAAC,CAAC,EAAE5B,WAAW;IAC9B,CAAC,CAAC;IACF,MAAM6B,eAAe,GAAGhC,WAAW,CAAC6B,WAAW,CAAC;MAC9CC,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MAClBC,WAAW,EAAE9C;IACf,CAAC,CAAC;IACF,OAAO;MACLyC,KAAK;MACLC,MAAM,EAAErB,YAAY;MACpB0B;IACF,CAAC;EACH,CAAC,EAAE,CAAChC,WAAW,EAAEG,WAAW,CAAC,CAAC;EAC9B,oBACE3C,MAAA,CAAAU,OAAA,CAAA+D,aAAA,CAACvE,YAAA,CAAAwE,wBAAwB;IACvBC,QAAQ,EAAEvC,WAAY;IACtBwC,SAAS,EAAEnB,aAAc;IACzBoB,UAAU,EAAEhB;EAAe,gBAE3B7D,MAAA,CAAAU,OAAA,CAAA+D,aAAA,CAACK,MAAM;IAACC,QAAQ,EAAEjB,oBAAqB;IAACxB,KAAK,EAAEA;EAAM,gBACnDtC,MAAA,CAAAU,OAAA,CAAA+D,aAAA,CAACO,cAAc;IAAC1C,KAAK,EAAE8B,iBAAiB,CAAC;EAAE,CAAE,CAAC,EAC7C7B,QAAQ,iBAAIvC,MAAA,CAAAU,OAAA,CAAA+D,aAAA,CAACQ,IAAI;IAACC,MAAM,EAAEC,cAAM,CAACC,KAAK,CAAC;EAAE,CAAE,CAAC,eAC7CpF,MAAA,CAAAU,OAAA,CAAA+D,aAAA,CAACY,IAAI;IAAC/C,KAAK,EAAED;EAAU,GAAEJ,IAAW,CAC9B,CACgB,CAAC;AAI/B,CAAC;AAED,MAAM6C,MAAM,GAAGQ,eAAM,CAACC,IAAI;AAC1B,sBAAsB,CAAC;EAAEC;AAAM,CAAC,KAAKA,KAAK,CAAC9D,MAAM,CAAC+D,OAAO;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMR,IAAI,GAAGK,eAAM,CAACI,KAAK;AACzB;AACA;AACA,gBAAgB,CAAC;EAAEF;AAAM,CAAC,KAAKA,KAAK,CAAC9D,MAAM,CAACiE,KAAK;AACjD;AACA,CAAC;AAED,MAAMX,cAAc,GAAG,IAAAM,eAAM,EAAC7C,qBAAQ,CAAC8C,IAAI,CAAC;AAC5C;AACA;AACA;AACA,CAAC;AAED,MAAMF,IAAI,GAAGC,eAAM,CAACD,IAAI;AACxB,WAAW,CAAC;EAAEG;AAAM,CAAC,KAAKA,KAAK,CAAC9D,MAAM,CAACiE,KAAK;AAC5C,iBAAiB,CAAC;EAAEH;AAAM,CAAC,KAAKA,KAAK,CAACI,KAAK,CAACC,aAAa;AACzD,eAAe,CAAC;EAAEL;AAAM,CAAC,KAAKA,KAAK,CAACI,KAAK,CAACE,UAAU;AACpD;AACA,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAtF,OAAA,gBAEa,IAAAuF,WAAI,EAACjE,WAAW,EAAEJ,QAAQ,CAAC","ignoreList":[]}