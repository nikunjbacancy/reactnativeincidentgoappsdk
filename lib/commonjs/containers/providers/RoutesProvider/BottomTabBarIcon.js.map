{"version":3,"names":["_api","require","_components","_isEmpty","_interopRequireDefault","_react","_interopRequireWildcard","_notification","_styled","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","BottomTabBarIcon","source","focused","size","showBadge","badges","setBadges","useState","useEffect","getBadges","then","notificationBadges","notificationAdded","event","on","AppEvent","OnNotificationBadge","componentDidUnMount","off","createElement","Fragment","Icon","InactiveIcon","isEmpty","Badge","length","defaultProps","styled","Image","theme","colors","highlight","dark","_default","exports"],"sources":["BottomTabBarIcon.tsx"],"sourcesContent":["import { AppEvent, event } from '../../../api';\nimport { Badge } from '../../../components';\nimport { Id } from 'incident-code-core';\nimport isEmpty from 'lodash/isEmpty';\nimport React, { FC, useEffect, useState } from 'react';\nimport { ImageSourcePropType } from 'react-native';\nimport { getBadges } from '../../../utils/notification';\nimport styled from '../../../utils/styled';\n\ninterface Props {\n  source: ImageSourcePropType;\n  focused?: boolean;\n  size?: number;\n  showBadge?: boolean;\n}\n\nconst BottomTabBarIcon: FC<Props> = ({ source, focused, size, showBadge }) => {\n  const [badges, setBadges] = useState<Id[]>([]);\n  useEffect(() => {\n    if (showBadge) {\n      getBadges().then((notificationBadges: Id[]) => {\n        setBadges(notificationBadges);\n      });\n      const notificationAdded = (notificationBadges: Id[]) => {\n        setBadges(notificationBadges);\n      };\n      event.on(AppEvent.OnNotificationBadge, notificationAdded);\n      return function componentDidUnMount() {\n        event.off(AppEvent.OnNotificationBadge, notificationAdded);\n      };\n    } else {\n      return;\n    }\n  }, [showBadge]);\n  return (\n    <>\n      {focused ? (\n        <Icon source={source} size={size} />\n      ) : (\n        <InactiveIcon source={source} size={size} />\n      )}\n      {showBadge && !isEmpty(badges) && <Badge length={badges.length} />}\n    </>\n  );\n};\n\nBottomTabBarIcon.defaultProps = {\n  size: 28,\n};\n\nconst Icon = styled.Image<Props>`\n  width: ${({ size }) => `${size}px`};\n  height: ${({ size }) => `${size}px`};\n  tint-color: ${({ theme }) => theme.colors.highlight};\n  margin-top: 5px;\n`;\n\nconst InactiveIcon = styled.Image<Props>`\n  width: ${({ size }) => `${size}px`};\n  height: ${({ size }) => `${size}px`};\n  tint-color: ${({ theme }) => theme.colors.dark};\n  margin-top: 5px;\n`;\n\nexport default BottomTabBarIcon;\n"],"mappings":"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","ignoreList":[]}