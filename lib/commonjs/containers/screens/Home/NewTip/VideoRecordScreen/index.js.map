{"version":3,"names":["_components","require","_types","_selectors","_actions","_screens","_interopRequireDefault","_selectors2","_noop","_react","_interopRequireWildcard","_reactIntl","_reactNative","_reactNativePermissions","_reactNavigation","_device","_hooks","_navigation","_permission","_actions2","_selectors3","_types2","_actions3","_selectors4","_actions4","_CancelTipModal","_FastAccessModal","_messages","_selectors5","_styles","_types3","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","PermissionStatus","VideoRecordScreen","isFocused","formatMessage","useIntl","permissionStatus","setPermissionStatus","useState","Checking","incidentVideos","useSelector","makeSelectNewTipIncidentVideos","shouldShowCancelTipModal","makeSelectShouldShowCancelTipModal","shouldShowBottomScreenAction","makeSelectShouldShowBottomScreenAction","userOrganizations","makeSelectUserOrganizations","shouldShowCallModal","makeSelectShouldShowCallModal","requestingOrganizations","makeSelectRequestingOrganizations","shouldShowTipCreatedModal","makeSelectShouldShowTipCreatedModal","tipCreatedData","makeSelectTipCreatedData","screenAction","makeSelectScreenAction","creatingTipWithChat","makeSelectCreatingTipWithChat","uploadingVideo","makeSelectUploadingVideo","createTipMode","makeSelectCreateTipMode","lastActiveTip","makeSelectLastActiveTip","lastTipOrganization","makeSelectLastTipOrganization","shouldShowFastAccessModal","makeSelectShouldShowFastAccessModal","uploadVideoRequestAction","useAction","uploadVideoRequest","addNewTipScreenAction","addScreenAction","getUserOrganizationsAction","getUserOrganizationsRequest","showCancelIncidentModalAction","showCancelIncidentModal","showCallModalAction","showCallModal","hideModalAction","hideCallModal","getIntersectOrganizationsRequestAction","getIntersectOrganizationsRequest","hideTipCreatedModalAction","hideTipCreatedModal","createTipWithChatAction","createTipWithChatRequest","getTipsRequestAction","getTipsRequest","resetStateAction","resetState","getLastActiveTipOrganizationAction","getLastActiveTipOrganization","hideFastAccessModalAction","hideFastAccessModal","showFastAccessModalAction","showFastAccessModal","cameraRef","useRef","useEffect","actionText","messages","continue","cancel","action","loading","tryRequestCameraPermissions","requestCameraPermissions","then","Granted","catch","Blocked","tipStatus","TipStatus","Active","paging","organization","stopCamera","useCallback","_cameraRef$current","current","pausePreview","startCamera","_cameraRef$current2","resumePreview","onRecordFinished","filePath","goToTipDetail","NavigatorService","navigate","Screens","Menu","Tips","TipDetail","incident","showChat","CreateTipMode","Chat","goToLastTipDetail","handleOnRecordStarted","renderCamera","createElement","LoadingIndicator","message","checkingPermissions","TipCameraContainer","TipCamera","isRecordEnabled","length","tipCameraMode","TipCameraMode","camera","ref","isChatDisabled","onRecordStarted","onPhonePress","onChatPress","onOpen","isVisible","hideModal","BlockedPermissionContainer","BlockedPermissionMessage","permissionsBlockedMessage","GradientButton","text","isAndroid","tryAgain","openSettings","onPress","Fragment","StatusBar","barStyle","backgroundColor","SafeAreaContainer","onShow","onHide","onPressYes","CallModal","organizations","ScreenActionModal","title","tipCreatedTitle","organizationName","Message","tipCreatedMessage","AcknowledgmentText","acknowledgment","seeMyTip","onAction","noop","_default","exports","withNavigationFocus"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport {\n  CallModal,\n  GradientButton,\n  LoadingIndicator,\n  SafeAreaContainer,\n  ScreenActionModal,\n  TipCamera,\n} from '../../../../../components';\nimport { TipCameraMode } from '../../../../../components/TipCamera/types';\nimport { makeSelectNewTipIncidentVideos } from '../../../../../containers/app/selectors';\nimport { addScreenAction } from '../../../../../containers/providers/RoutesProvider/actions';\nimport Screens from '../../../../../containers/providers/RoutesProvider/screens';\nimport { makeSelectScreenAction } from '../../../../../containers/providers/RoutesProvider/selectors';\nimport noop from 'lodash/noop';\nimport React, { FC, useCallback, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { StatusBar } from 'react-native';\nimport { RNCamera } from 'react-native-camera';\nimport { openSettings } from 'react-native-permissions';\nimport { withNavigationFocus } from 'react-navigation';\nimport { isAndroid } from '../../../../../utils/device';\nimport { useAction, useSelector } from '../../../../../utils/hooks';\nimport NavigatorService from '../../../../../utils/navigation';\nimport { requestCameraPermissions } from '../../../../../utils/permission';\n\nimport {\n  getTipsRequest,\n  resetState,\n} from '../../../Menu/Tips/MyTipsScreen/actions';\nimport { makeSelectLastActiveTip } from '../../../Menu/Tips/MyTipsScreen/selectors';\nimport { TipStatus } from '../../../Menu/Tips/MyTipsScreen/types';\nimport { getIntersectOrganizationsRequest } from '../SelectOrganizationScreen/actions';\nimport { makeSelectRequestingOrganizations } from '../SelectOrganizationScreen/selectors';\nimport {\n  createTipWithChatRequest,\n  getLastActiveTipOrganization,\n  getUserOrganizationsRequest,\n  hideCallModal,\n  hideFastAccessModal,\n  hideTipCreatedModal,\n  showCallModal,\n  showCancelIncidentModal,\n  showFastAccessModal,\n  uploadVideoRequest,\n} from './actions';\nimport CancelTipModal from './CancelTipModal';\nimport FastAccessModal from './FastAccessModal';\nimport messages from './messages';\nimport {\n  makeSelectCreateTipMode,\n  makeSelectCreatingTipWithChat,\n  makeSelectLastTipOrganization,\n  makeSelectShouldShowBottomScreenAction,\n  makeSelectShouldShowCallModal,\n  makeSelectShouldShowCancelTipModal,\n  makeSelectShouldShowFastAccessModal,\n  makeSelectShouldShowTipCreatedModal,\n  makeSelectTipCreatedData,\n  makeSelectUploadingVideo,\n  makeSelectUserOrganizations,\n} from './selectors';\nimport {\n  AcknowledgmentText,\n  BlockedPermissionContainer,\n  BlockedPermissionMessage,\n  Message,\n  TipCameraContainer,\n} from './styles';\nimport { CreateTipMode } from './types';\n\ninterface Props {\n  isFocused: boolean;\n}\n\nenum PermissionStatus {\n  Checking,\n  Granted,\n  Blocked,\n}\nconst VideoRecordScreen: FC<Props> = ({ isFocused }) => {\n  const { formatMessage } = useIntl();\n\n  const [permissionStatus, setPermissionStatus] = useState(\n    PermissionStatus.Checking,\n  );\n\n  const incidentVideos = useSelector(makeSelectNewTipIncidentVideos());\n  const shouldShowCancelTipModal = useSelector(\n    makeSelectShouldShowCancelTipModal(),\n  );\n  const shouldShowBottomScreenAction = useSelector(\n    makeSelectShouldShowBottomScreenAction(),\n  );\n  const userOrganizations = useSelector(makeSelectUserOrganizations());\n  const shouldShowCallModal = useSelector(makeSelectShouldShowCallModal());\n  const requestingOrganizations = useSelector(\n    makeSelectRequestingOrganizations(),\n  );\n  const shouldShowTipCreatedModal = useSelector(\n    makeSelectShouldShowTipCreatedModal(),\n  );\n  const tipCreatedData = useSelector(makeSelectTipCreatedData());\n  const screenAction = useSelector(makeSelectScreenAction());\n  const creatingTipWithChat = useSelector(makeSelectCreatingTipWithChat());\n  const uploadingVideo = useSelector(makeSelectUploadingVideo());\n  const createTipMode = useSelector(makeSelectCreateTipMode());\n  const lastActiveTip = useSelector(makeSelectLastActiveTip());\n  const lastTipOrganization = useSelector(makeSelectLastTipOrganization());\n  const shouldShowFastAccessModal = useSelector(\n    makeSelectShouldShowFastAccessModal(),\n  );\n\n  const uploadVideoRequestAction = useAction(uploadVideoRequest);\n  const addNewTipScreenAction = useAction(addScreenAction);\n  const getUserOrganizationsAction = useAction(getUserOrganizationsRequest);\n  const showCancelIncidentModalAction = useAction(showCancelIncidentModal);\n  const showCallModalAction = useAction(showCallModal);\n  const hideModalAction = useAction(hideCallModal);\n  const getIntersectOrganizationsRequestAction = useAction(\n    getIntersectOrganizationsRequest,\n  );\n  const hideTipCreatedModalAction = useAction(hideTipCreatedModal);\n  const createTipWithChatAction = useAction(createTipWithChatRequest);\n  const getTipsRequestAction = useAction(getTipsRequest);\n  const resetStateAction = useAction(resetState);\n  const getLastActiveTipOrganizationAction = useAction(\n    getLastActiveTipOrganization,\n  );\n  const hideFastAccessModalAction = useAction(hideFastAccessModal);\n  const showFastAccessModalAction = useAction(showFastAccessModal);\n\n  const cameraRef = useRef<RNCamera>(null);\n\n  useEffect(() => {\n    //(\"New Tip screen\")\n    if (shouldShowBottomScreenAction) {\n      hideFastAccessModalAction();\n      addNewTipScreenAction({\n        actionText: formatMessage(messages.continue),\n        cancel: showCancelIncidentModalAction,\n        action: getIntersectOrganizationsRequestAction,\n        loading: requestingOrganizations,\n      });\n    }\n  }, [\n    hideFastAccessModalAction,\n    requestingOrganizations,\n    shouldShowBottomScreenAction,\n  ]);\n\n  const tryRequestCameraPermissions = () => {\n    requestCameraPermissions()\n      .then(() => {\n        setPermissionStatus(PermissionStatus.Granted);\n      })\n      .catch(() => {\n        setPermissionStatus(PermissionStatus.Blocked);\n      });\n  };\n\n  useEffect(() => {\n    if (isFocused) {\n      tryRequestCameraPermissions();\n      getUserOrganizationsAction();\n      resetStateAction();\n      getTipsRequestAction({ tipStatus: TipStatus.Active, paging: false });\n    }\n  }, [isFocused]);\n\n  useEffect(() => {\n    if (lastActiveTip) {\n      getLastActiveTipOrganizationAction(lastActiveTip.organization);\n    }\n  }, [lastActiveTip]);\n\n  const stopCamera = useCallback(() => {\n    cameraRef.current?.pausePreview();\n  }, []);\n\n  const startCamera = useCallback(() => {\n    cameraRef.current?.resumePreview();\n  }, []);\n\n  const onRecordFinished = useCallback((filePath: string) => {\n    uploadVideoRequestAction(filePath);\n  }, []);\n\n  const goToTipDetail = useCallback(() => {\n    hideTipCreatedModalAction();\n    NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n      incident: tipCreatedData.incident,\n      showChat: createTipMode === CreateTipMode.Chat,\n    });\n  }, [tipCreatedData, createTipMode]);\n\n  const goToLastTipDetail = useCallback(() => {\n    hideFastAccessModalAction();\n    NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n      incident: lastActiveTip,\n    });\n  }, [hideFastAccessModalAction, lastActiveTip]);\n\n  const handleOnRecordStarted = useCallback(() => {\n    hideFastAccessModalAction();\n  }, [hideFastAccessModalAction]);\n\n  const renderCamera = () => {\n    if (permissionStatus === PermissionStatus.Checking) {\n      return (\n        <LoadingIndicator\n          message={formatMessage(messages.checkingPermissions)}\n        />\n      );\n    }\n    if (permissionStatus === PermissionStatus.Granted) {\n      return (\n        <TipCameraContainer>\n          <TipCamera\n            isRecordEnabled={userOrganizations.length > 0}\n            tipCameraMode={TipCameraMode.camera}\n            incidentVideos={incidentVideos}\n            ref={cameraRef}\n            isFocused={isFocused}\n            isChatDisabled={\n              !!screenAction ||\n              creatingTipWithChat ||\n              uploadingVideo ||\n              userOrganizations.length === 0\n            }\n            onRecordStarted={handleOnRecordStarted}\n            onRecordFinished={onRecordFinished}\n            onPhonePress={showCallModalAction}\n            onChatPress={createTipWithChatAction}\n          />\n          <FastAccessModal\n            onOpen={goToLastTipDetail}\n            isVisible={shouldShowFastAccessModal && !!lastActiveTip}\n            hideModal={hideFastAccessModalAction}\n            incident={lastActiveTip}\n            organization={lastTipOrganization}\n          />\n        </TipCameraContainer>\n      );\n    }\n    if (permissionStatus === PermissionStatus.Blocked) {\n      return (\n        <BlockedPermissionContainer>\n          <BlockedPermissionMessage>\n            {formatMessage(messages.permissionsBlockedMessage)}\n          </BlockedPermissionMessage>\n          <GradientButton\n            text={\n              isAndroid\n                ? formatMessage(messages.tryAgain)\n                : formatMessage(messages.openSettings)\n            }\n            onPress={isAndroid ? tryRequestCameraPermissions : openSettings}\n          />\n        </BlockedPermissionContainer>\n      );\n    }\n    return null;\n  };\n\n  return isFocused ? (\n    <>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"white\" />\n      <SafeAreaContainer>\n        {renderCamera()}\n        <CancelTipModal\n          onShow={stopCamera}\n          onHide={startCamera}\n          onPressYes={showFastAccessModalAction}\n          isVisible={shouldShowCancelTipModal}\n        />\n        <CallModal\n          onShow={stopCamera}\n          onHide={startCamera}\n          isVisible={shouldShowCallModal}\n          hideModal={hideModalAction}\n          organizations={userOrganizations}\n        />\n        <ScreenActionModal\n          isVisible={shouldShowTipCreatedModal}\n          title={formatMessage(messages.tipCreatedTitle, {\n            organizationName: tipCreatedData.organizationName,\n          })}\n          message={\n            <>\n              <Message>{formatMessage(messages.tipCreatedMessage)}</Message>\n              <AcknowledgmentText>\n                {formatMessage(messages.acknowledgment)}\n              </AcknowledgmentText>\n            </>\n          }\n          actionText={formatMessage(messages.seeMyTip)}\n          onAction={goToTipDetail}\n          onHide={\n            createTipMode !== CreateTipMode.Chat\n              ? hideTipCreatedModalAction\n              : noop\n          }\n        />\n      </SafeAreaContainer>\n    </>\n  ) : null;\n};\n\nexport default withNavigationFocus(VideoRecordScreen);\n"],"mappings":"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","ignoreList":[]}