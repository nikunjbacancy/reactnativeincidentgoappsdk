{"version":3,"names":["api","_interopRequireWildcard","require","_effects","_error","_asyncStorage","_interopRequireDefault","_constants","_selectors","_actions","_constants2","_reactNativeRootToast","_reactNative","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","registerBeacon","payload","user","select","makeSelectUser","assign","id","response","beacon","beaconConnect","data","flag","AsyncStorage","setItem","SET_BEACON_DETAILS","JSON","stringify","NativeModules","Bluetooth","startBLEService","address","Toast","show","message","position","positions","BOTTOM","put","beaconRegistrationSuccess","error","beaconRegistrationFailure","handleError","updateSettingScreenSaga","takeLatest","BEACON_REGISTRATION_REQUEST"],"sources":["saga.ts"],"sourcesContent":["/**\n *\n * UpdateNameScreen saga\n *\n */\n\nimport * as api from '../../../../api';\nimport { call, put, takeLatest, select } from 'redux-saga/effects';\nimport { handleError } from '../../../../utils/error';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { SET_BEACON_DETAILS } from '../../../../containers/screens/Home/Settings/constants';\nimport { makeSelectUser } from '../../../../containers/app/selectors';\nimport {\n  beaconRegistrationFailure,\n  beaconRegistrationSuccess,\n} from './actions';\nimport { BEACON_REGISTRATION_REQUEST } from './constants';\nimport { BeaconRegistrationRequestAction } from './types';\nimport Toast from 'react-native-root-toast';\nimport { NativeModules } from 'react-native';\nimport { AppUser } from 'incident-code-core';\n\nexport function* registerBeacon({ payload }: BeaconRegistrationRequestAction): any {\n  try {\n    const user: AppUser = yield select(makeSelectUser());\n    Object.assign(payload, { user: user.id });\n    const response = yield call(api.beacon.beaconConnect, payload);\n\n    switch (response.data.flag) {\n      case true:\n        yield call(AsyncStorage.setItem, SET_BEACON_DETAILS, JSON.stringify(payload));\n        NativeModules.Bluetooth.startBLEService(payload?.address);\n        break;\n      case false:\n        Toast.show(response.data.message, { position: Toast.positions.BOTTOM });\n        break;\n    }\n    yield put(beaconRegistrationSuccess(response.data));\n  } catch (error: any) {\n    yield put(beaconRegistrationFailure(handleError(error)));\n  }\n}\n\nexport default function* updateSettingScreenSaga() {\n  yield takeLatest(BEACON_REGISTRATION_REQUEST, registerBeacon);\n}"],"mappings":"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","ignoreList":[]}