{"version":3,"names":["api","_interopRequireWildcard","require","_saga","_reactNativeRootToast","_interopRequireDefault","_effects","_error","_navigation","_screens","_actions","_constants","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","login","payload","response","auth","data","NavigatorService","navigate","Screens","Onboarding","PromoCode","promoCodeData","put","loginSuccess","getProfile","getTwilioAccessToken","UpdateName","error","axiosError","handleError","Toast","show","message","position","positions","CENTER","loginFailure","resendCode","sendCode","resendCodeSuccess","resendCodeFailure","signInCodeScreenSaga","takeLatest","LOGIN_REQUEST","RESEND_CODE_REQUEST"],"sources":["saga.ts"],"sourcesContent":["/* eslint-disable no-console */\n/**\n *\n * SignInCodeScreen saga\n *\n */\n\nimport * as api from '../../../../api';\nimport { getProfile, getTwilioAccessToken } from '../../../../containers/app/saga';\nimport Toast from 'react-native-root-toast';\nimport { call, put, takeLatest } from 'redux-saga/effects';\nimport { handleError } from '../../../../utils/error';\nimport NavigatorService from '../../../../utils/navigation';\nimport Screens from '../../../../containers/providers/RoutesProvider/screens';\n\nimport {\n  loginFailure,\n  loginSuccess,\n  resendCodeFailure,\n  resendCodeSuccess,\n} from './actions';\nimport { LOGIN_REQUEST, RESEND_CODE_REQUEST } from './constants';\nimport { LoginRequestAction, ResendCodeRequestAction } from './types';\nimport { AxiosError } from 'axios';\n\nexport function* login({ payload }: LoginRequestAction):any {\n  //(\"login payload is -->\",payload)\n  try {\n    const response = yield call(api.auth.login, payload);\n    // //(\"-check param exist->\",response.data.hasOwnProperty('newUser') ? true : false)\n    //(\"login ~ response\", JSON.stringify(response.data));\n    if (response.data.hasOwnProperty('newUser')) {\n      if (response.data.hasOwnProperty('newUser') == true) {\n        yield call(NavigatorService.navigate, Screens.Onboarding.PromoCode, {\n          promoCodeData: response.data,\n        })\n      } else {\n        yield put(loginSuccess(response.data));\n        yield call(getProfile);\n        yield call(getTwilioAccessToken);\n        yield call(NavigatorService.navigate, Screens.Onboarding.UpdateName)\n      }\n    } else {\n        yield put(loginSuccess(response.data));\n        yield call(getProfile);\n        yield call(getTwilioAccessToken);\n        yield call(NavigatorService.navigate, Screens.Onboarding.UpdateName)\n    }\n\n  } catch (error: any) {\n    const axiosError: AxiosError = yield call(handleError, error);\n    //(\"axiosError.message=>\",axiosError.message)\n    yield call(Toast.show, axiosError.message, {\n      position: Toast.positions.CENTER,\n    });\n    yield put(loginFailure(handleError(error)));\n  }\n}\n\nexport function* resendCode({ payload }: ResendCodeRequestAction) {\n  // //(\"resendCode payload is -->\", payload)\n  try {\n    yield call(api.auth.sendCode, payload);\n    yield put(resendCodeSuccess());\n    //(\"Code Resent 1-->\")\n    yield call(Toast.show, 'Code Resent', { position: Toast.positions.CENTER });\n    //(\"Code Resent 2-->\")\n  } catch (error: any) {\n    const axiosError: AxiosError = yield call(handleError, error);\n    //(\"axiosError.message=>\",axiosError.message)\n    yield call(Toast.show, axiosError.message, {\n      position: Toast.positions.CENTER,\n    });\n    yield put(resendCodeFailure(axiosError));\n  }\n}\n\nexport default function* signInCodeScreenSaga() {\n  yield takeLatest(LOGIN_REQUEST, login);\n  yield takeLatest(RESEND_CODE_REQUEST, resendCode);\n}\n"],"mappings":"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","ignoreList":[]}