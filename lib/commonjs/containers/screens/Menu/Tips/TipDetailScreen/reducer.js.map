{"version":3,"names":["_immer","_interopRequireDefault","require","_findIndex","_constants","e","__esModule","default","initialState","exports","incident","undefined","incidentVideos","organization","isLoadingVideos","isLoadingIncident","shouldShowCallModal","shouldShowChatModal","messages","tipDetailScreenReducer","produce","draft","action","type","GET_INCIDENT_VIDEOS_REQUEST","GET_INCIDENT_VIDEOS_SUCCESS","payload","videos","GET_INCIDENT_VIDEOS_FAILURE","GET_INCIDENT_REQUEST","GET_INCIDENT_SUCCESS","GET_INCIDENT_FAILURE","SHOW_CALL_MODAL","HIDE_CALL_MODAL","SHOW_CHAT_MODAL","HIDE_CHAT_MODAL","ADD_INCIDENT_VIDEO","oldIndex","findIndex","id","splice","push","GET_MESSAGES_SUCCESS","ADD_MESSAGE","unshift","_default"],"sources":["reducer.ts"],"sourcesContent":["/* eslint-disable no-case-declarations */\n/**\n *\n * TipDetailScreen reducer\n *\n */\n\nimport produce, { Draft } from 'immer';\nimport findIndex from 'lodash/findIndex';\n\nimport {\n  ADD_INCIDENT_VIDEO,\n  ADD_MESSAGE,\n  GET_INCIDENT_FAILURE,\n  GET_INCIDENT_REQUEST,\n  GET_INCIDENT_SUCCESS,\n  GET_INCIDENT_VIDEOS_FAILURE,\n  GET_INCIDENT_VIDEOS_REQUEST,\n  GET_INCIDENT_VIDEOS_SUCCESS,\n  GET_MESSAGES_SUCCESS,\n  HIDE_CALL_MODAL,\n  HIDE_CHAT_MODAL,\n  SHOW_CALL_MODAL,\n  SHOW_CHAT_MODAL,\n} from './constants';\nimport { TipDetailActionTypes, TipDetailState } from './types';\n\nexport const initialState: TipDetailState = {\n  incident: undefined,\n  incidentVideos: [],\n  organization: {},\n  isLoadingVideos: true,\n  isLoadingIncident: true,\n  shouldShowCallModal: false,\n  shouldShowChatModal: false,\n  messages: [],\n};\n\nconst tipDetailScreenReducer = produce(\n  (draft: Draft<TipDetailState>, action: TipDetailActionTypes) => {\n    switch (action.type) {\n      case GET_INCIDENT_VIDEOS_REQUEST:\n        draft.isLoadingVideos = true;\n        break;\n      case GET_INCIDENT_VIDEOS_SUCCESS:\n        draft.incidentVideos = action.payload.videos;\n        draft.organization = action.payload.organization;\n        draft.isLoadingVideos = false;\n        break;\n      case GET_INCIDENT_VIDEOS_FAILURE:\n        draft.isLoadingVideos = false;\n        break;\n      case GET_INCIDENT_REQUEST:\n        draft.isLoadingIncident = true;\n        break;\n      case GET_INCIDENT_SUCCESS:\n        draft.incident = action.payload;\n        draft.isLoadingIncident = false;\n        break;\n      case GET_INCIDENT_FAILURE:\n        draft.isLoadingIncident = false;\n        break;\n      case SHOW_CALL_MODAL:\n        draft.shouldShowCallModal = true;\n        break;\n      case HIDE_CALL_MODAL:\n        draft.shouldShowCallModal = false;\n        break;\n      case SHOW_CHAT_MODAL:\n        draft.shouldShowChatModal = true;\n        break;\n      case HIDE_CHAT_MODAL:\n        draft.shouldShowChatModal = false;\n        break;\n      case ADD_INCIDENT_VIDEO:\n        const oldIndex = findIndex(draft.incidentVideos, {\n          id: action.payload.id,\n        });\n        if (oldIndex > -1) {\n          draft.incidentVideos.splice(oldIndex, 1);\n        }\n        draft.incidentVideos.push(action.payload);\n        break;\n      case GET_MESSAGES_SUCCESS:\n        draft.messages = action.payload;\n        break;\n      case ADD_MESSAGE:\n        draft.messages.unshift(action.payload);\n        break;\n      default:\n    }\n  },\n  initialState,\n);\n\nexport default tipDetailScreenReducer;\n"],"mappings":";;;;;;AAOA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,UAAA,GAAAF,OAAA;AAcqB,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAxBrB;AACA;AACA;AACA;AACA;AACA;;AAsBO,MAAMG,YAA4B,GAAAC,OAAA,CAAAD,YAAA,GAAG;EAC1CE,QAAQ,EAAEC,SAAS;EACnBC,cAAc,EAAE,EAAE;EAClBC,YAAY,EAAE,CAAC,CAAC;EAChBC,eAAe,EAAE,IAAI;EACrBC,iBAAiB,EAAE,IAAI;EACvBC,mBAAmB,EAAE,KAAK;EAC1BC,mBAAmB,EAAE,KAAK;EAC1BC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMC,sBAAsB,GAAG,IAAAC,cAAO,EACpC,CAACC,KAA4B,EAAEC,MAA4B,KAAK;EAC9D,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKC,sCAA2B;MAC9BH,KAAK,CAACP,eAAe,GAAG,IAAI;MAC5B;IACF,KAAKW,sCAA2B;MAC9BJ,KAAK,CAACT,cAAc,GAAGU,MAAM,CAACI,OAAO,CAACC,MAAM;MAC5CN,KAAK,CAACR,YAAY,GAAGS,MAAM,CAACI,OAAO,CAACb,YAAY;MAChDQ,KAAK,CAACP,eAAe,GAAG,KAAK;MAC7B;IACF,KAAKc,sCAA2B;MAC9BP,KAAK,CAACP,eAAe,GAAG,KAAK;MAC7B;IACF,KAAKe,+BAAoB;MACvBR,KAAK,CAACN,iBAAiB,GAAG,IAAI;MAC9B;IACF,KAAKe,+BAAoB;MACvBT,KAAK,CAACX,QAAQ,GAAGY,MAAM,CAACI,OAAO;MAC/BL,KAAK,CAACN,iBAAiB,GAAG,KAAK;MAC/B;IACF,KAAKgB,+BAAoB;MACvBV,KAAK,CAACN,iBAAiB,GAAG,KAAK;MAC/B;IACF,KAAKiB,0BAAe;MAClBX,KAAK,CAACL,mBAAmB,GAAG,IAAI;MAChC;IACF,KAAKiB,0BAAe;MAClBZ,KAAK,CAACL,mBAAmB,GAAG,KAAK;MACjC;IACF,KAAKkB,0BAAe;MAClBb,KAAK,CAACJ,mBAAmB,GAAG,IAAI;MAChC;IACF,KAAKkB,0BAAe;MAClBd,KAAK,CAACJ,mBAAmB,GAAG,KAAK;MACjC;IACF,KAAKmB,6BAAkB;MACrB,MAAMC,QAAQ,GAAG,IAAAC,kBAAS,EAACjB,KAAK,CAACT,cAAc,EAAE;QAC/C2B,EAAE,EAAEjB,MAAM,CAACI,OAAO,CAACa;MACrB,CAAC,CAAC;MACF,IAAIF,QAAQ,GAAG,CAAC,CAAC,EAAE;QACjBhB,KAAK,CAACT,cAAc,CAAC4B,MAAM,CAACH,QAAQ,EAAE,CAAC,CAAC;MAC1C;MACAhB,KAAK,CAACT,cAAc,CAAC6B,IAAI,CAACnB,MAAM,CAACI,OAAO,CAAC;MACzC;IACF,KAAKgB,+BAAoB;MACvBrB,KAAK,CAACH,QAAQ,GAAGI,MAAM,CAACI,OAAO;MAC/B;IACF,KAAKiB,sBAAW;MACdtB,KAAK,CAACH,QAAQ,CAAC0B,OAAO,CAACtB,MAAM,CAACI,OAAO,CAAC;MACtC;IACF;EACF;AACF,CAAC,EACDlB,YACF,CAAC;AAAC,IAAAqC,QAAA,GAAApC,OAAA,CAAAF,OAAA,GAEaY,sBAAsB","ignoreList":[]}