{"version":3,"names":["api","_interopRequireWildcard","require","_effects","_error","_actions","_constants","_selectors","_types","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","getTips","payload","spawn","getTipsInParallel","tipStatus","paging","tips","select","makeSelectTips","query","pagination","index","pageIndex","filter","isResolved","TipStatus","Closed","_response$data$pagina","response","incidents","getIncidents","put","setHasMoreData","data","hasMore","addPageIndex","getTipsSuccess","error","getTipsFailure","handleError","myTipsScreenSaga","takeLatest","GET_TIPS_REQUEST"],"sources":["saga.ts"],"sourcesContent":["/**\n *\n * MyTipsScreen saga\n *\n */\n\nimport * as api from '../../../../../api';\nimport { AxiosResponse } from 'axios';\nimport { Incident, QueryResult, QuerySpecification } from 'incident-code-core';\nimport { call, put, select, spawn, takeLatest } from 'redux-saga/effects';\nimport { handleError } from '../../../../../utils/error';\n\nimport {\n  addPageIndex,\n  getTipsFailure,\n  getTipsSuccess,\n  setHasMoreData,\n} from './actions';\nimport { GET_TIPS_REQUEST } from './constants';\nimport { makeSelectTips } from './selectors';\nimport {\n  GetTipsRequestAction,\n  GetTipsRequestPayload,\n  Tips,\n  TipStatus,\n} from './types';\n\nfunction* getTips({ payload }: GetTipsRequestAction) {\n  yield spawn(getTipsInParallel, payload);\n}\n\nfunction* getTipsInParallel(payload: GetTipsRequestPayload) {\n  const { tipStatus, paging } = payload;\n  const tips: Tips = yield select(makeSelectTips());\n  const query: QuerySpecification = {\n    pagination: paging\n      ? {\n          index: tips[tipStatus].pageIndex,\n        }\n      : { index: 0 },\n    filter: {\n      isResolved: tipStatus === TipStatus.Closed,\n    },\n  };\n  try {\n    const response: AxiosResponse<QueryResult<Incident>> = yield call(\n      api.incidents.getIncidents,\n      query,\n    );\n    yield put(\n      setHasMoreData({\n        data: response.data.pagination?.hasMore || false,\n        tipStatus,\n      }),\n    );\n    if (paging) {\n      yield put(addPageIndex(tipStatus));\n    }\n    yield put(\n      getTipsSuccess({ data: response.data.data || [], tipStatus, paging }),\n    );\n  } catch (error: any) {\n    yield put(getTipsFailure(handleError(error)));\n  }\n}\n\nexport default function* myTipsScreenSaga() {\n  yield takeLatest(GET_TIPS_REQUEST, getTips);\n}\n"],"mappings":"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","ignoreList":[]}