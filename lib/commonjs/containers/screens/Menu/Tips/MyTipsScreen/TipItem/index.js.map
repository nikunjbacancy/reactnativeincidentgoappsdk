{"version":3,"names":["_assets","require","_components","_incidentCodeCore","_react","_interopRequireDefault","_reactIntl","_hooks","_location","_string","_MapSnapshot","_messages","_styles","e","__esModule","default","TipItem","badges","incident","formatMessage","useIntl","category","useIncidentCategoryConfig","date","getIncidentDate","createdAt","renderInfo","isViolated","text","formatString","messages","violationInfo","type","sharedStrings","violation_types","violationType","ViolationType","WrongContent","createElement","ViolationContainer","colors","mapOverlay","ViolationText","addressString","address","noAddress","mapUrl","uri","coords","location","convertLocationToCoords","latitude","longitude","Fragment","MapOverlayContainer","MapOverlayTitle","numberOfLines","isClosed","isResolved","MapOverlayAddress","MapImage","source","Marker","white","backgroundGradientColors","gradientColor","renderTitle","IncidentType","Escort","escort","PassiveEscort","passiveEscort","display","Container","InfoContainer","IncidentCategoryImage","incidentType","active","border","TextContainer","TextTitle","TextDescription","MapSnapshotContainer","_default","exports"],"sources":["index.tsx"],"sourcesContent":["import { colors } from '../../../../../../assets';\nimport { IncidentCategoryImage } from '../../../../../../components';\nimport {\n  Id,\n  Incident,\n  IncidentType,\n  sharedStrings,\n  ViolationType,\n} from 'incident-code-core';\nimport React, { FC } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useIncidentCategoryConfig } from '../../../../../../utils/hooks';\nimport { convertLocationToCoords, getIncidentDate } from '../../../../../../utils/location';\nimport { formatString } from '../../../../../../utils/string';\n\nimport MapSnapshot from '../MapSnapshot';\nimport messages from '../messages';\nimport {\n  Container,\n  InfoContainer,\n  MapImage,\n  MapOverlayAddress,\n  MapOverlayContainer,\n  MapOverlayTitle,\n  MapSnapshotContainer,\n  Marker,\n  TextContainer,\n  TextDescription,\n  TextTitle,\n  ViolationContainer,\n  ViolationText,\n} from './styles';\n\ninterface Props {\n  incident: Incident;\n  badges: Id[];\n}\n\nconst TipItem: FC<Props> = ({ badges, incident }) => {\n  const { formatMessage } = useIntl();\n  const category = useIncidentCategoryConfig(incident.category);\n  const date = getIncidentDate(incident.createdAt);\n\n  const renderInfo = () => {\n    if (incident.isViolated) {\n      const text = formatString(formatMessage(messages.violationInfo), {\n        type:\n          sharedStrings.violation_types[\n            incident.violationType || ViolationType.WrongContent\n          ],\n      });\n      return (\n        <ViolationContainer colors={colors.mapOverlay}>\n          <ViolationText>{text}</ViolationText>\n        </ViolationContainer>\n      );\n    }\n    const addressString = incident.address || formatMessage(messages.noAddress);\n    const mapUrl = incident.mapUrl ? { uri: incident.mapUrl } : null;\n    const coords = incident.location\n      ? convertLocationToCoords(incident.location)\n      : { latitude: 0, longitude: 0 };\n    return (\n      <>\n        <MapOverlayContainer colors={colors.mapOverlay}>\n          <MapOverlayTitle numberOfLines={1} isClosed={incident.isResolved}>\n            {formatMessage(messages.address)}\n          </MapOverlayTitle>\n          <MapOverlayAddress numberOfLines={2}>\n            {addressString}\n          </MapOverlayAddress>\n        </MapOverlayContainer>\n        {mapUrl ? (\n          <>\n            <MapImage source={mapUrl} isClosed={incident.isResolved} />\n            <Marker\n              colors={\n                incident.isResolved\n                  ? [colors.white, colors.white]\n                  : category.backgroundGradientColors\n              }\n            />\n          </>\n        ) : (\n          <MapSnapshot\n            coords={coords}\n            gradientColor={category.backgroundGradientColors}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTitle = (type: IncidentType) => {\n    switch (type) {\n      case IncidentType.Escort:\n        return formatMessage(messages.escort);\n      case IncidentType.PassiveEscort:\n        return formatMessage(messages.passiveEscort);\n      default:\n        return category.display;\n    }\n  };\n\n  return (\n    <Container>\n      <InfoContainer>\n        <IncidentCategoryImage\n          incidentType={incident.type}\n          active={!incident.isResolved}\n          category={incident.category}\n          badges={badges}\n          border\n        />\n        <TextContainer>\n          <TextTitle numberOfLines={1}>{renderTitle(incident.type)}</TextTitle>\n          <TextDescription numberOfLines={1}>{date}</TextDescription>\n        </TextContainer>\n      </InfoContainer>\n      <MapSnapshotContainer>{renderInfo()}</MapSnapshotContainer>\n    </Container>\n  );\n};\n\nexport default TipItem;\n"],"mappings":"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","ignoreList":[]}