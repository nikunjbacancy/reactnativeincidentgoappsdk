{"version":3,"names":["_immer","_interopRequireDefault","require","_uniqBy","_constants","_types","e","__esModule","default","initialState","exports","tips","TipStatus","Active","data","pageIndex","hasMoreData","Closed","isLoading","isDeleting","myTipsScreenReducer","produce","draft","action","type","GET_TIPS_REQUEST","GET_TIPS_SUCCESS","payload","paging","tipStatus","uniqBy","GET_TIPS_FAILURE","ADD_PAGE_INDEX","SET_HAS_MORE_DATA","RESET_STATE","_default"],"sources":["reducer.ts"],"sourcesContent":["/**\n *\n * MyTipsScreen reducer\n *\n */\n\nimport produce, { Draft } from 'immer';\nimport uniqBy from 'lodash/uniqBy';\n\nimport {\n  ADD_PAGE_INDEX,\n  GET_TIPS_FAILURE,\n  GET_TIPS_REQUEST,\n  GET_TIPS_SUCCESS,\n  RESET_STATE,\n  SET_HAS_MORE_DATA,\n} from './constants';\nimport { MyTipsActionTypes, MyTipsState, TipStatus } from './types';\n\nexport const initialState: MyTipsState = {\n  tips: {\n    [TipStatus.Active]: {\n      data: [],\n      pageIndex: 0,\n      hasMoreData: false,\n    },\n    [TipStatus.Closed]: {\n      data: [],\n      pageIndex: 0,\n      hasMoreData: false,\n    },\n  },\n  isLoading: true,\n  isDeleting: false,\n};\n\nconst myTipsScreenReducer = produce(\n  (draft: Draft<MyTipsState>, action: MyTipsActionTypes) => {\n    switch (action.type) {\n      case GET_TIPS_REQUEST:\n        draft.isLoading = true;\n        break;\n      case GET_TIPS_SUCCESS:\n        if (action.payload.paging) {\n          draft.tips[action.payload.tipStatus].data = uniqBy(\n            [\n              ...draft.tips[action.payload.tipStatus].data,\n              ...action.payload.data,\n            ],\n            'id',\n          );\n        } else {\n          draft.tips[action.payload.tipStatus].data = action.payload.data;\n        }\n        draft.isLoading = false;\n        break;\n      case GET_TIPS_FAILURE:\n        draft.isLoading = false;\n        break;\n      case ADD_PAGE_INDEX:\n        if (draft.tips[action.payload].hasMoreData) {\n          draft.tips[action.payload].pageIndex += 1;\n        }\n        break;\n      case SET_HAS_MORE_DATA:\n        draft.tips[action.payload.tipStatus].hasMoreData = action.payload.data;\n        break;\n      case RESET_STATE:\n        draft.tips = initialState.tips;\n        draft.isLoading = initialState.isLoading;\n        draft.isDeleting = initialState.isDeleting;\n        break;\n      default:\n    }\n  },\n  initialState,\n);\n\nexport default myTipsScreenReducer;\n"],"mappings":";;;;;;AAMA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,UAAA,GAAAF,OAAA;AAQA,IAAAG,MAAA,GAAAH,OAAA;AAAoE,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAjBpE;AACA;AACA;AACA;AACA;;AAeO,MAAMG,YAAyB,GAAAC,OAAA,CAAAD,YAAA,GAAG;EACvCE,IAAI,EAAE;IACJ,CAACC,gBAAS,CAACC,MAAM,GAAG;MAClBC,IAAI,EAAE,EAAE;MACRC,SAAS,EAAE,CAAC;MACZC,WAAW,EAAE;IACf,CAAC;IACD,CAACJ,gBAAS,CAACK,MAAM,GAAG;MAClBH,IAAI,EAAE,EAAE;MACRC,SAAS,EAAE,CAAC;MACZC,WAAW,EAAE;IACf;EACF,CAAC;EACDE,SAAS,EAAE,IAAI;EACfC,UAAU,EAAE;AACd,CAAC;AAED,MAAMC,mBAAmB,GAAG,IAAAC,cAAO,EACjC,CAACC,KAAyB,EAAEC,MAAyB,KAAK;EACxD,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKC,2BAAgB;MACnBH,KAAK,CAACJ,SAAS,GAAG,IAAI;MACtB;IACF,KAAKQ,2BAAgB;MACnB,IAAIH,MAAM,CAACI,OAAO,CAACC,MAAM,EAAE;QACzBN,KAAK,CAACX,IAAI,CAACY,MAAM,CAACI,OAAO,CAACE,SAAS,CAAC,CAACf,IAAI,GAAG,IAAAgB,eAAM,EAChD,CACE,GAAGR,KAAK,CAACX,IAAI,CAACY,MAAM,CAACI,OAAO,CAACE,SAAS,CAAC,CAACf,IAAI,EAC5C,GAAGS,MAAM,CAACI,OAAO,CAACb,IAAI,CACvB,EACD,IACF,CAAC;MACH,CAAC,MAAM;QACLQ,KAAK,CAACX,IAAI,CAACY,MAAM,CAACI,OAAO,CAACE,SAAS,CAAC,CAACf,IAAI,GAAGS,MAAM,CAACI,OAAO,CAACb,IAAI;MACjE;MACAQ,KAAK,CAACJ,SAAS,GAAG,KAAK;MACvB;IACF,KAAKa,2BAAgB;MACnBT,KAAK,CAACJ,SAAS,GAAG,KAAK;MACvB;IACF,KAAKc,yBAAc;MACjB,IAAIV,KAAK,CAACX,IAAI,CAACY,MAAM,CAACI,OAAO,CAAC,CAACX,WAAW,EAAE;QAC1CM,KAAK,CAACX,IAAI,CAACY,MAAM,CAACI,OAAO,CAAC,CAACZ,SAAS,IAAI,CAAC;MAC3C;MACA;IACF,KAAKkB,4BAAiB;MACpBX,KAAK,CAACX,IAAI,CAACY,MAAM,CAACI,OAAO,CAACE,SAAS,CAAC,CAACb,WAAW,GAAGO,MAAM,CAACI,OAAO,CAACb,IAAI;MACtE;IACF,KAAKoB,sBAAW;MACdZ,KAAK,CAACX,IAAI,GAAGF,YAAY,CAACE,IAAI;MAC9BW,KAAK,CAACJ,SAAS,GAAGT,YAAY,CAACS,SAAS;MACxCI,KAAK,CAACH,UAAU,GAAGV,YAAY,CAACU,UAAU;MAC1C;IACF;EACF;AACF,CAAC,EACDV,YACF,CAAC;AAAC,IAAA0B,QAAA,GAAAzB,OAAA,CAAAF,OAAA,GAEaY,mBAAmB","ignoreList":[]}