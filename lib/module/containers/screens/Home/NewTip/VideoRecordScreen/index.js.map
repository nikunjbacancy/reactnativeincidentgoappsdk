{"version":3,"names":["CallModal","GradientButton","LoadingIndicator","SafeAreaContainer","ScreenActionModal","TipCamera","TipCameraMode","makeSelectNewTipIncidentVideos","addScreenAction","Screens","makeSelectScreenAction","noop","React","useCallback","useEffect","useRef","useState","useIntl","StatusBar","openSettings","withNavigationFocus","isAndroid","useAction","useSelector","NavigatorService","requestCameraPermissions","getTipsRequest","resetState","makeSelectLastActiveTip","TipStatus","getIntersectOrganizationsRequest","makeSelectRequestingOrganizations","createTipWithChatRequest","getLastActiveTipOrganization","getUserOrganizationsRequest","hideCallModal","hideFastAccessModal","hideTipCreatedModal","showCallModal","showCancelIncidentModal","showFastAccessModal","uploadVideoRequest","CancelTipModal","FastAccessModal","messages","makeSelectCreateTipMode","makeSelectCreatingTipWithChat","makeSelectLastTipOrganization","makeSelectShouldShowBottomScreenAction","makeSelectShouldShowCallModal","makeSelectShouldShowCancelTipModal","makeSelectShouldShowFastAccessModal","makeSelectShouldShowTipCreatedModal","makeSelectTipCreatedData","makeSelectUploadingVideo","makeSelectUserOrganizations","AcknowledgmentText","BlockedPermissionContainer","BlockedPermissionMessage","Message","TipCameraContainer","CreateTipMode","PermissionStatus","VideoRecordScreen","isFocused","formatMessage","permissionStatus","setPermissionStatus","Checking","incidentVideos","shouldShowCancelTipModal","shouldShowBottomScreenAction","userOrganizations","shouldShowCallModal","requestingOrganizations","shouldShowTipCreatedModal","tipCreatedData","screenAction","creatingTipWithChat","uploadingVideo","createTipMode","lastActiveTip","lastTipOrganization","shouldShowFastAccessModal","uploadVideoRequestAction","addNewTipScreenAction","getUserOrganizationsAction","showCancelIncidentModalAction","showCallModalAction","hideModalAction","getIntersectOrganizationsRequestAction","hideTipCreatedModalAction","createTipWithChatAction","getTipsRequestAction","resetStateAction","getLastActiveTipOrganizationAction","hideFastAccessModalAction","showFastAccessModalAction","cameraRef","actionText","continue","cancel","action","loading","tryRequestCameraPermissions","then","Granted","catch","Blocked","tipStatus","Active","paging","organization","stopCamera","_cameraRef$current","current","pausePreview","startCamera","_cameraRef$current2","resumePreview","onRecordFinished","filePath","goToTipDetail","navigate","Menu","Tips","TipDetail","incident","showChat","Chat","goToLastTipDetail","handleOnRecordStarted","renderCamera","createElement","message","checkingPermissions","isRecordEnabled","length","tipCameraMode","camera","ref","isChatDisabled","onRecordStarted","onPhonePress","onChatPress","onOpen","isVisible","hideModal","permissionsBlockedMessage","text","tryAgain","onPress","Fragment","barStyle","backgroundColor","onShow","onHide","onPressYes","organizations","title","tipCreatedTitle","organizationName","tipCreatedMessage","acknowledgment","seeMyTip","onAction"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport {\n  CallModal,\n  GradientButton,\n  LoadingIndicator,\n  SafeAreaContainer,\n  ScreenActionModal,\n  TipCamera,\n} from '../../../../../components';\nimport { TipCameraMode } from '../../../../../components/TipCamera/types';\nimport { makeSelectNewTipIncidentVideos } from '../../../../../containers/app/selectors';\nimport { addScreenAction } from '../../../../../containers/providers/RoutesProvider/actions';\nimport Screens from '../../../../../containers/providers/RoutesProvider/screens';\nimport { makeSelectScreenAction } from '../../../../../containers/providers/RoutesProvider/selectors';\nimport noop from 'lodash/noop';\nimport React, { FC, useCallback, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { StatusBar } from 'react-native';\nimport { RNCamera } from 'react-native-camera';\nimport { openSettings } from 'react-native-permissions';\nimport { withNavigationFocus } from 'react-navigation';\nimport { isAndroid } from '../../../../../utils/device';\nimport { useAction, useSelector } from '../../../../../utils/hooks';\nimport NavigatorService from '../../../../../utils/navigation';\nimport { requestCameraPermissions } from '../../../../../utils/permission';\n\nimport {\n  getTipsRequest,\n  resetState,\n} from '../../../Menu/Tips/MyTipsScreen/actions';\nimport { makeSelectLastActiveTip } from '../../../Menu/Tips/MyTipsScreen/selectors';\nimport { TipStatus } from '../../../Menu/Tips/MyTipsScreen/types';\nimport { getIntersectOrganizationsRequest } from '../SelectOrganizationScreen/actions';\nimport { makeSelectRequestingOrganizations } from '../SelectOrganizationScreen/selectors';\nimport {\n  createTipWithChatRequest,\n  getLastActiveTipOrganization,\n  getUserOrganizationsRequest,\n  hideCallModal,\n  hideFastAccessModal,\n  hideTipCreatedModal,\n  showCallModal,\n  showCancelIncidentModal,\n  showFastAccessModal,\n  uploadVideoRequest,\n} from './actions';\nimport CancelTipModal from './CancelTipModal';\nimport FastAccessModal from './FastAccessModal';\nimport messages from './messages';\nimport {\n  makeSelectCreateTipMode,\n  makeSelectCreatingTipWithChat,\n  makeSelectLastTipOrganization,\n  makeSelectShouldShowBottomScreenAction,\n  makeSelectShouldShowCallModal,\n  makeSelectShouldShowCancelTipModal,\n  makeSelectShouldShowFastAccessModal,\n  makeSelectShouldShowTipCreatedModal,\n  makeSelectTipCreatedData,\n  makeSelectUploadingVideo,\n  makeSelectUserOrganizations,\n} from './selectors';\nimport {\n  AcknowledgmentText,\n  BlockedPermissionContainer,\n  BlockedPermissionMessage,\n  Message,\n  TipCameraContainer,\n} from './styles';\nimport { CreateTipMode } from './types';\n\ninterface Props {\n  isFocused: boolean;\n}\n\nenum PermissionStatus {\n  Checking,\n  Granted,\n  Blocked,\n}\nconst VideoRecordScreen: FC<Props> = ({ isFocused }) => {\n  const { formatMessage } = useIntl();\n\n  const [permissionStatus, setPermissionStatus] = useState(\n    PermissionStatus.Checking,\n  );\n\n  const incidentVideos = useSelector(makeSelectNewTipIncidentVideos());\n  const shouldShowCancelTipModal = useSelector(\n    makeSelectShouldShowCancelTipModal(),\n  );\n  const shouldShowBottomScreenAction = useSelector(\n    makeSelectShouldShowBottomScreenAction(),\n  );\n  const userOrganizations = useSelector(makeSelectUserOrganizations());\n  const shouldShowCallModal = useSelector(makeSelectShouldShowCallModal());\n  const requestingOrganizations = useSelector(\n    makeSelectRequestingOrganizations(),\n  );\n  const shouldShowTipCreatedModal = useSelector(\n    makeSelectShouldShowTipCreatedModal(),\n  );\n  const tipCreatedData = useSelector(makeSelectTipCreatedData());\n  const screenAction = useSelector(makeSelectScreenAction());\n  const creatingTipWithChat = useSelector(makeSelectCreatingTipWithChat());\n  const uploadingVideo = useSelector(makeSelectUploadingVideo());\n  const createTipMode = useSelector(makeSelectCreateTipMode());\n  const lastActiveTip = useSelector(makeSelectLastActiveTip());\n  const lastTipOrganization = useSelector(makeSelectLastTipOrganization());\n  const shouldShowFastAccessModal = useSelector(\n    makeSelectShouldShowFastAccessModal(),\n  );\n\n  const uploadVideoRequestAction = useAction(uploadVideoRequest);\n  const addNewTipScreenAction = useAction(addScreenAction);\n  const getUserOrganizationsAction = useAction(getUserOrganizationsRequest);\n  const showCancelIncidentModalAction = useAction(showCancelIncidentModal);\n  const showCallModalAction = useAction(showCallModal);\n  const hideModalAction = useAction(hideCallModal);\n  const getIntersectOrganizationsRequestAction = useAction(\n    getIntersectOrganizationsRequest,\n  );\n  const hideTipCreatedModalAction = useAction(hideTipCreatedModal);\n  const createTipWithChatAction = useAction(createTipWithChatRequest);\n  const getTipsRequestAction = useAction(getTipsRequest);\n  const resetStateAction = useAction(resetState);\n  const getLastActiveTipOrganizationAction = useAction(\n    getLastActiveTipOrganization,\n  );\n  const hideFastAccessModalAction = useAction(hideFastAccessModal);\n  const showFastAccessModalAction = useAction(showFastAccessModal);\n\n  const cameraRef = useRef<RNCamera>(null);\n\n  useEffect(() => {\n    //(\"New Tip screen\")\n    if (shouldShowBottomScreenAction) {\n      hideFastAccessModalAction();\n      addNewTipScreenAction({\n        actionText: formatMessage(messages.continue),\n        cancel: showCancelIncidentModalAction,\n        action: getIntersectOrganizationsRequestAction,\n        loading: requestingOrganizations,\n      });\n    }\n  }, [\n    hideFastAccessModalAction,\n    requestingOrganizations,\n    shouldShowBottomScreenAction,\n  ]);\n\n  const tryRequestCameraPermissions = () => {\n    requestCameraPermissions()\n      .then(() => {\n        setPermissionStatus(PermissionStatus.Granted);\n      })\n      .catch(() => {\n        setPermissionStatus(PermissionStatus.Blocked);\n      });\n  };\n\n  useEffect(() => {\n    if (isFocused) {\n      tryRequestCameraPermissions();\n      getUserOrganizationsAction();\n      resetStateAction();\n      getTipsRequestAction({ tipStatus: TipStatus.Active, paging: false });\n    }\n  }, [isFocused]);\n\n  useEffect(() => {\n    if (lastActiveTip) {\n      getLastActiveTipOrganizationAction(lastActiveTip.organization);\n    }\n  }, [lastActiveTip]);\n\n  const stopCamera = useCallback(() => {\n    cameraRef.current?.pausePreview();\n  }, []);\n\n  const startCamera = useCallback(() => {\n    cameraRef.current?.resumePreview();\n  }, []);\n\n  const onRecordFinished = useCallback((filePath: string) => {\n    uploadVideoRequestAction(filePath);\n  }, []);\n\n  const goToTipDetail = useCallback(() => {\n    hideTipCreatedModalAction();\n    NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n      incident: tipCreatedData.incident,\n      showChat: createTipMode === CreateTipMode.Chat,\n    });\n  }, [tipCreatedData, createTipMode]);\n\n  const goToLastTipDetail = useCallback(() => {\n    hideFastAccessModalAction();\n    NavigatorService.navigate(Screens.Menu.Tips.TipDetail, {\n      incident: lastActiveTip,\n    });\n  }, [hideFastAccessModalAction, lastActiveTip]);\n\n  const handleOnRecordStarted = useCallback(() => {\n    hideFastAccessModalAction();\n  }, [hideFastAccessModalAction]);\n\n  const renderCamera = () => {\n    if (permissionStatus === PermissionStatus.Checking) {\n      return (\n        <LoadingIndicator\n          message={formatMessage(messages.checkingPermissions)}\n        />\n      );\n    }\n    if (permissionStatus === PermissionStatus.Granted) {\n      return (\n        <TipCameraContainer>\n          <TipCamera\n            isRecordEnabled={userOrganizations.length > 0}\n            tipCameraMode={TipCameraMode.camera}\n            incidentVideos={incidentVideos}\n            ref={cameraRef}\n            isFocused={isFocused}\n            isChatDisabled={\n              !!screenAction ||\n              creatingTipWithChat ||\n              uploadingVideo ||\n              userOrganizations.length === 0\n            }\n            onRecordStarted={handleOnRecordStarted}\n            onRecordFinished={onRecordFinished}\n            onPhonePress={showCallModalAction}\n            onChatPress={createTipWithChatAction}\n          />\n          <FastAccessModal\n            onOpen={goToLastTipDetail}\n            isVisible={shouldShowFastAccessModal && !!lastActiveTip}\n            hideModal={hideFastAccessModalAction}\n            incident={lastActiveTip}\n            organization={lastTipOrganization}\n          />\n        </TipCameraContainer>\n      );\n    }\n    if (permissionStatus === PermissionStatus.Blocked) {\n      return (\n        <BlockedPermissionContainer>\n          <BlockedPermissionMessage>\n            {formatMessage(messages.permissionsBlockedMessage)}\n          </BlockedPermissionMessage>\n          <GradientButton\n            text={\n              isAndroid\n                ? formatMessage(messages.tryAgain)\n                : formatMessage(messages.openSettings)\n            }\n            onPress={isAndroid ? tryRequestCameraPermissions : openSettings}\n          />\n        </BlockedPermissionContainer>\n      );\n    }\n    return null;\n  };\n\n  return isFocused ? (\n    <>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"white\" />\n      <SafeAreaContainer>\n        {renderCamera()}\n        <CancelTipModal\n          onShow={stopCamera}\n          onHide={startCamera}\n          onPressYes={showFastAccessModalAction}\n          isVisible={shouldShowCancelTipModal}\n        />\n        <CallModal\n          onShow={stopCamera}\n          onHide={startCamera}\n          isVisible={shouldShowCallModal}\n          hideModal={hideModalAction}\n          organizations={userOrganizations}\n        />\n        <ScreenActionModal\n          isVisible={shouldShowTipCreatedModal}\n          title={formatMessage(messages.tipCreatedTitle, {\n            organizationName: tipCreatedData.organizationName,\n          })}\n          message={\n            <>\n              <Message>{formatMessage(messages.tipCreatedMessage)}</Message>\n              <AcknowledgmentText>\n                {formatMessage(messages.acknowledgment)}\n              </AcknowledgmentText>\n            </>\n          }\n          actionText={formatMessage(messages.seeMyTip)}\n          onAction={goToTipDetail}\n          onHide={\n            createTipMode !== CreateTipMode.Chat\n              ? hideTipCreatedModalAction\n              : noop\n          }\n        />\n      </SafeAreaContainer>\n    </>\n  ) : null;\n};\n\nexport default withNavigationFocus(VideoRecordScreen);\n"],"mappings":"AAAA;AACA,SACEA,SAAS,EACTC,cAAc,EACdC,gBAAgB,EAChBC,iBAAiB,EACjBC,iBAAiB,EACjBC,SAAS,QACJ,2BAA2B;AAClC,SAASC,aAAa,QAAQ,2CAA2C;AACzE,SAASC,8BAA8B,QAAQ,yCAAyC;AACxF,SAASC,eAAe,QAAQ,4DAA4D;AAC5F,OAAOC,OAAO,MAAM,4DAA4D;AAChF,SAASC,sBAAsB,QAAQ,8DAA8D;AACrG,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,KAAK,IAAQC,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC3E,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,SAAS,QAAQ,cAAc;AAExC,SAASC,YAAY,QAAQ,0BAA0B;AACvD,SAASC,mBAAmB,QAAQ,kBAAkB;AACtD,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,SAAS,EAAEC,WAAW,QAAQ,4BAA4B;AACnE,OAAOC,gBAAgB,MAAM,iCAAiC;AAC9D,SAASC,wBAAwB,QAAQ,iCAAiC;AAE1E,SACEC,cAAc,EACdC,UAAU,QACL,yCAAyC;AAChD,SAASC,uBAAuB,QAAQ,2CAA2C;AACnF,SAASC,SAAS,QAAQ,uCAAuC;AACjE,SAASC,gCAAgC,QAAQ,qCAAqC;AACtF,SAASC,iCAAiC,QAAQ,uCAAuC;AACzF,SACEC,wBAAwB,EACxBC,4BAA4B,EAC5BC,2BAA2B,EAC3BC,aAAa,EACbC,mBAAmB,EACnBC,mBAAmB,EACnBC,aAAa,EACbC,uBAAuB,EACvBC,mBAAmB,EACnBC,kBAAkB,QACb,WAAW;AAClB,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,OAAOC,QAAQ,MAAM,YAAY;AACjC,SACEC,uBAAuB,EACvBC,6BAA6B,EAC7BC,6BAA6B,EAC7BC,sCAAsC,EACtCC,6BAA6B,EAC7BC,kCAAkC,EAClCC,mCAAmC,EACnCC,mCAAmC,EACnCC,wBAAwB,EACxBC,wBAAwB,EACxBC,2BAA2B,QACtB,aAAa;AACpB,SACEC,kBAAkB,EAClBC,0BAA0B,EAC1BC,wBAAwB,EACxBC,OAAO,EACPC,kBAAkB,QACb,UAAU;AACjB,SAASC,aAAa,QAAQ,SAAS;AAAC,IAMnCC,gBAAgB,0BAAhBA,gBAAgB;EAAhBA,gBAAgB,CAAhBA,gBAAgB;EAAhBA,gBAAgB,CAAhBA,gBAAgB;EAAhBA,gBAAgB,CAAhBA,gBAAgB;EAAA,OAAhBA,gBAAgB;AAAA,EAAhBA,gBAAgB;AAKrB,MAAMC,iBAA4B,GAAGA,CAAC;EAAEC;AAAU,CAAC,KAAK;EACtD,MAAM;IAAEC;EAAc,CAAC,GAAGhD,OAAO,CAAC,CAAC;EAEnC,MAAM,CAACiD,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnD,QAAQ,CACtD8C,gBAAgB,CAACM,QACnB,CAAC;EAED,MAAMC,cAAc,GAAG9C,WAAW,CAAChB,8BAA8B,CAAC,CAAC,CAAC;EACpE,MAAM+D,wBAAwB,GAAG/C,WAAW,CAC1C2B,kCAAkC,CAAC,CACrC,CAAC;EACD,MAAMqB,4BAA4B,GAAGhD,WAAW,CAC9CyB,sCAAsC,CAAC,CACzC,CAAC;EACD,MAAMwB,iBAAiB,GAAGjD,WAAW,CAACgC,2BAA2B,CAAC,CAAC,CAAC;EACpE,MAAMkB,mBAAmB,GAAGlD,WAAW,CAAC0B,6BAA6B,CAAC,CAAC,CAAC;EACxE,MAAMyB,uBAAuB,GAAGnD,WAAW,CACzCQ,iCAAiC,CAAC,CACpC,CAAC;EACD,MAAM4C,yBAAyB,GAAGpD,WAAW,CAC3C6B,mCAAmC,CAAC,CACtC,CAAC;EACD,MAAMwB,cAAc,GAAGrD,WAAW,CAAC8B,wBAAwB,CAAC,CAAC,CAAC;EAC9D,MAAMwB,YAAY,GAAGtD,WAAW,CAACb,sBAAsB,CAAC,CAAC,CAAC;EAC1D,MAAMoE,mBAAmB,GAAGvD,WAAW,CAACuB,6BAA6B,CAAC,CAAC,CAAC;EACxE,MAAMiC,cAAc,GAAGxD,WAAW,CAAC+B,wBAAwB,CAAC,CAAC,CAAC;EAC9D,MAAM0B,aAAa,GAAGzD,WAAW,CAACsB,uBAAuB,CAAC,CAAC,CAAC;EAC5D,MAAMoC,aAAa,GAAG1D,WAAW,CAACK,uBAAuB,CAAC,CAAC,CAAC;EAC5D,MAAMsD,mBAAmB,GAAG3D,WAAW,CAACwB,6BAA6B,CAAC,CAAC,CAAC;EACxE,MAAMoC,yBAAyB,GAAG5D,WAAW,CAC3C4B,mCAAmC,CAAC,CACtC,CAAC;EAED,MAAMiC,wBAAwB,GAAG9D,SAAS,CAACmB,kBAAkB,CAAC;EAC9D,MAAM4C,qBAAqB,GAAG/D,SAAS,CAACd,eAAe,CAAC;EACxD,MAAM8E,0BAA0B,GAAGhE,SAAS,CAACY,2BAA2B,CAAC;EACzE,MAAMqD,6BAA6B,GAAGjE,SAAS,CAACiB,uBAAuB,CAAC;EACxE,MAAMiD,mBAAmB,GAAGlE,SAAS,CAACgB,aAAa,CAAC;EACpD,MAAMmD,eAAe,GAAGnE,SAAS,CAACa,aAAa,CAAC;EAChD,MAAMuD,sCAAsC,GAAGpE,SAAS,CACtDQ,gCACF,CAAC;EACD,MAAM6D,yBAAyB,GAAGrE,SAAS,CAACe,mBAAmB,CAAC;EAChE,MAAMuD,uBAAuB,GAAGtE,SAAS,CAACU,wBAAwB,CAAC;EACnE,MAAM6D,oBAAoB,GAAGvE,SAAS,CAACI,cAAc,CAAC;EACtD,MAAMoE,gBAAgB,GAAGxE,SAAS,CAACK,UAAU,CAAC;EAC9C,MAAMoE,kCAAkC,GAAGzE,SAAS,CAClDW,4BACF,CAAC;EACD,MAAM+D,yBAAyB,GAAG1E,SAAS,CAACc,mBAAmB,CAAC;EAChE,MAAM6D,yBAAyB,GAAG3E,SAAS,CAACkB,mBAAmB,CAAC;EAEhE,MAAM0D,SAAS,GAAGnF,MAAM,CAAW,IAAI,CAAC;EAExCD,SAAS,CAAC,MAAM;IACd;IACA,IAAIyD,4BAA4B,EAAE;MAChCyB,yBAAyB,CAAC,CAAC;MAC3BX,qBAAqB,CAAC;QACpBc,UAAU,EAAElC,aAAa,CAACrB,QAAQ,CAACwD,QAAQ,CAAC;QAC5CC,MAAM,EAAEd,6BAA6B;QACrCe,MAAM,EAAEZ,sCAAsC;QAC9Ca,OAAO,EAAE7B;MACX,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CACDsB,yBAAyB,EACzBtB,uBAAuB,EACvBH,4BAA4B,CAC7B,CAAC;EAEF,MAAMiC,2BAA2B,GAAGA,CAAA,KAAM;IACxC/E,wBAAwB,CAAC,CAAC,CACvBgF,IAAI,CAAC,MAAM;MACVtC,mBAAmB,CAACL,gBAAgB,CAAC4C,OAAO,CAAC;IAC/C,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;MACXxC,mBAAmB,CAACL,gBAAgB,CAAC8C,OAAO,CAAC;IAC/C,CAAC,CAAC;EACN,CAAC;EAED9F,SAAS,CAAC,MAAM;IACd,IAAIkD,SAAS,EAAE;MACbwC,2BAA2B,CAAC,CAAC;MAC7BlB,0BAA0B,CAAC,CAAC;MAC5BQ,gBAAgB,CAAC,CAAC;MAClBD,oBAAoB,CAAC;QAAEgB,SAAS,EAAEhF,SAAS,CAACiF,MAAM;QAAEC,MAAM,EAAE;MAAM,CAAC,CAAC;IACtE;EACF,CAAC,EAAE,CAAC/C,SAAS,CAAC,CAAC;EAEflD,SAAS,CAAC,MAAM;IACd,IAAImE,aAAa,EAAE;MACjBc,kCAAkC,CAACd,aAAa,CAAC+B,YAAY,CAAC;IAChE;EACF,CAAC,EAAE,CAAC/B,aAAa,CAAC,CAAC;EAEnB,MAAMgC,UAAU,GAAGpG,WAAW,CAAC,MAAM;IAAA,IAAAqG,kBAAA;IACnC,CAAAA,kBAAA,GAAAhB,SAAS,CAACiB,OAAO,cAAAD,kBAAA,eAAjBA,kBAAA,CAAmBE,YAAY,CAAC,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,WAAW,GAAGxG,WAAW,CAAC,MAAM;IAAA,IAAAyG,mBAAA;IACpC,CAAAA,mBAAA,GAAApB,SAAS,CAACiB,OAAO,cAAAG,mBAAA,eAAjBA,mBAAA,CAAmBC,aAAa,CAAC,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,gBAAgB,GAAG3G,WAAW,CAAE4G,QAAgB,IAAK;IACzDrC,wBAAwB,CAACqC,QAAQ,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,aAAa,GAAG7G,WAAW,CAAC,MAAM;IACtC8E,yBAAyB,CAAC,CAAC;IAC3BnE,gBAAgB,CAACmG,QAAQ,CAAClH,OAAO,CAACmH,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;MACrDC,QAAQ,EAAEnD,cAAc,CAACmD,QAAQ;MACjCC,QAAQ,EAAEhD,aAAa,KAAKnB,aAAa,CAACoE;IAC5C,CAAC,CAAC;EACJ,CAAC,EAAE,CAACrD,cAAc,EAAEI,aAAa,CAAC,CAAC;EAEnC,MAAMkD,iBAAiB,GAAGrH,WAAW,CAAC,MAAM;IAC1CmF,yBAAyB,CAAC,CAAC;IAC3BxE,gBAAgB,CAACmG,QAAQ,CAAClH,OAAO,CAACmH,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;MACrDC,QAAQ,EAAE9C;IACZ,CAAC,CAAC;EACJ,CAAC,EAAE,CAACe,yBAAyB,EAAEf,aAAa,CAAC,CAAC;EAE9C,MAAMkD,qBAAqB,GAAGtH,WAAW,CAAC,MAAM;IAC9CmF,yBAAyB,CAAC,CAAC;EAC7B,CAAC,EAAE,CAACA,yBAAyB,CAAC,CAAC;EAE/B,MAAMoC,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAIlE,gBAAgB,KAAKJ,gBAAgB,CAACM,QAAQ,EAAE;MAClD,oBACExD,KAAA,CAAAyH,aAAA,CAACnI,gBAAgB;QACfoI,OAAO,EAAErE,aAAa,CAACrB,QAAQ,CAAC2F,mBAAmB;MAAE,CACtD,CAAC;IAEN;IACA,IAAIrE,gBAAgB,KAAKJ,gBAAgB,CAAC4C,OAAO,EAAE;MACjD,oBACE9F,KAAA,CAAAyH,aAAA,CAACzE,kBAAkB,qBACjBhD,KAAA,CAAAyH,aAAA,CAAChI,SAAS;QACRmI,eAAe,EAAEhE,iBAAiB,CAACiE,MAAM,GAAG,CAAE;QAC9CC,aAAa,EAAEpI,aAAa,CAACqI,MAAO;QACpCtE,cAAc,EAAEA,cAAe;QAC/BuE,GAAG,EAAE1C,SAAU;QACflC,SAAS,EAAEA,SAAU;QACrB6E,cAAc,EACZ,CAAC,CAAChE,YAAY,IACdC,mBAAmB,IACnBC,cAAc,IACdP,iBAAiB,CAACiE,MAAM,KAAK,CAC9B;QACDK,eAAe,EAAEX,qBAAsB;QACvCX,gBAAgB,EAAEA,gBAAiB;QACnCuB,YAAY,EAAEvD,mBAAoB;QAClCwD,WAAW,EAAEpD;MAAwB,CACtC,CAAC,eACFhF,KAAA,CAAAyH,aAAA,CAAC1F,eAAe;QACdsG,MAAM,EAAEf,iBAAkB;QAC1BgB,SAAS,EAAE/D,yBAAyB,IAAI,CAAC,CAACF,aAAc;QACxDkE,SAAS,EAAEnD,yBAA0B;QACrC+B,QAAQ,EAAE9C,aAAc;QACxB+B,YAAY,EAAE9B;MAAoB,CACnC,CACiB,CAAC;IAEzB;IACA,IAAIhB,gBAAgB,KAAKJ,gBAAgB,CAAC8C,OAAO,EAAE;MACjD,oBACEhG,KAAA,CAAAyH,aAAA,CAAC5E,0BAA0B,qBACzB7C,KAAA,CAAAyH,aAAA,CAAC3E,wBAAwB,QACtBO,aAAa,CAACrB,QAAQ,CAACwG,yBAAyB,CACzB,CAAC,eAC3BxI,KAAA,CAAAyH,aAAA,CAACpI,cAAc;QACboJ,IAAI,EACFhI,SAAS,GACL4C,aAAa,CAACrB,QAAQ,CAAC0G,QAAQ,CAAC,GAChCrF,aAAa,CAACrB,QAAQ,CAACzB,YAAY,CACxC;QACDoI,OAAO,EAAElI,SAAS,GAAGmF,2BAA2B,GAAGrF;MAAa,CACjE,CACyB,CAAC;IAEjC;IACA,OAAO,IAAI;EACb,CAAC;EAED,OAAO6C,SAAS,gBACdpD,KAAA,CAAAyH,aAAA,CAAAzH,KAAA,CAAA4I,QAAA,qBACE5I,KAAA,CAAAyH,aAAA,CAACnH,SAAS;IAACuI,QAAQ,EAAC,cAAc;IAACC,eAAe,EAAC;EAAO,CAAE,CAAC,eAC7D9I,KAAA,CAAAyH,aAAA,CAAClI,iBAAiB,QACfiI,YAAY,CAAC,CAAC,eACfxH,KAAA,CAAAyH,aAAA,CAAC3F,cAAc;IACbiH,MAAM,EAAE1C,UAAW;IACnB2C,MAAM,EAAEvC,WAAY;IACpBwC,UAAU,EAAE5D,yBAA0B;IACtCiD,SAAS,EAAE5E;EAAyB,CACrC,CAAC,eACF1D,KAAA,CAAAyH,aAAA,CAACrI,SAAS;IACR2J,MAAM,EAAE1C,UAAW;IACnB2C,MAAM,EAAEvC,WAAY;IACpB6B,SAAS,EAAEzE,mBAAoB;IAC/B0E,SAAS,EAAE1D,eAAgB;IAC3BqE,aAAa,EAAEtF;EAAkB,CAClC,CAAC,eACF5D,KAAA,CAAAyH,aAAA,CAACjI,iBAAiB;IAChB8I,SAAS,EAAEvE,yBAA0B;IACrCoF,KAAK,EAAE9F,aAAa,CAACrB,QAAQ,CAACoH,eAAe,EAAE;MAC7CC,gBAAgB,EAAErF,cAAc,CAACqF;IACnC,CAAC,CAAE;IACH3B,OAAO,eACL1H,KAAA,CAAAyH,aAAA,CAAAzH,KAAA,CAAA4I,QAAA,qBACE5I,KAAA,CAAAyH,aAAA,CAAC1E,OAAO,QAAEM,aAAa,CAACrB,QAAQ,CAACsH,iBAAiB,CAAW,CAAC,eAC9DtJ,KAAA,CAAAyH,aAAA,CAAC7E,kBAAkB,QAChBS,aAAa,CAACrB,QAAQ,CAACuH,cAAc,CACpB,CACpB,CACH;IACDhE,UAAU,EAAElC,aAAa,CAACrB,QAAQ,CAACwH,QAAQ,CAAE;IAC7CC,QAAQ,EAAE3C,aAAc;IACxBkC,MAAM,EACJ5E,aAAa,KAAKnB,aAAa,CAACoE,IAAI,GAChCtC,yBAAyB,GACzBhF;EACL,CACF,CACgB,CACnB,CAAC,GACD,IAAI;AACV,CAAC;AAED,eAAeS,mBAAmB,CAAC2C,iBAAiB,CAAC","ignoreList":[]}