{"version":3,"names":["AsyncStorage","api","clearIncidentEscortData","clearPassiveEscortData","LogErrorToDb","Screens","HistoryType","IncidentEscortState","PassiveEscortAction","Vibration","NativeModules","call","delay","put","select","takeLatest","handleError","convertLocationToGeoPoint","NavigatorService","SET_BEACON_DETAILS","BEACON_CONNECTED","isAndroid","PushNotification","getTipsRequest","resetState","TipStatus","clearDataAndGoBack","handleErrorFailure","hidePanicInfo","hideSafeModal","imSafeFailure","imSafeSuccess","sendMessageSuccess","startChatFailure","startChatSuccess","APP_STATE_STATUS_CHANGE","CLEAR_DATA_AND_GO_BACK","ENTER_PANIC_MODE","EXIT_PANIC_MODE","IM_SAFE_REQUEST","PANIC_MODE_KEY","SEND_MESSAGE_REQUEST","SHOW_PANIC_INFO","START_CHAT_REQUEST","TOGGLE_RECORD_TYPE","makeSelectFromPassiveEscort","makeSelectRecordType","PanicMode","startChat","payload","_payload$id","messages","twilio","getMessages","id","toString","error","sendMessage","incidentEscort","location","message","_geocodeResponse$data","_incidentEscort$id","geocodeResponse","user","getAddress","coords","latitude","longitude","address","data","results","formatted_address","geoPoint","messageAttributes","text","parsedError","errorLog","source","raw","JSON","stringify","imSafe","incidents","updateEscortState","state","Safe","comment","clearDataAngGoBack","fromPassive","navigate","Home","Escort","Countdown","cancelAllLocalNotifications","getItem","then","beacons","value","parse","Bluetooth","cancelAckDevice","EscortType","tipStatus","Active","paging","Closed","delayHidePanicInfo","enterPanicMode","vibrate","Panic","setItem","exitPanicMode","cancel","updatePassiveEscortLog","action","PanicExited","Inactive","appStateStatusChange","Background","err","logRecordToggle","recordType","history","type","title","updateIncidentChatHistory","escortRecordScreenSaga"],"sources":["saga.ts"],"sourcesContent":["/* eslint-disable no-empty */\n/**\n *\n * RecordScreen saga\n *\n */\n\n import AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as api from '../../../../../api';\nimport { AxiosResponse } from 'axios';\nimport {\n  clearIncidentEscortData,\n  clearPassiveEscortData,\n  LogErrorToDb,\n} from '../../../../../containers/app/actions';\nimport Screens from '../../../../../containers/providers/RoutesProvider/screens';\nimport {\n  ErrorLog,\n  GeoPoint,\n  History,\n  HistoryType,\n  IncidentEscortState,\n  PassiveEscortAction,\n} from 'incident-code-core';\nimport { Vibration, NativeModules } from 'react-native';\nimport { IMessage as GiftedChatMessage } from 'react-native-gifted-chat';\nimport { call, delay, put, select, takeLatest } from 'redux-saga/effects';\nimport { GeocodeResponse } from 'types';\nimport { handleError } from '../../../../../utils/error';\nimport { convertLocationToGeoPoint } from '../../../../../utils/location';\nimport NavigatorService from '../../../../../utils/navigation';\nimport { SET_BEACON_DETAILS, BEACON_CONNECTED } from '../../../../../containers/screens/Home/Settings/constants';\nimport { isAndroid } from '../../../../../utils/device';\nimport PushNotification from 'react-native-push-notification';\n\nimport {\n  getTipsRequest,\n  resetState,\n} from '../../../Menu/Tips/MyTipsScreen/actions';\nimport { TipStatus } from '../../../Menu/Tips/MyTipsScreen/types';\nimport {\n  clearDataAndGoBack,\n  handleErrorFailure,\n  hidePanicInfo,\n  hideSafeModal,\n  imSafeFailure,\n  imSafeSuccess,\n  sendMessageSuccess,\n  startChatFailure,\n  startChatSuccess,\n} from './actions';\nimport {\n  APP_STATE_STATUS_CHANGE,\n  CLEAR_DATA_AND_GO_BACK,\n  ENTER_PANIC_MODE,\n  EXIT_PANIC_MODE,\n  IM_SAFE_REQUEST,\n  PANIC_MODE_KEY,\n  SEND_MESSAGE_REQUEST,\n  SHOW_PANIC_INFO,\n  START_CHAT_REQUEST,\n  TOGGLE_RECORD_TYPE,\n} from './constants';\nimport { makeSelectFromPassiveEscort, makeSelectRecordType } from './selectors';\nimport {\n  AppStateStatusChangeAction,\n  ClearDataAndGoBackAction,\n  EnterPanicModeAction,\n  ExitPanicModeAction,\n  ImSafeRequestAction,\n  PanicMode,\n  SendMessageRequestAction,\n  StartChatRequestAction,\n  ToggleRecordTypeAction,\n} from './types';\n\nfunction* startChat({ payload }: StartChatRequestAction) {\n  try {\n    const messages: GiftedChatMessage[] = yield call(\n      api.twilio.getMessages,\n      payload.id?.toString() || '',\n    );\n    yield put(startChatSuccess(messages));\n  } catch (error: any) {\n    yield put(startChatFailure(handleError(error)));\n  }\n}\n\nfunction* sendMessage({\n  payload: { incidentEscort, location, message },\n}: SendMessageRequestAction) {\n  try {\n    const geocodeResponse: AxiosResponse<GeocodeResponse> = yield call(\n      api.user.getAddress,\n      location.coords.latitude,\n      location.coords.longitude,\n    );\n    const address = geocodeResponse.data.results[0]?.formatted_address || '';\n    const geoPoint: GeoPoint = yield call(convertLocationToGeoPoint, location);\n    const messageAttributes = {\n      location: geoPoint,\n      address,\n    };\n    yield call(\n      api.twilio.sendMessage,\n      incidentEscort.id?.toString() || '',\n      message.text,\n      messageAttributes,\n    );\n    yield put(sendMessageSuccess()); // this isn't doing anything\n  } catch (error: any) {\n    const parsedError = handleError(error);\n    const errorLog: ErrorLog = {\n      source: 'Send Message error',\n      message: parsedError.message,\n      raw: JSON.stringify(error),\n    };\n    yield put(LogErrorToDb(errorLog));\n  }\n}\n\nfunction* imSafe({ payload }: ImSafeRequestAction) {\n  //(\"payload1:\" + JSON.stringify(payload));\n  try {\n    //(\"URL1:\" + api.incidents.updateEscortState)\n    //(\"payload.incidentEscort.id1:\" + payload.incidentEscort.id)\n    //(\"State1:\" + IncidentEscortState.Safe);\n    yield call(api.incidents.updateEscortState, payload.incidentEscort.id, {\n      state: IncidentEscortState.Safe,\n      comment: payload.comment,\n    });\n    yield put(clearDataAndGoBack(payload.incidentEscort.id));\n  } catch (error: any) {\n    yield put(imSafeFailure(handleError(error)));\n  }\n}\n\nfunction* clearDataAngGoBack({ payload }: ClearDataAndGoBackAction): any {\n  yield put(clearIncidentEscortData());\n  yield put(hideSafeModal());\n  yield delay(300);\n  const fromPassive = yield select(makeSelectFromPassiveEscort());\n  if (fromPassive && payload) {\n    yield call(NavigatorService.navigate, Screens.Home.Escort.Countdown, {\n      id: payload,\n    });\n  } else {\n    yield put(clearPassiveEscortData());\n    PushNotification.cancelAllLocalNotifications();\n    AsyncStorage.getItem(SET_BEACON_DETAILS).then((beacons) => {\n      if (beacons) {\n        AsyncStorage.getItem(BEACON_CONNECTED).then((value) => {\n          if (value !== null) {\n            if (JSON.parse(value) === true) {\n              if (isAndroid)\n                NativeModules.Bluetooth.cancelAckDevice(JSON.parse(beacons).address);\n            }\n          }\n\n        });\n      }\n    });\n    yield call(NavigatorService.navigate, Screens.Home.Escort.EscortType);\n  }\n  yield put(imSafeSuccess());\n  yield delay(2000);\n  yield put(resetState());\n  yield put(getTipsRequest({ tipStatus: TipStatus.Active, paging: false }));\n  yield put(getTipsRequest({ tipStatus: TipStatus.Closed, paging: false }));\n}\n\nfunction* delayHidePanicInfo() {\n  yield delay(4500);\n  yield put(hidePanicInfo());\n}\n\nfunction* enterPanicMode({ payload }: EnterPanicModeAction) {\n  //(\"payload2:\" + JSON.stringify(payload));\n  try {\n    // Vibrates every 5 secs\n    yield call(Vibration.vibrate, [5000, 800], true);\n    yield call(api.incidents.updateEscortState, payload.id, {\n      state: IncidentEscortState.Panic,\n    });\n    yield call(AsyncStorage.setItem, PANIC_MODE_KEY, PanicMode.Active);\n  } catch (error: any) {\n    yield put(handleErrorFailure(handleError(error)));\n  }\n}\n\nfunction* exitPanicMode({ payload }: ExitPanicModeAction): any {\n  const fromPassive = yield select(makeSelectFromPassiveEscort());\n  try {\n    yield call(Vibration.cancel);\n    yield call(api.incidents.updateEscortState, payload.id, {\n      state: IncidentEscortState.Active,\n    });\n    if (fromPassive && payload.id) {\n      yield call(api.incidents.updatePassiveEscortLog, {\n        id: payload.id,\n        action: PassiveEscortAction.PanicExited,\n      });\n    }\n    yield call(AsyncStorage.setItem, PANIC_MODE_KEY, PanicMode.Inactive);\n  } catch (error: any) {\n    yield put(handleErrorFailure(handleError(error)));\n  }\n}\n\nfunction* appStateStatusChange({ payload }: AppStateStatusChangeAction) {\n  //(\"payload4:\" + JSON.stringify(payload));\n  try {\n    const { state, incidentEscort } = payload;\n    //(\"URL4:\" + api.incidents.updateEscortState)\n    //(\"payload.incidentEscort.id4:\" + payload.incidentEscort.id)\n    //(\"State4:\" + state);\n    if (state === 'background') {\n      yield call(api.incidents.updateEscortState, incidentEscort.id, {\n        state: IncidentEscortState.Background,\n      });\n    }\n    if (state === 'active') {\n      yield call(api.incidents.updateEscortState, incidentEscort.id, {\n        state: IncidentEscortState.Active,\n      });\n    }\n  } catch (err: any) {\n    yield put(handleErrorFailure(handleError(err)));\n  }\n}\n\nfunction* logRecordToggle({ payload }: ToggleRecordTypeAction): any {\n  try {\n    if (!payload.id) {\n      return;\n    }\n    const recordType = yield select(makeSelectRecordType());\n    const history: History = {\n      id: payload.id,\n      type: HistoryType.Escort,\n      title: `switched media to ${recordType}`,\n    };\n    yield call(api.incidents.updateIncidentChatHistory, payload.id, history);\n  } catch (error: any) {\n    yield put(handleErrorFailure(handleError(error)));\n  }\n}\n\nexport default function* escortRecordScreenSaga() {\n  yield takeLatest(START_CHAT_REQUEST, startChat);\n  yield takeLatest(SEND_MESSAGE_REQUEST, sendMessage);\n  yield takeLatest(IM_SAFE_REQUEST, imSafe);\n  yield takeLatest(SHOW_PANIC_INFO, delayHidePanicInfo);\n  yield takeLatest(ENTER_PANIC_MODE, enterPanicMode);\n  yield takeLatest(EXIT_PANIC_MODE, exitPanicMode);\n  yield takeLatest(APP_STATE_STATUS_CHANGE, appStateStatusChange);\n  yield takeLatest(CLEAR_DATA_AND_GO_BACK, clearDataAngGoBack);\n  yield takeLatest(TOGGLE_RECORD_TYPE, logRecordToggle);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEC,OAAOA,YAAY,MAAM,2CAA2C;AACrE,OAAO,KAAKC,GAAG,MAAM,oBAAoB;AAEzC,SACEC,uBAAuB,EACvBC,sBAAsB,EACtBC,YAAY,QACP,uCAAuC;AAC9C,OAAOC,OAAO,MAAM,4DAA4D;AAChF,SAIEC,WAAW,EACXC,mBAAmB,EACnBC,mBAAmB,QACd,oBAAoB;AAC3B,SAASC,SAAS,EAAEC,aAAa,QAAQ,cAAc;AAEvD,SAASC,IAAI,EAAEC,KAAK,EAAEC,GAAG,EAAEC,MAAM,EAAEC,UAAU,QAAQ,oBAAoB;AAEzE,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,yBAAyB,QAAQ,+BAA+B;AACzE,OAAOC,gBAAgB,MAAM,iCAAiC;AAC9D,SAASC,kBAAkB,EAAEC,gBAAgB,QAAQ,2DAA2D;AAChH,SAASC,SAAS,QAAQ,6BAA6B;AACvD,OAAOC,gBAAgB,MAAM,gCAAgC;AAE7D,SACEC,cAAc,EACdC,UAAU,QACL,yCAAyC;AAChD,SAASC,SAAS,QAAQ,uCAAuC;AACjE,SACEC,kBAAkB,EAClBC,kBAAkB,EAClBC,aAAa,EACbC,aAAa,EACbC,aAAa,EACbC,aAAa,EACbC,kBAAkB,EAClBC,gBAAgB,EAChBC,gBAAgB,QACX,WAAW;AAClB,SACEC,uBAAuB,EACvBC,sBAAsB,EACtBC,gBAAgB,EAChBC,eAAe,EACfC,eAAe,EACfC,cAAc,EACdC,oBAAoB,EACpBC,eAAe,EACfC,kBAAkB,EAClBC,kBAAkB,QACb,aAAa;AACpB,SAASC,2BAA2B,EAAEC,oBAAoB,QAAQ,aAAa;AAC/E,SAMEC,SAAS,QAIJ,SAAS;AAEhB,UAAUC,SAASA,CAAC;EAAEC;AAAgC,CAAC,EAAE;EACvD,IAAI;IAAA,IAAAC,WAAA;IACF,MAAMC,QAA6B,GAAG,MAAMxC,IAAI,CAC9CV,GAAG,CAACmD,MAAM,CAACC,WAAW,EACtB,EAAAH,WAAA,GAAAD,OAAO,CAACK,EAAE,cAAAJ,WAAA,uBAAVA,WAAA,CAAYK,QAAQ,CAAC,CAAC,KAAI,EAC5B,CAAC;IACD,MAAM1C,GAAG,CAACqB,gBAAgB,CAACiB,QAAQ,CAAC,CAAC;EACvC,CAAC,CAAC,OAAOK,KAAU,EAAE;IACnB,MAAM3C,GAAG,CAACoB,gBAAgB,CAACjB,WAAW,CAACwC,KAAK,CAAC,CAAC,CAAC;EACjD;AACF;AAEA,UAAUC,WAAWA,CAAC;EACpBR,OAAO,EAAE;IAAES,cAAc;IAAEC,QAAQ;IAAEC;EAAQ;AACrB,CAAC,EAAE;EAC3B,IAAI;IAAA,IAAAC,qBAAA,EAAAC,kBAAA;IACF,MAAMC,eAA+C,GAAG,MAAMpD,IAAI,CAChEV,GAAG,CAAC+D,IAAI,CAACC,UAAU,EACnBN,QAAQ,CAACO,MAAM,CAACC,QAAQ,EACxBR,QAAQ,CAACO,MAAM,CAACE,SAClB,CAAC;IACD,MAAMC,OAAO,GAAG,EAAAR,qBAAA,GAAAE,eAAe,CAACO,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,cAAAV,qBAAA,uBAA/BA,qBAAA,CAAiCW,iBAAiB,KAAI,EAAE;IACxE,MAAMC,QAAkB,GAAG,MAAM9D,IAAI,CAACM,yBAAyB,EAAE0C,QAAQ,CAAC;IAC1E,MAAMe,iBAAiB,GAAG;MACxBf,QAAQ,EAAEc,QAAQ;MAClBJ;IACF,CAAC;IACD,MAAM1D,IAAI,CACRV,GAAG,CAACmD,MAAM,CAACK,WAAW,EACtB,EAAAK,kBAAA,GAAAJ,cAAc,CAACJ,EAAE,cAAAQ,kBAAA,uBAAjBA,kBAAA,CAAmBP,QAAQ,CAAC,CAAC,KAAI,EAAE,EACnCK,OAAO,CAACe,IAAI,EACZD,iBACF,CAAC;IACD,MAAM7D,GAAG,CAACmB,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;EACnC,CAAC,CAAC,OAAOwB,KAAU,EAAE;IACnB,MAAMoB,WAAW,GAAG5D,WAAW,CAACwC,KAAK,CAAC;IACtC,MAAMqB,QAAkB,GAAG;MACzBC,MAAM,EAAE,oBAAoB;MAC5BlB,OAAO,EAAEgB,WAAW,CAAChB,OAAO;MAC5BmB,GAAG,EAAEC,IAAI,CAACC,SAAS,CAACzB,KAAK;IAC3B,CAAC;IACD,MAAM3C,GAAG,CAACT,YAAY,CAACyE,QAAQ,CAAC,CAAC;EACnC;AACF;AAEA,UAAUK,MAAMA,CAAC;EAAEjC;AAA6B,CAAC,EAAE;EACjD;EACA,IAAI;IACF;IACA;IACA;IACA,MAAMtC,IAAI,CAACV,GAAG,CAACkF,SAAS,CAACC,iBAAiB,EAAEnC,OAAO,CAACS,cAAc,CAACJ,EAAE,EAAE;MACrE+B,KAAK,EAAE9E,mBAAmB,CAAC+E,IAAI;MAC/BC,OAAO,EAAEtC,OAAO,CAACsC;IACnB,CAAC,CAAC;IACF,MAAM1E,GAAG,CAACa,kBAAkB,CAACuB,OAAO,CAACS,cAAc,CAACJ,EAAE,CAAC,CAAC;EAC1D,CAAC,CAAC,OAAOE,KAAU,EAAE;IACnB,MAAM3C,GAAG,CAACiB,aAAa,CAACd,WAAW,CAACwC,KAAK,CAAC,CAAC,CAAC;EAC9C;AACF;AAEA,UAAUgC,kBAAkBA,CAAC;EAAEvC;AAAkC,CAAC,EAAO;EACvE,MAAMpC,GAAG,CAACX,uBAAuB,CAAC,CAAC,CAAC;EACpC,MAAMW,GAAG,CAACgB,aAAa,CAAC,CAAC,CAAC;EAC1B,MAAMjB,KAAK,CAAC,GAAG,CAAC;EAChB,MAAM6E,WAAW,GAAG,MAAM3E,MAAM,CAAC+B,2BAA2B,CAAC,CAAC,CAAC;EAC/D,IAAI4C,WAAW,IAAIxC,OAAO,EAAE;IAC1B,MAAMtC,IAAI,CAACO,gBAAgB,CAACwE,QAAQ,EAAErF,OAAO,CAACsF,IAAI,CAACC,MAAM,CAACC,SAAS,EAAE;MACnEvC,EAAE,EAAEL;IACN,CAAC,CAAC;EACJ,CAAC,MAAM;IACL,MAAMpC,GAAG,CAACV,sBAAsB,CAAC,CAAC,CAAC;IACnCmB,gBAAgB,CAACwE,2BAA2B,CAAC,CAAC;IAC9C9F,YAAY,CAAC+F,OAAO,CAAC5E,kBAAkB,CAAC,CAAC6E,IAAI,CAAEC,OAAO,IAAK;MACzD,IAAIA,OAAO,EAAE;QACXjG,YAAY,CAAC+F,OAAO,CAAC3E,gBAAgB,CAAC,CAAC4E,IAAI,CAAEE,KAAK,IAAK;UACrD,IAAIA,KAAK,KAAK,IAAI,EAAE;YAClB,IAAIlB,IAAI,CAACmB,KAAK,CAACD,KAAK,CAAC,KAAK,IAAI,EAAE;cAC9B,IAAI7E,SAAS,EACXX,aAAa,CAAC0F,SAAS,CAACC,eAAe,CAACrB,IAAI,CAACmB,KAAK,CAACF,OAAO,CAAC,CAAC5B,OAAO,CAAC;YACxE;UACF;QAEF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IACF,MAAM1D,IAAI,CAACO,gBAAgB,CAACwE,QAAQ,EAAErF,OAAO,CAACsF,IAAI,CAACC,MAAM,CAACU,UAAU,CAAC;EACvE;EACA,MAAMzF,GAAG,CAACkB,aAAa,CAAC,CAAC,CAAC;EAC1B,MAAMnB,KAAK,CAAC,IAAI,CAAC;EACjB,MAAMC,GAAG,CAACW,UAAU,CAAC,CAAC,CAAC;EACvB,MAAMX,GAAG,CAACU,cAAc,CAAC;IAAEgF,SAAS,EAAE9E,SAAS,CAAC+E,MAAM;IAAEC,MAAM,EAAE;EAAM,CAAC,CAAC,CAAC;EACzE,MAAM5F,GAAG,CAACU,cAAc,CAAC;IAAEgF,SAAS,EAAE9E,SAAS,CAACiF,MAAM;IAAED,MAAM,EAAE;EAAM,CAAC,CAAC,CAAC;AAC3E;AAEA,UAAUE,kBAAkBA,CAAA,EAAG;EAC7B,MAAM/F,KAAK,CAAC,IAAI,CAAC;EACjB,MAAMC,GAAG,CAACe,aAAa,CAAC,CAAC,CAAC;AAC5B;AAEA,UAAUgF,cAAcA,CAAC;EAAE3D;AAA8B,CAAC,EAAE;EAC1D;EACA,IAAI;IACF;IACA,MAAMtC,IAAI,CAACF,SAAS,CAACoG,OAAO,EAAE,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC;IAChD,MAAMlG,IAAI,CAACV,GAAG,CAACkF,SAAS,CAACC,iBAAiB,EAAEnC,OAAO,CAACK,EAAE,EAAE;MACtD+B,KAAK,EAAE9E,mBAAmB,CAACuG;IAC7B,CAAC,CAAC;IACF,MAAMnG,IAAI,CAACX,YAAY,CAAC+G,OAAO,EAAEvE,cAAc,EAAEO,SAAS,CAACyD,MAAM,CAAC;EACpE,CAAC,CAAC,OAAOhD,KAAU,EAAE;IACnB,MAAM3C,GAAG,CAACc,kBAAkB,CAACX,WAAW,CAACwC,KAAK,CAAC,CAAC,CAAC;EACnD;AACF;AAEA,UAAUwD,aAAaA,CAAC;EAAE/D;AAA6B,CAAC,EAAO;EAC7D,MAAMwC,WAAW,GAAG,MAAM3E,MAAM,CAAC+B,2BAA2B,CAAC,CAAC,CAAC;EAC/D,IAAI;IACF,MAAMlC,IAAI,CAACF,SAAS,CAACwG,MAAM,CAAC;IAC5B,MAAMtG,IAAI,CAACV,GAAG,CAACkF,SAAS,CAACC,iBAAiB,EAAEnC,OAAO,CAACK,EAAE,EAAE;MACtD+B,KAAK,EAAE9E,mBAAmB,CAACiG;IAC7B,CAAC,CAAC;IACF,IAAIf,WAAW,IAAIxC,OAAO,CAACK,EAAE,EAAE;MAC7B,MAAM3C,IAAI,CAACV,GAAG,CAACkF,SAAS,CAAC+B,sBAAsB,EAAE;QAC/C5D,EAAE,EAAEL,OAAO,CAACK,EAAE;QACd6D,MAAM,EAAE3G,mBAAmB,CAAC4G;MAC9B,CAAC,CAAC;IACJ;IACA,MAAMzG,IAAI,CAACX,YAAY,CAAC+G,OAAO,EAAEvE,cAAc,EAAEO,SAAS,CAACsE,QAAQ,CAAC;EACtE,CAAC,CAAC,OAAO7D,KAAU,EAAE;IACnB,MAAM3C,GAAG,CAACc,kBAAkB,CAACX,WAAW,CAACwC,KAAK,CAAC,CAAC,CAAC;EACnD;AACF;AAEA,UAAU8D,oBAAoBA,CAAC;EAAErE;AAAoC,CAAC,EAAE;EACtE;EACA,IAAI;IACF,MAAM;MAAEoC,KAAK;MAAE3B;IAAe,CAAC,GAAGT,OAAO;IACzC;IACA;IACA;IACA,IAAIoC,KAAK,KAAK,YAAY,EAAE;MAC1B,MAAM1E,IAAI,CAACV,GAAG,CAACkF,SAAS,CAACC,iBAAiB,EAAE1B,cAAc,CAACJ,EAAE,EAAE;QAC7D+B,KAAK,EAAE9E,mBAAmB,CAACgH;MAC7B,CAAC,CAAC;IACJ;IACA,IAAIlC,KAAK,KAAK,QAAQ,EAAE;MACtB,MAAM1E,IAAI,CAACV,GAAG,CAACkF,SAAS,CAACC,iBAAiB,EAAE1B,cAAc,CAACJ,EAAE,EAAE;QAC7D+B,KAAK,EAAE9E,mBAAmB,CAACiG;MAC7B,CAAC,CAAC;IACJ;EACF,CAAC,CAAC,OAAOgB,GAAQ,EAAE;IACjB,MAAM3G,GAAG,CAACc,kBAAkB,CAACX,WAAW,CAACwG,GAAG,CAAC,CAAC,CAAC;EACjD;AACF;AAEA,UAAUC,eAAeA,CAAC;EAAExE;AAAgC,CAAC,EAAO;EAClE,IAAI;IACF,IAAI,CAACA,OAAO,CAACK,EAAE,EAAE;MACf;IACF;IACA,MAAMoE,UAAU,GAAG,MAAM5G,MAAM,CAACgC,oBAAoB,CAAC,CAAC,CAAC;IACvD,MAAM6E,OAAgB,GAAG;MACvBrE,EAAE,EAAEL,OAAO,CAACK,EAAE;MACdsE,IAAI,EAAEtH,WAAW,CAACsF,MAAM;MACxBiC,KAAK,EAAE,qBAAqBH,UAAU;IACxC,CAAC;IACD,MAAM/G,IAAI,CAACV,GAAG,CAACkF,SAAS,CAAC2C,yBAAyB,EAAE7E,OAAO,CAACK,EAAE,EAAEqE,OAAO,CAAC;EAC1E,CAAC,CAAC,OAAOnE,KAAU,EAAE;IACnB,MAAM3C,GAAG,CAACc,kBAAkB,CAACX,WAAW,CAACwC,KAAK,CAAC,CAAC,CAAC;EACnD;AACF;AAEA,eAAe,UAAUuE,sBAAsBA,CAAA,EAAG;EAChD,MAAMhH,UAAU,CAAC4B,kBAAkB,EAAEK,SAAS,CAAC;EAC/C,MAAMjC,UAAU,CAAC0B,oBAAoB,EAAEgB,WAAW,CAAC;EACnD,MAAM1C,UAAU,CAACwB,eAAe,EAAE2C,MAAM,CAAC;EACzC,MAAMnE,UAAU,CAAC2B,eAAe,EAAEiE,kBAAkB,CAAC;EACrD,MAAM5F,UAAU,CAACsB,gBAAgB,EAAEuE,cAAc,CAAC;EAClD,MAAM7F,UAAU,CAACuB,eAAe,EAAE0E,aAAa,CAAC;EAChD,MAAMjG,UAAU,CAACoB,uBAAuB,EAAEmF,oBAAoB,CAAC;EAC/D,MAAMvG,UAAU,CAACqB,sBAAsB,EAAEoD,kBAAkB,CAAC;EAC5D,MAAMzE,UAAU,CAAC6B,kBAAkB,EAAE6E,eAAe,CAAC;AACvD","ignoreList":[]}