{"version":3,"names":["produce","findIndex","ADD_INCIDENT_VIDEO","ADD_MESSAGE","GET_INCIDENT_FAILURE","GET_INCIDENT_REQUEST","GET_INCIDENT_SUCCESS","GET_INCIDENT_VIDEOS_FAILURE","GET_INCIDENT_VIDEOS_REQUEST","GET_INCIDENT_VIDEOS_SUCCESS","GET_MESSAGES_SUCCESS","HIDE_CALL_MODAL","HIDE_CHAT_MODAL","SHOW_CALL_MODAL","SHOW_CHAT_MODAL","initialState","incident","undefined","incidentVideos","organization","isLoadingVideos","isLoadingIncident","shouldShowCallModal","shouldShowChatModal","messages","tipDetailScreenReducer","draft","action","type","payload","videos","oldIndex","id","splice","push","unshift"],"sources":["reducer.ts"],"sourcesContent":["/* eslint-disable no-case-declarations */\n/**\n *\n * TipDetailScreen reducer\n *\n */\n\nimport produce, { Draft } from 'immer';\nimport findIndex from 'lodash/findIndex';\n\nimport {\n  ADD_INCIDENT_VIDEO,\n  ADD_MESSAGE,\n  GET_INCIDENT_FAILURE,\n  GET_INCIDENT_REQUEST,\n  GET_INCIDENT_SUCCESS,\n  GET_INCIDENT_VIDEOS_FAILURE,\n  GET_INCIDENT_VIDEOS_REQUEST,\n  GET_INCIDENT_VIDEOS_SUCCESS,\n  GET_MESSAGES_SUCCESS,\n  HIDE_CALL_MODAL,\n  HIDE_CHAT_MODAL,\n  SHOW_CALL_MODAL,\n  SHOW_CHAT_MODAL,\n} from './constants';\nimport { TipDetailActionTypes, TipDetailState } from './types';\n\nexport const initialState: TipDetailState = {\n  incident: undefined,\n  incidentVideos: [],\n  organization: {},\n  isLoadingVideos: true,\n  isLoadingIncident: true,\n  shouldShowCallModal: false,\n  shouldShowChatModal: false,\n  messages: [],\n};\n\nconst tipDetailScreenReducer = produce(\n  (draft: Draft<TipDetailState>, action: TipDetailActionTypes) => {\n    switch (action.type) {\n      case GET_INCIDENT_VIDEOS_REQUEST:\n        draft.isLoadingVideos = true;\n        break;\n      case GET_INCIDENT_VIDEOS_SUCCESS:\n        draft.incidentVideos = action.payload.videos;\n        draft.organization = action.payload.organization;\n        draft.isLoadingVideos = false;\n        break;\n      case GET_INCIDENT_VIDEOS_FAILURE:\n        draft.isLoadingVideos = false;\n        break;\n      case GET_INCIDENT_REQUEST:\n        draft.isLoadingIncident = true;\n        break;\n      case GET_INCIDENT_SUCCESS:\n        draft.incident = action.payload;\n        draft.isLoadingIncident = false;\n        break;\n      case GET_INCIDENT_FAILURE:\n        draft.isLoadingIncident = false;\n        break;\n      case SHOW_CALL_MODAL:\n        draft.shouldShowCallModal = true;\n        break;\n      case HIDE_CALL_MODAL:\n        draft.shouldShowCallModal = false;\n        break;\n      case SHOW_CHAT_MODAL:\n        draft.shouldShowChatModal = true;\n        break;\n      case HIDE_CHAT_MODAL:\n        draft.shouldShowChatModal = false;\n        break;\n      case ADD_INCIDENT_VIDEO:\n        const oldIndex = findIndex(draft.incidentVideos, {\n          id: action.payload.id,\n        });\n        if (oldIndex > -1) {\n          draft.incidentVideos.splice(oldIndex, 1);\n        }\n        draft.incidentVideos.push(action.payload);\n        break;\n      case GET_MESSAGES_SUCCESS:\n        draft.messages = action.payload;\n        break;\n      case ADD_MESSAGE:\n        draft.messages.unshift(action.payload);\n        break;\n      default:\n    }\n  },\n  initialState,\n);\n\nexport default tipDetailScreenReducer;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,OAAO,MAAiB,OAAO;AACtC,OAAOC,SAAS,MAAM,kBAAkB;AAExC,SACEC,kBAAkB,EAClBC,WAAW,EACXC,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,EACpBC,2BAA2B,EAC3BC,2BAA2B,EAC3BC,2BAA2B,EAC3BC,oBAAoB,EACpBC,eAAe,EACfC,eAAe,EACfC,eAAe,EACfC,eAAe,QACV,aAAa;AAGpB,OAAO,MAAMC,YAA4B,GAAG;EAC1CC,QAAQ,EAAEC,SAAS;EACnBC,cAAc,EAAE,EAAE;EAClBC,YAAY,EAAE,CAAC,CAAC;EAChBC,eAAe,EAAE,IAAI;EACrBC,iBAAiB,EAAE,IAAI;EACvBC,mBAAmB,EAAE,KAAK;EAC1BC,mBAAmB,EAAE,KAAK;EAC1BC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMC,sBAAsB,GAAGzB,OAAO,CACpC,CAAC0B,KAA4B,EAAEC,MAA4B,KAAK;EAC9D,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKpB,2BAA2B;MAC9BkB,KAAK,CAACN,eAAe,GAAG,IAAI;MAC5B;IACF,KAAKX,2BAA2B;MAC9BiB,KAAK,CAACR,cAAc,GAAGS,MAAM,CAACE,OAAO,CAACC,MAAM;MAC5CJ,KAAK,CAACP,YAAY,GAAGQ,MAAM,CAACE,OAAO,CAACV,YAAY;MAChDO,KAAK,CAACN,eAAe,GAAG,KAAK;MAC7B;IACF,KAAKb,2BAA2B;MAC9BmB,KAAK,CAACN,eAAe,GAAG,KAAK;MAC7B;IACF,KAAKf,oBAAoB;MACvBqB,KAAK,CAACL,iBAAiB,GAAG,IAAI;MAC9B;IACF,KAAKf,oBAAoB;MACvBoB,KAAK,CAACV,QAAQ,GAAGW,MAAM,CAACE,OAAO;MAC/BH,KAAK,CAACL,iBAAiB,GAAG,KAAK;MAC/B;IACF,KAAKjB,oBAAoB;MACvBsB,KAAK,CAACL,iBAAiB,GAAG,KAAK;MAC/B;IACF,KAAKR,eAAe;MAClBa,KAAK,CAACJ,mBAAmB,GAAG,IAAI;MAChC;IACF,KAAKX,eAAe;MAClBe,KAAK,CAACJ,mBAAmB,GAAG,KAAK;MACjC;IACF,KAAKR,eAAe;MAClBY,KAAK,CAACH,mBAAmB,GAAG,IAAI;MAChC;IACF,KAAKX,eAAe;MAClBc,KAAK,CAACH,mBAAmB,GAAG,KAAK;MACjC;IACF,KAAKrB,kBAAkB;MACrB,MAAM6B,QAAQ,GAAG9B,SAAS,CAACyB,KAAK,CAACR,cAAc,EAAE;QAC/Cc,EAAE,EAAEL,MAAM,CAACE,OAAO,CAACG;MACrB,CAAC,CAAC;MACF,IAAID,QAAQ,GAAG,CAAC,CAAC,EAAE;QACjBL,KAAK,CAACR,cAAc,CAACe,MAAM,CAACF,QAAQ,EAAE,CAAC,CAAC;MAC1C;MACAL,KAAK,CAACR,cAAc,CAACgB,IAAI,CAACP,MAAM,CAACE,OAAO,CAAC;MACzC;IACF,KAAKnB,oBAAoB;MACvBgB,KAAK,CAACF,QAAQ,GAAGG,MAAM,CAACE,OAAO;MAC/B;IACF,KAAK1B,WAAW;MACduB,KAAK,CAACF,QAAQ,CAACW,OAAO,CAACR,MAAM,CAACE,OAAO,CAAC;MACtC;IACF;EACF;AACF,CAAC,EACDd,YACF,CAAC;AAED,eAAeU,sBAAsB","ignoreList":[]}