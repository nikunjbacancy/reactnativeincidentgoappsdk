{"version":3,"names":["produce","uniqBy","ADD_PAGE_INDEX","GET_TIPS_FAILURE","GET_TIPS_REQUEST","GET_TIPS_SUCCESS","RESET_STATE","SET_HAS_MORE_DATA","TipStatus","initialState","tips","Active","data","pageIndex","hasMoreData","Closed","isLoading","isDeleting","myTipsScreenReducer","draft","action","type","payload","paging","tipStatus"],"sources":["reducer.ts"],"sourcesContent":["/**\n *\n * MyTipsScreen reducer\n *\n */\n\nimport produce, { Draft } from 'immer';\nimport uniqBy from 'lodash/uniqBy';\n\nimport {\n  ADD_PAGE_INDEX,\n  GET_TIPS_FAILURE,\n  GET_TIPS_REQUEST,\n  GET_TIPS_SUCCESS,\n  RESET_STATE,\n  SET_HAS_MORE_DATA,\n} from './constants';\nimport { MyTipsActionTypes, MyTipsState, TipStatus } from './types';\n\nexport const initialState: MyTipsState = {\n  tips: {\n    [TipStatus.Active]: {\n      data: [],\n      pageIndex: 0,\n      hasMoreData: false,\n    },\n    [TipStatus.Closed]: {\n      data: [],\n      pageIndex: 0,\n      hasMoreData: false,\n    },\n  },\n  isLoading: true,\n  isDeleting: false,\n};\n\nconst myTipsScreenReducer = produce(\n  (draft: Draft<MyTipsState>, action: MyTipsActionTypes) => {\n    switch (action.type) {\n      case GET_TIPS_REQUEST:\n        draft.isLoading = true;\n        break;\n      case GET_TIPS_SUCCESS:\n        if (action.payload.paging) {\n          draft.tips[action.payload.tipStatus].data = uniqBy(\n            [\n              ...draft.tips[action.payload.tipStatus].data,\n              ...action.payload.data,\n            ],\n            'id',\n          );\n        } else {\n          draft.tips[action.payload.tipStatus].data = action.payload.data;\n        }\n        draft.isLoading = false;\n        break;\n      case GET_TIPS_FAILURE:\n        draft.isLoading = false;\n        break;\n      case ADD_PAGE_INDEX:\n        if (draft.tips[action.payload].hasMoreData) {\n          draft.tips[action.payload].pageIndex += 1;\n        }\n        break;\n      case SET_HAS_MORE_DATA:\n        draft.tips[action.payload.tipStatus].hasMoreData = action.payload.data;\n        break;\n      case RESET_STATE:\n        draft.tips = initialState.tips;\n        draft.isLoading = initialState.isLoading;\n        draft.isDeleting = initialState.isDeleting;\n        break;\n      default:\n    }\n  },\n  initialState,\n);\n\nexport default myTipsScreenReducer;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,OAAO,MAAiB,OAAO;AACtC,OAAOC,MAAM,MAAM,eAAe;AAElC,SACEC,cAAc,EACdC,gBAAgB,EAChBC,gBAAgB,EAChBC,gBAAgB,EAChBC,WAAW,EACXC,iBAAiB,QACZ,aAAa;AACpB,SAAyCC,SAAS,QAAQ,SAAS;AAEnE,OAAO,MAAMC,YAAyB,GAAG;EACvCC,IAAI,EAAE;IACJ,CAACF,SAAS,CAACG,MAAM,GAAG;MAClBC,IAAI,EAAE,EAAE;MACRC,SAAS,EAAE,CAAC;MACZC,WAAW,EAAE;IACf,CAAC;IACD,CAACN,SAAS,CAACO,MAAM,GAAG;MAClBH,IAAI,EAAE,EAAE;MACRC,SAAS,EAAE,CAAC;MACZC,WAAW,EAAE;IACf;EACF,CAAC;EACDE,SAAS,EAAE,IAAI;EACfC,UAAU,EAAE;AACd,CAAC;AAED,MAAMC,mBAAmB,GAAGlB,OAAO,CACjC,CAACmB,KAAyB,EAAEC,MAAyB,KAAK;EACxD,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKjB,gBAAgB;MACnBe,KAAK,CAACH,SAAS,GAAG,IAAI;MACtB;IACF,KAAKX,gBAAgB;MACnB,IAAIe,MAAM,CAACE,OAAO,CAACC,MAAM,EAAE;QACzBJ,KAAK,CAACT,IAAI,CAACU,MAAM,CAACE,OAAO,CAACE,SAAS,CAAC,CAACZ,IAAI,GAAGX,MAAM,CAChD,CACE,GAAGkB,KAAK,CAACT,IAAI,CAACU,MAAM,CAACE,OAAO,CAACE,SAAS,CAAC,CAACZ,IAAI,EAC5C,GAAGQ,MAAM,CAACE,OAAO,CAACV,IAAI,CACvB,EACD,IACF,CAAC;MACH,CAAC,MAAM;QACLO,KAAK,CAACT,IAAI,CAACU,MAAM,CAACE,OAAO,CAACE,SAAS,CAAC,CAACZ,IAAI,GAAGQ,MAAM,CAACE,OAAO,CAACV,IAAI;MACjE;MACAO,KAAK,CAACH,SAAS,GAAG,KAAK;MACvB;IACF,KAAKb,gBAAgB;MACnBgB,KAAK,CAACH,SAAS,GAAG,KAAK;MACvB;IACF,KAAKd,cAAc;MACjB,IAAIiB,KAAK,CAACT,IAAI,CAACU,MAAM,CAACE,OAAO,CAAC,CAACR,WAAW,EAAE;QAC1CK,KAAK,CAACT,IAAI,CAACU,MAAM,CAACE,OAAO,CAAC,CAACT,SAAS,IAAI,CAAC;MAC3C;MACA;IACF,KAAKN,iBAAiB;MACpBY,KAAK,CAACT,IAAI,CAACU,MAAM,CAACE,OAAO,CAACE,SAAS,CAAC,CAACV,WAAW,GAAGM,MAAM,CAACE,OAAO,CAACV,IAAI;MACtE;IACF,KAAKN,WAAW;MACda,KAAK,CAACT,IAAI,GAAGD,YAAY,CAACC,IAAI;MAC9BS,KAAK,CAACH,SAAS,GAAGP,YAAY,CAACO,SAAS;MACxCG,KAAK,CAACF,UAAU,GAAGR,YAAY,CAACQ,UAAU;MAC1C;IACF;EACF;AACF,CAAC,EACDR,YACF,CAAC;AAED,eAAeS,mBAAmB","ignoreList":[]}