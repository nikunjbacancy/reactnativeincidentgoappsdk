{"version":3,"names":["colors","Header","SafeAreaContainer","ScreenActionButton","React","useEffect","useState","StatusBar","Alert","useIntl","useAction","useSelector","NavigatorService","AsyncStorage","Screens","deleteUserRequest","messages","BackButtonRow","Container","SwitchButton","SwitchContainer","SwitchText","LogoutButtonRow","LogoutButton","LogoutButtonText","checkNotifications","openSettings","styled","makeSelectUser","SettingScreen","phone","formatMessage","notificationSetting","setNotificationSetting","accountDeleteRequestAction","notificationEnabled","then","status","settings","onNotificationValueChange","console","log","alert","text","onPress","style","setWarning","createElement","Text","warning","showDeleteAccountAlert","deleteAccount","deleteAccountMsg","no","yes","handleLogout","showLogoutAlert","logout","logoutMessage","setItem","navigate","Onboarding","Index","Fragment","barStyle","backgroundColor","title","description","value","onValueChange","trackColor","false","lightGrey","true","highlight","thumbColor","nearWhite","onCancel","back","tintColor","white","theme","black","fonts","defaultBoldFamily","normalSize"],"sources":["index.tsx"],"sourcesContent":["// import NavigatorService from 'utils/navigation';\nimport { colors } from '../../../../assets';\nimport { Header, SafeAreaContainer, ScreenActionButton } from '../../../../components';\nimport React, { useEffect, useState } from 'react';\nimport { StatusBar, Alert } from 'react-native';\nimport { useIntl } from 'react-intl';\nimport { useAction, useSelector } from '../../../../utils/hooks';\nimport NavigatorService from '../../../../utils/navigation';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Screens from '../../../providers/RoutesProvider/screens';\nimport { deleteUserRequest, resetDeleteUser } from './actions';\nimport messages from './messages';\nimport {\n  BackButtonRow,\n  Container,\n  SwitchButton,\n  SwitchContainer,\n  SwitchText,\n  LogoutButtonRow,\n  LogoutButton,\n  LogoutButtonText\n} from './styles';\nimport { checkNotifications, openSettings } from 'react-native-permissions';\nimport styled from '../../../../utils/styled';\nimport { makeSelectUser } from '../../../app/selectors';\n\n// import { getDeviceName, getModel, getBrand, getDeviceId } from 'react-native-device-info'\n\nconst SettingScreen = () => {\n\n  const { phone } = useSelector(makeSelectUser());\n\n  const { formatMessage } = useIntl();\n  const [notificationSetting, setNotificationSetting] = useState(true);\n  const accountDeleteRequestAction = useAction(deleteUserRequest);\n  const notificationEnabled =\n    notificationSetting == null ? true : notificationSetting;\n\n  useEffect(() => {\n    checkNotifications().then(({ status, settings }) => {\n      if (status === \"blocked\") {\n        setNotificationSetting(false);\n      }\n      else {\n        setNotificationSetting(true);\n      }\n    });\n  })\n\n  // useEffect(() => {\n  //   // console.log(\"result===>\", result)\n\n  //   if (result !== null) {\n  //     Toast.show(result.message, {\n  //       position: Toast.positions.CENTER,\n  //       duration: 3000\n  //     });\n  //     resetDeleteAccountUserAction()\n  //     AsyncStorage.setItem(\"isLogout\", \"true\");\n  //     NavigatorService.navigate(Screens.Onboarding.Index);\n  //   }\n\n  // }, [result])\n\n  const onNotificationValueChange = () => {\n    console.log(\"notificationSetting:\" + notificationSetting)\n    switch (notificationSetting) {\n      case true:\n\n        break;\n      case false:\n        Alert.alert(\n          'Permission Required',\n          'This app needs notification permission to receive notifications',\n          [\n            {\n              text: 'Open settings',\n              onPress: openSettings\n            },\n            {\n              text: \"Cancel\",\n              onPress: () => console.log(\"Cancel Pressed\"),\n              style: \"cancel\"\n            },\n          ]\n        );\n        break;\n    }\n  }\n\n  const setWarning = () => {\n    // console.log(\"=formatMessage(messages.warning)=>\",formatMessage(messages.warning))\n    switch (notificationSetting) {\n      case true:\n        return null;\n      case false:\n        return <Text>{formatMessage(messages.warning)}</Text>;\n      default:\n        return null;\n    }\n  }\n\n  const showDeleteAccountAlert = () => {\n    Alert.alert(formatMessage(messages.deleteAccount), formatMessage(messages.deleteAccountMsg), [\n      {\n        text: formatMessage(messages.no),\n        onPress: () => console.log('Cancel Pressed'),\n        style: 'cancel',\n      },\n      {\n        text: formatMessage(messages.yes), onPress: () =>\n          handleLogout()\n      },\n    ]);\n  }\n\n  const handleLogout = () => {\n    accountDeleteRequestAction(phone)\n    // resetDeleteAccountUserAction()\n    // console.log(\"Result Is===>\", result)\n    // AsyncStorage.setItem(\"isLogout\", \"true\");\n    // NavigatorService.navigate(Screens.Onboarding.Index);\n  }\n\n  const showLogoutAlert = () => {\n    Alert.alert(formatMessage(messages.logout), formatMessage(messages.logoutMessage), [\n      {\n        text: formatMessage(messages.no),\n        onPress: () => console.log('Cancel Pressed'),\n        style: 'cancel',\n      },\n      {\n        text: formatMessage(messages.yes), onPress: () => {\n          AsyncStorage.setItem(\"isLogout\", \"true\");\n          NavigatorService.navigate(Screens.Onboarding.Index);\n        }\n      },\n    ]);\n  }\n\n  return (\n    <>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"white\" />\n      <SafeAreaContainer>\n        <Header title={formatMessage(messages.title)} />\n        <Container>\n          <SwitchContainer>\n            <SwitchText>{formatMessage(messages.description)}</SwitchText>\n            <SwitchButton\n              value={notificationEnabled}\n              onValueChange={onNotificationValueChange}\n              trackColor={{\n                false: colors.lightGrey,\n                true: colors.highlight,\n              }}\n              thumbColor={colors.nearWhite}\n            />\n          </SwitchContainer>\n\n          {setWarning()}\n\n          <LogoutButtonRow>\n            <LogoutButton onPress={showLogoutAlert}>\n              <LogoutButtonText>{formatMessage(messages.logout)}</LogoutButtonText>\n            </LogoutButton>\n          </LogoutButtonRow>\n\n          {/* <DeleteButtonRow>\n            <DeleteButton onPress={showDeleteAccountAlert}>\n              <DeleteButtonText>{formatMessage(messages.deleteAccount)}</DeleteButtonText>\n            </DeleteButton>\n          </DeleteButtonRow> */}\n\n        </Container>\n        <BackButtonRow>\n          <ScreenActionButton\n            onCancel={NavigatorService.back}\n            tintColor={colors.white}\n          />\n        </BackButtonRow>\n      </SafeAreaContainer>\n    </>\n  );\n};\n\nconst Text = styled.Text`\n  color: ${({ theme }) => theme.colors.black};\n  font-family: ${({ theme }) => theme.fonts.defaultBoldFamily};\n  font-size: ${({ theme }) => theme.fonts.normalSize};\n  text-align: center;\n  padding: 20px 20px 0;\n`;\n\nexport default SettingScreen;\n"],"mappings":"AAAA;AACA,SAASA,MAAM,QAAQ,oBAAoB;AAC3C,SAASC,MAAM,EAAEC,iBAAiB,EAAEC,kBAAkB,QAAQ,wBAAwB;AACtF,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,KAAK,QAAQ,cAAc;AAC/C,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,SAAS,EAAEC,WAAW,QAAQ,yBAAyB;AAChE,OAAOC,gBAAgB,MAAM,8BAA8B;AAC3D,OAAOC,YAAY,MAAM,2CAA2C;AACpE,OAAOC,OAAO,MAAM,2CAA2C;AAC/D,SAASC,iBAAiB,QAAyB,WAAW;AAC9D,OAAOC,QAAQ,MAAM,YAAY;AACjC,SACEC,aAAa,EACbC,SAAS,EACTC,YAAY,EACZC,eAAe,EACfC,UAAU,EACVC,eAAe,EACfC,YAAY,EACZC,gBAAgB,QACX,UAAU;AACjB,SAASC,kBAAkB,EAAEC,YAAY,QAAQ,0BAA0B;AAC3E,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,SAASC,cAAc,QAAQ,wBAAwB;;AAEvD;;AAEA,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAE1B,MAAM;IAAEC;EAAM,CAAC,GAAGnB,WAAW,CAACiB,cAAc,CAAC,CAAC,CAAC;EAE/C,MAAM;IAAEG;EAAc,CAAC,GAAGtB,OAAO,CAAC,CAAC;EACnC,MAAM,CAACuB,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACpE,MAAM4B,0BAA0B,GAAGxB,SAAS,CAACK,iBAAiB,CAAC;EAC/D,MAAMoB,mBAAmB,GACvBH,mBAAmB,IAAI,IAAI,GAAG,IAAI,GAAGA,mBAAmB;EAE1D3B,SAAS,CAAC,MAAM;IACdoB,kBAAkB,CAAC,CAAC,CAACW,IAAI,CAAC,CAAC;MAAEC,MAAM;MAAEC;IAAS,CAAC,KAAK;MAClD,IAAID,MAAM,KAAK,SAAS,EAAE;QACxBJ,sBAAsB,CAAC,KAAK,CAAC;MAC/B,CAAC,MACI;QACHA,sBAAsB,CAAC,IAAI,CAAC;MAC9B;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA,MAAMM,yBAAyB,GAAGA,CAAA,KAAM;IACtCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGT,mBAAmB,CAAC;IACzD,QAAQA,mBAAmB;MACzB,KAAK,IAAI;QAEP;MACF,KAAK,KAAK;QACRxB,KAAK,CAACkC,KAAK,CACT,qBAAqB,EACrB,iEAAiE,EACjE,CACE;UACEC,IAAI,EAAE,eAAe;UACrBC,OAAO,EAAElB;QACX,CAAC,EACD;UACEiB,IAAI,EAAE,QAAQ;UACdC,OAAO,EAAEA,CAAA,KAAMJ,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;UAC5CI,KAAK,EAAE;QACT,CAAC,CAEL,CAAC;QACD;IACJ;EACF,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvB;IACA,QAAQd,mBAAmB;MACzB,KAAK,IAAI;QACP,OAAO,IAAI;MACb,KAAK,KAAK;QACR,oBAAO5B,KAAA,CAAA2C,aAAA,CAACC,IAAI,QAAEjB,aAAa,CAACf,QAAQ,CAACiC,OAAO,CAAQ,CAAC;MACvD;QACE,OAAO,IAAI;IACf;EACF,CAAC;EAED,MAAMC,sBAAsB,GAAGA,CAAA,KAAM;IACnC1C,KAAK,CAACkC,KAAK,CAACX,aAAa,CAACf,QAAQ,CAACmC,aAAa,CAAC,EAAEpB,aAAa,CAACf,QAAQ,CAACoC,gBAAgB,CAAC,EAAE,CAC3F;MACET,IAAI,EAAEZ,aAAa,CAACf,QAAQ,CAACqC,EAAE,CAAC;MAChCT,OAAO,EAAEA,CAAA,KAAMJ,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC5CI,KAAK,EAAE;IACT,CAAC,EACD;MACEF,IAAI,EAAEZ,aAAa,CAACf,QAAQ,CAACsC,GAAG,CAAC;MAAEV,OAAO,EAAEA,CAAA,KAC1CW,YAAY,CAAC;IACjB,CAAC,CACF,CAAC;EACJ,CAAC;EAED,MAAMA,YAAY,GAAGA,CAAA,KAAM;IACzBrB,0BAA0B,CAACJ,KAAK,CAAC;IACjC;IACA;IACA;IACA;EACF,CAAC;EAED,MAAM0B,eAAe,GAAGA,CAAA,KAAM;IAC5BhD,KAAK,CAACkC,KAAK,CAACX,aAAa,CAACf,QAAQ,CAACyC,MAAM,CAAC,EAAE1B,aAAa,CAACf,QAAQ,CAAC0C,aAAa,CAAC,EAAE,CACjF;MACEf,IAAI,EAAEZ,aAAa,CAACf,QAAQ,CAACqC,EAAE,CAAC;MAChCT,OAAO,EAAEA,CAAA,KAAMJ,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC5CI,KAAK,EAAE;IACT,CAAC,EACD;MACEF,IAAI,EAAEZ,aAAa,CAACf,QAAQ,CAACsC,GAAG,CAAC;MAAEV,OAAO,EAAEA,CAAA,KAAM;QAChD/B,YAAY,CAAC8C,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC;QACxC/C,gBAAgB,CAACgD,QAAQ,CAAC9C,OAAO,CAAC+C,UAAU,CAACC,KAAK,CAAC;MACrD;IACF,CAAC,CACF,CAAC;EACJ,CAAC;EAED,oBACE1D,KAAA,CAAA2C,aAAA,CAAA3C,KAAA,CAAA2D,QAAA,qBACE3D,KAAA,CAAA2C,aAAA,CAACxC,SAAS;IAACyD,QAAQ,EAAC,cAAc;IAACC,eAAe,EAAC;EAAO,CAAE,CAAC,eAC7D7D,KAAA,CAAA2C,aAAA,CAAC7C,iBAAiB,qBAChBE,KAAA,CAAA2C,aAAA,CAAC9C,MAAM;IAACiE,KAAK,EAAEnC,aAAa,CAACf,QAAQ,CAACkD,KAAK;EAAE,CAAE,CAAC,eAChD9D,KAAA,CAAA2C,aAAA,CAAC7B,SAAS,qBACRd,KAAA,CAAA2C,aAAA,CAAC3B,eAAe,qBACdhB,KAAA,CAAA2C,aAAA,CAAC1B,UAAU,QAAEU,aAAa,CAACf,QAAQ,CAACmD,WAAW,CAAc,CAAC,eAC9D/D,KAAA,CAAA2C,aAAA,CAAC5B,YAAY;IACXiD,KAAK,EAAEjC,mBAAoB;IAC3BkC,aAAa,EAAE9B,yBAA0B;IACzC+B,UAAU,EAAE;MACVC,KAAK,EAAEvE,MAAM,CAACwE,SAAS;MACvBC,IAAI,EAAEzE,MAAM,CAAC0E;IACf,CAAE;IACFC,UAAU,EAAE3E,MAAM,CAAC4E;EAAU,CAC9B,CACc,CAAC,EAEjB9B,UAAU,CAAC,CAAC,eAEb1C,KAAA,CAAA2C,aAAA,CAACzB,eAAe,qBACdlB,KAAA,CAAA2C,aAAA,CAACxB,YAAY;IAACqB,OAAO,EAAEY;EAAgB,gBACrCpD,KAAA,CAAA2C,aAAA,CAACvB,gBAAgB,QAAEO,aAAa,CAACf,QAAQ,CAACyC,MAAM,CAAoB,CACxD,CACC,CAQR,CAAC,eACZrD,KAAA,CAAA2C,aAAA,CAAC9B,aAAa,qBACZb,KAAA,CAAA2C,aAAA,CAAC5C,kBAAkB;IACjB0E,QAAQ,EAAEjE,gBAAgB,CAACkE,IAAK;IAChCC,SAAS,EAAE/E,MAAM,CAACgF;EAAM,CACzB,CACY,CACE,CACnB,CAAC;AAEP,CAAC;AAED,MAAMhC,IAAI,GAAGrB,MAAM,CAACqB,IAAI;AACxB,WAAW,CAAC;EAAEiC;AAAM,CAAC,KAAKA,KAAK,CAACjF,MAAM,CAACkF,KAAK;AAC5C,iBAAiB,CAAC;EAAED;AAAM,CAAC,KAAKA,KAAK,CAACE,KAAK,CAACC,iBAAiB;AAC7D,eAAe,CAAC;EAAEH;AAAM,CAAC,KAAKA,KAAK,CAACE,KAAK,CAACE,UAAU;AACpD;AACA;AACA,CAAC;AAED,eAAexD,aAAa","ignoreList":[]}