{"version":3,"names":["colors","Header","LoadingIndicator","SafeAreaContainer","ScreenActionButton","Screens","reject","React","useEffect","useIntl","StatusBar","Toast","useAction","useSelector","NavigatorService","deleteUserOrganizationRequest","getUserOrganizationsRequest","messages","OrganizationItem","makeSelectIsLoading","makeSelectUserOrganizations","AddButtonRow","List","OrganizationScreen","formatMessage","isLoading","organizations","getUserOrganizationsAction","deleteUserOrganizationAction","onDelete","organization","length","show","alert","position","positions","CENTER","filteredOrganizations","id","goToSelectOrganization","navigate","Menu","Organization","SelectOrganizations","renderItem","itemInfo","createElement","item","Fragment","barStyle","backgroundColor","title","keyExtractor","org","_org$id","toString","data","extraData","onCancel","back","onPress","text","addNewOrganization","tintColor","white"],"sources":["index.tsx"],"sourcesContent":["import { colors } from '../../../../assets';\nimport {\n  Header,\n  LoadingIndicator,\n  SafeAreaContainer,\n  ScreenActionButton,\n} from '../../../../components';\nimport Screens from '../../../../containers/providers/RoutesProvider/screens';\nimport { Organization } from 'incident-code-core';\nimport reject from 'lodash/reject';\nimport React, { useEffect } from 'react';\nimport { useIntl } from 'react-intl';\nimport { ListRenderItemInfo, StatusBar } from 'react-native';\nimport Toast from 'react-native-root-toast';\nimport { OrganizationSelection } from 'types';\nimport { useAction, useSelector } from '../../../../utils/hooks';\nimport NavigatorService from '../../../../utils/navigation';\n\nimport {\n  deleteUserOrganizationRequest,\n  getUserOrganizationsRequest,\n} from './actions';\nimport messages from './messages';\nimport OrganizationItem from './OrganizationItem';\nimport { makeSelectIsLoading, makeSelectUserOrganizations } from './selectors';\nimport { AddButtonRow, List } from './styles';\n\nconst OrganizationScreen = () => {\n  const { formatMessage } = useIntl();\n\n  const isLoading = useSelector(makeSelectIsLoading());\n  const organizations = useSelector(makeSelectUserOrganizations());\n\n  const getUserOrganizationsAction = useAction(getUserOrganizationsRequest);\n  const deleteUserOrganizationAction = useAction(deleteUserOrganizationRequest);\n\n  useEffect(() => {\n    getUserOrganizationsAction();\n  }, []);\n\n  const onDelete = (organization: Organization) => {\n    if (organizations.length === 1) {\n      Toast.show(formatMessage(messages.alert), {\n        position: Toast.positions.CENTER,\n      });\n      return;\n    }\n    const filteredOrganizations = reject(organizations, {\n      id: organization.id,\n    });\n    deleteUserOrganizationAction(filteredOrganizations);\n  };\n\n  const goToSelectOrganization = () => {\n    NavigatorService.navigate(Screens.Menu.Organization.SelectOrganizations);\n  };\n\n  const renderItem = (\n    itemInfo: ListRenderItemInfo<OrganizationSelection>,\n  ): React.ReactElement => (\n    <OrganizationItem onDelete={onDelete} organization={itemInfo.item} />\n  );\n\n  return (\n    <>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"white\" />\n      <SafeAreaContainer>\n        <Header title={formatMessage(messages.title)} />\n        {isLoading ? (\n          <LoadingIndicator />\n        ) : (\n          <List\n            keyExtractor={(org: any) => org.id?.toString() || ''}\n            data={organizations}\n            extraData={organizations}\n            renderItem={renderItem}\n          />\n        )}\n        <AddButtonRow>\n          <ScreenActionButton\n            onCancel={NavigatorService.back}\n            onPress={goToSelectOrganization}\n            text={formatMessage(messages.addNewOrganization)}\n            tintColor={colors.white}\n          />\n        </AddButtonRow>\n      </SafeAreaContainer>\n    </>\n  );\n};\n\nexport default OrganizationScreen;\n"],"mappings":"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","ignoreList":[]}