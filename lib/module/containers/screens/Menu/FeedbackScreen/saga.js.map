{"version":3,"names":["api","call","put","takeLatest","getInfo","getVersion","handleError","sendFeedbackFailure","sendFeedbackSuccess","updateUserEmail","SEND_FEEDBACK_REQUEST","sendFeedback","payload","feedback","message","comment","extra","email","device","version","send","error","feedbackScreenSaga"],"sources":["saga.ts"],"sourcesContent":["/**\n *\n * FeedbackScreen saga\n *\n */\n\nimport * as api from '../../../../api';\nimport { Feedback } from 'incident-code-core';\nimport { call, put, takeLatest } from 'redux-saga/effects';\nimport { getInfo, getVersion } from '../../../../utils/device';\nimport { handleError } from '../../../../utils/error';\n\nimport {\n  sendFeedbackFailure,\n  sendFeedbackSuccess,\n  updateUserEmail,\n} from './actions';\nimport { SEND_FEEDBACK_REQUEST } from './constants';\nimport { SendFeedbackRequestAction } from './types';\n\nexport function* sendFeedback({ payload }: SendFeedbackRequestAction) {\n  const feedback: Feedback = {\n    message: payload.comment,\n    extra: { email: payload.email },\n    device: getInfo(),\n    version: getVersion(),\n  };\n  try {\n    yield call(api.feedback.send, feedback);\n    yield put(updateUserEmail(payload.email));\n    yield put(sendFeedbackSuccess());\n  } catch (error: any) {\n    yield put(sendFeedbackFailure(handleError(error)));\n  }\n}\n\nexport default function* feedbackScreenSaga() {\n  yield takeLatest(SEND_FEEDBACK_REQUEST, sendFeedback);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,OAAO,KAAKA,GAAG,MAAM,iBAAiB;AAEtC,SAASC,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAQ,oBAAoB;AAC1D,SAASC,OAAO,EAAEC,UAAU,QAAQ,0BAA0B;AAC9D,SAASC,WAAW,QAAQ,yBAAyB;AAErD,SACEC,mBAAmB,EACnBC,mBAAmB,EACnBC,eAAe,QACV,WAAW;AAClB,SAASC,qBAAqB,QAAQ,aAAa;AAGnD,OAAO,UAAUC,YAAYA,CAAC;EAAEC;AAAmC,CAAC,EAAE;EACpE,MAAMC,QAAkB,GAAG;IACzBC,OAAO,EAAEF,OAAO,CAACG,OAAO;IACxBC,KAAK,EAAE;MAAEC,KAAK,EAAEL,OAAO,CAACK;IAAM,CAAC;IAC/BC,MAAM,EAAEd,OAAO,CAAC,CAAC;IACjBe,OAAO,EAAEd,UAAU,CAAC;EACtB,CAAC;EACD,IAAI;IACF,MAAMJ,IAAI,CAACD,GAAG,CAACa,QAAQ,CAACO,IAAI,EAAEP,QAAQ,CAAC;IACvC,MAAMX,GAAG,CAACO,eAAe,CAACG,OAAO,CAACK,KAAK,CAAC,CAAC;IACzC,MAAMf,GAAG,CAACM,mBAAmB,CAAC,CAAC,CAAC;EAClC,CAAC,CAAC,OAAOa,KAAU,EAAE;IACnB,MAAMnB,GAAG,CAACK,mBAAmB,CAACD,WAAW,CAACe,KAAK,CAAC,CAAC,CAAC;EACpD;AACF;AAEA,eAAe,UAAUC,kBAAkBA,CAAA,EAAG;EAC5C,MAAMnB,UAAU,CAACO,qBAAqB,EAAEC,YAAY,CAAC;AACvD","ignoreList":[]}