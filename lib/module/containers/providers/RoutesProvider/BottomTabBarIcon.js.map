{"version":3,"names":["AppEvent","event","Badge","isEmpty","React","useEffect","useState","getBadges","styled","BottomTabBarIcon","source","focused","size","showBadge","badges","setBadges","then","notificationBadges","notificationAdded","on","OnNotificationBadge","componentDidUnMount","off","createElement","Fragment","Icon","InactiveIcon","length","defaultProps","Image","theme","colors","highlight","dark"],"sources":["BottomTabBarIcon.tsx"],"sourcesContent":["import { AppEvent, event } from '../../../api';\nimport { Badge } from '../../../components';\nimport { Id } from 'incident-code-core';\nimport isEmpty from 'lodash/isEmpty';\nimport React, { FC, useEffect, useState } from 'react';\nimport { ImageSourcePropType } from 'react-native';\nimport { getBadges } from '../../../utils/notification';\nimport styled from '../../../utils/styled';\n\ninterface Props {\n  source: ImageSourcePropType;\n  focused?: boolean;\n  size?: number;\n  showBadge?: boolean;\n}\n\nconst BottomTabBarIcon: FC<Props> = ({ source, focused, size, showBadge }) => {\n  const [badges, setBadges] = useState<Id[]>([]);\n  useEffect(() => {\n    if (showBadge) {\n      getBadges().then((notificationBadges: Id[]) => {\n        setBadges(notificationBadges);\n      });\n      const notificationAdded = (notificationBadges: Id[]) => {\n        setBadges(notificationBadges);\n      };\n      event.on(AppEvent.OnNotificationBadge, notificationAdded);\n      return function componentDidUnMount() {\n        event.off(AppEvent.OnNotificationBadge, notificationAdded);\n      };\n    } else {\n      return;\n    }\n  }, [showBadge]);\n  return (\n    <>\n      {focused ? (\n        <Icon source={source} size={size} />\n      ) : (\n        <InactiveIcon source={source} size={size} />\n      )}\n      {showBadge && !isEmpty(badges) && <Badge length={badges.length} />}\n    </>\n  );\n};\n\nBottomTabBarIcon.defaultProps = {\n  size: 28,\n};\n\nconst Icon = styled.Image<Props>`\n  width: ${({ size }) => `${size}px`};\n  height: ${({ size }) => `${size}px`};\n  tint-color: ${({ theme }) => theme.colors.highlight};\n  margin-top: 5px;\n`;\n\nconst InactiveIcon = styled.Image<Props>`\n  width: ${({ size }) => `${size}px`};\n  height: ${({ size }) => `${size}px`};\n  tint-color: ${({ theme }) => theme.colors.dark};\n  margin-top: 5px;\n`;\n\nexport default BottomTabBarIcon;\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,KAAK,QAAQ,cAAc;AAC9C,SAASC,KAAK,QAAQ,qBAAqB;AAE3C,OAAOC,OAAO,MAAM,gBAAgB;AACpC,OAAOC,KAAK,IAAQC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAEtD,SAASC,SAAS,QAAQ,6BAA6B;AACvD,OAAOC,MAAM,MAAM,uBAAuB;AAS1C,MAAMC,gBAA2B,GAAGA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEC,IAAI;EAAEC;AAAU,CAAC,KAAK;EAC5E,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAO,EAAE,CAAC;EAC9CD,SAAS,CAAC,MAAM;IACd,IAAIQ,SAAS,EAAE;MACbN,SAAS,CAAC,CAAC,CAACS,IAAI,CAAEC,kBAAwB,IAAK;QAC7CF,SAAS,CAACE,kBAAkB,CAAC;MAC/B,CAAC,CAAC;MACF,MAAMC,iBAAiB,GAAID,kBAAwB,IAAK;QACtDF,SAAS,CAACE,kBAAkB,CAAC;MAC/B,CAAC;MACDhB,KAAK,CAACkB,EAAE,CAACnB,QAAQ,CAACoB,mBAAmB,EAAEF,iBAAiB,CAAC;MACzD,OAAO,SAASG,mBAAmBA,CAAA,EAAG;QACpCpB,KAAK,CAACqB,GAAG,CAACtB,QAAQ,CAACoB,mBAAmB,EAAEF,iBAAiB,CAAC;MAC5D,CAAC;IACH,CAAC,MAAM;MACL;IACF;EACF,CAAC,EAAE,CAACL,SAAS,CAAC,CAAC;EACf,oBACET,KAAA,CAAAmB,aAAA,CAAAnB,KAAA,CAAAoB,QAAA,QACGb,OAAO,gBACNP,KAAA,CAAAmB,aAAA,CAACE,IAAI;IAACf,MAAM,EAAEA,MAAO;IAACE,IAAI,EAAEA;EAAK,CAAE,CAAC,gBAEpCR,KAAA,CAAAmB,aAAA,CAACG,YAAY;IAAChB,MAAM,EAAEA,MAAO;IAACE,IAAI,EAAEA;EAAK,CAAE,CAC5C,EACAC,SAAS,IAAI,CAACV,OAAO,CAACW,MAAM,CAAC,iBAAIV,KAAA,CAAAmB,aAAA,CAACrB,KAAK;IAACyB,MAAM,EAAEb,MAAM,CAACa;EAAO,CAAE,CACjE,CAAC;AAEP,CAAC;AAEDlB,gBAAgB,CAACmB,YAAY,GAAG;EAC9BhB,IAAI,EAAE;AACR,CAAC;AAED,MAAMa,IAAI,GAAGjB,MAAM,CAACqB,KAAY;AAChC,WAAW,CAAC;EAAEjB;AAAK,CAAC,KAAK,GAAGA,IAAI,IAAI;AACpC,YAAY,CAAC;EAAEA;AAAK,CAAC,KAAK,GAAGA,IAAI,IAAI;AACrC,gBAAgB,CAAC;EAAEkB;AAAM,CAAC,KAAKA,KAAK,CAACC,MAAM,CAACC,SAAS;AACrD;AACA,CAAC;AAED,MAAMN,YAAY,GAAGlB,MAAM,CAACqB,KAAY;AACxC,WAAW,CAAC;EAAEjB;AAAK,CAAC,KAAK,GAAGA,IAAI,IAAI;AACpC,YAAY,CAAC;EAAEA;AAAK,CAAC,KAAK,GAAGA,IAAI,IAAI;AACrC,gBAAgB,CAAC;EAAEkB;AAAM,CAAC,KAAKA,KAAK,CAACC,MAAM,CAACE,IAAI;AAChD;AACA,CAAC;AAED,eAAexB,gBAAgB","ignoreList":[]}