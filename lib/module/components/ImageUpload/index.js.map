{"version":3,"names":["images","React","useEffect","useState","useIntl","Image","MyPhotoUpload","messages","DeletePhoto","ImageUploadContainer","ImgDescriptionText","UploadInfo","UploadInfoContainer","UserPortraitContainer","PortraitMessageType","ImageUpload","portraitUrl","onUpload","onDelete","actionInfoType","formatMessage","showLoadInfo","setShowLoadInfo","imageDisplay","uri","Date","getTime","noUserImage","onPhotoSelect","avatar","path","onDeletePress","infoText","UploadSuccess","uploadSuccess","UploadFail","uploadFailure","DeleteSuccess","deleteSuccess","DeleteFail","deleteFailure","timeout","setTimeout","clearTimeout","createElement","info","onResizedImageUri","alertTitle","alertMessage","style","paddingVertical","width","height","borderRadius","resizeMode","source","key","icTrash","onPress"],"sources":["index.tsx"],"sourcesContent":["import { images } from '../../assets';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { Image } from 'react-native';\n// import MyPhotoUpload, {MyImageResizerResponse} from 'MyPhotoUpload';\nimport MyPhotoUpload from '../PhotoUpload/MyPhotoUpload';\n\n\n\nimport messages from './messages';\nimport {\n  DeletePhoto,\n  ImageUploadContainer,\n  ImgDescriptionText,\n  UploadInfo,\n  UploadInfoContainer,\n  UserPortraitContainer,\n} from './styles';\n\nexport enum PortraitMessageType {\n  UploadSuccess = 1,\n  UploadFail,\n  DeleteSuccess,\n  DeleteFail,\n}\n\ninterface Props {\n  portraitUrl?: string;\n  onUpload: any;\n  onDelete?: any;\n  actionInfoType: PortraitMessageType | undefined;\n}\n\nconst ImageUpload: FC<Props> = ({\n  portraitUrl,\n  onUpload,\n  onDelete,\n  actionInfoType,\n}) => {\n  const { formatMessage } = useIntl();\n  const [showLoadInfo, setShowLoadInfo] = useState(false);\n\n  const imageDisplay = () => {\n    // //(\"-portraitUrl->\",portraitUrl)\n    return portraitUrl\n      ? { uri: `${portraitUrl}?time=${new Date().getTime()}` }\n      : images.noUserImage();\n  };\n\n  const onPhotoSelect = (avatar: any) => {\n    if (avatar) {\n      // //(\"selected photo-->\",avatar.path)\n      onUpload(avatar.path);\n    }\n  };\n\n  const onDeletePress = () => {\n    onDelete();\n  };\n\n  const infoText = () => {\n    if (actionInfoType) {\n      switch (actionInfoType) {\n        case PortraitMessageType.UploadSuccess:\n          return formatMessage(messages.uploadSuccess);\n        case PortraitMessageType.UploadFail:\n          return formatMessage(messages.uploadFailure);\n        case PortraitMessageType.DeleteSuccess:\n          return formatMessage(messages.deleteSuccess);\n        case PortraitMessageType.DeleteFail:\n          return formatMessage(messages.deleteFailure);\n        default:\n          setShowLoadInfo(false);\n          break;\n      }\n    }\n    return null;\n  };\n\n  useEffect(() => {\n    let timeout: any;\n    if (actionInfoType) {\n      setShowLoadInfo(true);\n      timeout = setTimeout(() => {\n        setShowLoadInfo(false);\n      }, 3500);\n    }\n    return () => {\n      setShowLoadInfo(false);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    };\n  }, [actionInfoType]);\n\n  return (\n    <UserPortraitContainer>\n      <ImgDescriptionText>{formatMessage(messages.info)}</ImgDescriptionText>\n      {showLoadInfo && (\n        <UploadInfoContainer>\n          <UploadInfo>{infoText()}</UploadInfo>\n        </UploadInfoContainer>\n      )}\n      <ImageUploadContainer>\n        <MyPhotoUpload \n        onResizedImageUri={onPhotoSelect}\n        alertTitle={formatMessage(messages.alertTitle)}\n        alertMessage={formatMessage(messages.alertMessage)}\n        >\n          <Image\n            style={{\n              paddingVertical: 30,\n              width: 200,\n              height: 200,\n              borderRadius: 0,\n            }}\n            resizeMode=\"cover\"\n            source={imageDisplay()}\n            key={new Date().getTime()}\n          />\n        </MyPhotoUpload>\n      </ImageUploadContainer>\n      {onDelete && (\n        <DeletePhoto source={images.icTrash()} onPress={onDeletePress} />\n      )}\n    </UserPortraitContainer>\n  );\n};\n\nexport default ImageUpload;\n"],"mappings":"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","ignoreList":[]}