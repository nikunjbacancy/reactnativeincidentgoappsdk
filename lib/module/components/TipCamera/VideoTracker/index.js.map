{"version":3,"names":["images","map","React","memo","useEffect","useRef","LinearGradient","styled","THUMBNAIL_MARGIN_RIGHT","THUMBNAIL_WIDTH","TRACKER_WIDTH","VideoTracker","trackerY","videoIndex","videos","onVideoSelected","listContainerRef","_listContainerRef$cur","current","scrollTo","x","y","renderImage","video","index","_video$id","createElement","ThumbnailContainer","key","id","toString","onPress","width","marginRight","Thumbnail","source","uri","thumbnailUrl","renderTracker","TrackerContainer","left","TrackerThumbOverlay","TrackerImage","icSliderTrack","Container","ListContainer","ref","showsVerticalScrollIndicator","horizontal","View","ScrollView","attrs","theme","colors","trackThumbOverlay","Image","TouchableOpacity"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { images } from '../../../assets';\nimport { IncidentVideo } from 'incident-code-core';\nimport map from 'lodash/map';\nimport React, { FC, memo, useEffect, useRef } from 'react';\nimport { ScrollView } from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport styled from '../../../utils/styled';\n\nimport {\n  THUMBNAIL_MARGIN_RIGHT,\n  THUMBNAIL_WIDTH,\n  TRACKER_WIDTH,\n} from '../constants';\n\ntype Props = {\n  trackerY: number;\n  videoIndex: number;\n  videos: IncidentVideo[];\n  onVideoSelected: (index: number) => void;\n};\n\nconst VideoTracker: FC<Props> = ({\n  trackerY,\n  videoIndex,\n  videos,\n  onVideoSelected,\n}) => {\n  const listContainerRef = useRef<ScrollView | null>(null);\n\n  useEffect(() => {\n    listContainerRef.current?.scrollTo({\n      x: (THUMBNAIL_WIDTH + THUMBNAIL_MARGIN_RIGHT) * videoIndex,\n      y: 0,\n    });\n  }, [videoIndex]);\n\n  const renderImage = (video: IncidentVideo, index: number) => (\n    <ThumbnailContainer\n      key={video.id?.toString()}\n      onPress={() => onVideoSelected(index)}\n      width={THUMBNAIL_WIDTH}\n      marginRight={THUMBNAIL_MARGIN_RIGHT}\n    >\n      <Thumbnail source={{ uri: video.thumbnailUrl }} width={THUMBNAIL_WIDTH} />\n    </ThumbnailContainer>\n  );\n\n  const renderTracker = (): React.ReactElement => (\n    <TrackerContainer left={trackerY} width={TRACKER_WIDTH}>\n      <TrackerThumbOverlay>\n        <TrackerImage source={images.icSliderTrack()} />\n      </TrackerThumbOverlay>\n    </TrackerContainer>\n  );\n\n  return (\n    <Container>\n      <ListContainer\n        ref={() => listContainerRef}\n        showsVerticalScrollIndicator={false}\n        horizontal\n      >\n        {map(videos, renderImage)}\n        {renderTracker()}\n      </ListContainer>\n    </Container>\n  );\n};\n\nconst Container = styled.View`\n  position: absolute;\n  left: 20px;\n  right: 20px;\n  bottom: 20px;\n  height: 90px;\n  justify-content: space-between;\n`;\n\nconst ListContainer = styled.ScrollView`\n  position: relative;\n  height: 90px;\n  width: 100%;\n`;\n\nconst TrackerContainer = styled.View<{ left: number; width: number }>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ${({ left }) => left || 0}px;\n  width: ${({ width }) => width || 16}px;\n  background-color: rgba(0, 0, 0, 0.4);\n`;\n\nconst TrackerThumbOverlay = styled(LinearGradient).attrs(({ theme }) => ({\n  colors: theme.colors.trackThumbOverlay,\n}))`\n  flex: 1;\n`;\n\nconst TrackerImage = styled.Image`\n  position: absolute;\n  top: 49%;\n  left: -32px;\n  width: 80px;\n  height: 3px;\n  z-index: 10000;\n  transform: rotate(90deg);\n`;\n\nconst ThumbnailContainer = styled.TouchableOpacity<{\n  width: number;\n  marginRight: number;\n}>`\n  width: ${({ width }) => width || 63}px;\n  height: 90px;\n  border-radius: 8px;\n  margin-right: ${({ marginRight }) => marginRight || 6}px;\n  overflow: hidden;\n`;\n\nconst Thumbnail = styled.Image<{ width: number }>`\n  width: ${({ width }) => width || 78}px;\n  height: 90px;\n  resize-mode: cover;\n`;\n\nexport default memo(VideoTracker);\n"],"mappings":"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","ignoreList":[]}