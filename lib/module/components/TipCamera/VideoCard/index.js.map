{"version":3,"names":["colors","images","RecordTimer","setTipCameraMode","setTipCameraVideoIndex","React","useCallback","useIntl","ImageBackground","LinearGradient","CircleSnail","useAction","getFlattenIndex","styled","messages","TipCameraMode","VideoCard","id","videoPages","currentPage","duration","thumbnailUrl","text","navigateClick","formatMessage","setTipCameraModeAction","setTipCameraVideoIndexAction","handleCardPress","index","video","createElement","TextContainer","onPress","GradientCountContainer","LinkText","back","Container","disabled","GradientContainer","BackgroundImage","source","uri","Loading","color","white","PlayIcon","icPlay","StyledRecordTimer","recordedTime","TouchableOpacity","attrs","theme","videoCardOverlay","imageStyle","borderRadius","Image","Text","fonts","defaultFamily","light"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { colors, images } from '../../../assets';\nimport RecordTimer from '../../../components/RecordTimer';\nimport {\n  setTipCameraMode,\n  setTipCameraVideoIndex,\n} from '../../../containers/app/actions';\nimport { ObjectId } from 'incident-code-core';\nimport React, { FC, useCallback } from 'react';\nimport { useIntl } from 'react-intl';\nimport { ImageBackground } from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport { CircleSnail } from 'react-native-progress';\nimport { IncidentVideoInfo } from 'types';\nimport { useAction } from '../../../utils/hooks';\nimport { getFlattenIndex } from '../../../utils/lodash';\nimport styled from '../../../utils/styled';\n\nimport messages from '../messages';\nimport { TipCameraMode } from '../types';\n\ninterface Props {\n  id: string | ObjectId | undefined;\n  videoPages: IncidentVideoInfo[][];\n  currentPage: number;\n  duration?: number;\n  thumbnailUrl?: string;\n  text?: string;\n  navigateClick(): void;\n}\n\nconst VideoCard: FC<Props> = ({\n  id,\n  videoPages,\n  currentPage,\n  duration,\n  thumbnailUrl,\n  text,\n  navigateClick,\n}) => {\n  const { formatMessage } = useIntl();\n\n  const setTipCameraModeAction = useAction(setTipCameraMode);\n  const setTipCameraVideoIndexAction = useAction(setTipCameraVideoIndex);\n\n  const handleCardPress = useCallback(() => {\n    const index = getFlattenIndex({ id })(videoPages) - currentPage;\n    setTipCameraModeAction(TipCameraMode.video);\n    setTipCameraVideoIndexAction(index);\n  }, [id, videoPages, currentPage]);\n  if (text) {\n    return (\n      <TextContainer onPress={navigateClick}>\n        <GradientCountContainer>\n          <LinkText>\n            {text === 'back' ? formatMessage(messages.back) : text}\n          </LinkText>\n        </GradientCountContainer>\n      </TextContainer>\n    );\n  }\n  return (\n    <Container disabled={!thumbnailUrl} onPress={handleCardPress}>\n      <GradientContainer>\n        <BackgroundImage source={{ uri: thumbnailUrl }}>\n          {!thumbnailUrl && <Loading color={colors.white} />}\n          {thumbnailUrl && <PlayIcon source={images.icPlay()} />}\n          <StyledRecordTimer recordedTime={duration} />\n        </BackgroundImage>\n      </GradientContainer>\n    </Container>\n  );\n};\n\nexport default VideoCard;\n\nconst TextContainer = styled.TouchableOpacity`\n  width: 63px;\n`;\n\nconst Container = styled.TouchableOpacity`\n  width: 63px;\n  margin-right: 6px;\n`;\n\nconst GradientCountContainer = styled(LinearGradient).attrs(({ theme }) => ({\n  colors: theme.colors.videoCardOverlay,\n}))`\n  flex: 1;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst GradientContainer = styled(LinearGradient).attrs(({ theme }) => ({\n  colors: theme.colors.videoCardOverlay,\n}))`\n  border-radius: 8px;\n  width: 63px;\n  margin-right: 6px;\n`;\n\nconst BackgroundImage = styled(ImageBackground).attrs({\n  imageStyle: { borderRadius: 8 },\n})`\n  min-width: 100%;\n  min-height: 100%;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`;\n\nconst PlayIcon = styled.Image`\n  margin-top: -20px;\n`;\n\nconst StyledRecordTimer = styled(RecordTimer)`\n  bottom: 3px;\n`;\n\nconst LinkText = styled.Text`\n  font-family: ${({ theme }) => theme.fonts.defaultFamily};\n  font-size: 19px;\n  line-height: 28px;\n  letter-spacing: -0.4px;\n  color: ${({ theme }) => theme.colors.light};\n`;\n\nconst Loading = styled(CircleSnail)`\n  margin-bottom: 15px;\n`;\n"],"mappings":"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","ignoreList":[]}